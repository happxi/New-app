<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìíœ´ë ˆí„° - í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Round+Gothic:wght@400;700;800&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* ğŸ¨ íŠ¸ë Œë””í•œ 2030 ì—¬ì„± ëŒ€ìƒ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ */
            --primary: #6B46C1;       /* ë³´ë¼ìƒ‰ - ë©”ì¸ */
            --primary-soft: #F3E8FF;  /* ì—°í•œ ë³´ë¼ */
            --accent: #FF6B9D;        /* í•‘í¬ - í¬ì¸íŠ¸ */
            --accent-soft: #FFE4EC;   /* ì—°í•œ í•‘í¬ */
            --secondary: #4ECDC4;     /* ë¯¼íŠ¸ - ì„œë¸Œ */
            --secondary-soft: #E6FFF9; /* ì—°í•œ ë¯¼íŠ¸ */
            --text-main: #2D3748;     /* ì§„í•œ íšŒìƒ‰ í…ìŠ¤íŠ¸ */
            --text-sub: #718096;      /* íšŒìƒ‰ ì„œë¸Œ í…ìŠ¤íŠ¸ */
            --bg-body: #F8F9FA;       /* ì „ì²´ ë°°ê²½ */
            --white: #FFFFFF;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow-card: 0 8px 32px rgba(107, 70, 193, 0.12);
            --shadow-glass: 0 8px 32px rgba(31, 38, 135, 0.15);
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif; 
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #F8F9FA 0%, #E6FFF9 100%);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex; 
            flex-direction: column; 
            align-items: center;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, var(--primary-soft) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, var(--accent-soft) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, var(--secondary-soft) 0%, transparent 50%);
            z-index: -1;
            opacity: 0.6;
        }

        /* ğŸ“± ì•± ì»¨í…Œì´ë„ˆ */
        .app-container {
            width: 100%; 
            max-width: 480px; 
            min-height: 100vh;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 30px 30px 0 0;
            margin-top: 20px;
            box-shadow: var(--shadow-glass);
            border: 1px solid var(--glass-border);
            padding-bottom: 90px;
            position: relative;
        }

        /* ğŸ  í—¤ë” ë””ìì¸ */
        .header-section {
            padding: 40px 25px 20px;
            text-align: center;
            background: linear-gradient(180deg, rgba(255,255,255,0.9) 0%, rgba(248,249,250,0.8) 100%);
            border-radius: 30px 30px 0 0;
        }
        .header-title {
            font-size: 24px; 
            font-weight: 800; 
            color: var(--primary);
            margin-bottom: 8px; 
            letter-spacing: -0.5px;
            text-shadow: 0 2px 4px rgba(107, 70, 193, 0.1);
        }
        .header-sub {
            font-size: 14px; 
            color: var(--text-sub); 
            font-weight: 500;
        }

        /* ğŸ’ ë©”ì¸ ì¹´ë“œ (Hero Card) */
        .hero-card {
            background: linear-gradient(180deg, var(--white) 0%, var(--glass-bg) 100%);
            border-radius: 30px;
            padding: 30px 20px;
            margin: 0 20px 30px;
            text-align: center;
            box-shadow: var(--shadow-card);
            border: 1px solid rgba(255,255,255,0.6);
            position: relative; 
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        .hero-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--primary-soft) 0%, transparent 50%);
            opacity: 0.3;
            animation: float 20s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(30px, -30px) rotate(180deg); }
        }
        .hero-card h3 { 
            font-size: 19px; 
            font-weight: 700; 
            color: var(--text-main); 
            margin-bottom: 8px; 
            position: relative;
            z-index: 1;
        }
        .hero-card p { 
            font-size: 13px; 
            color: var(--text-sub); 
            margin-bottom: 25px; 
            position: relative;
            z-index: 1;
        }
        
        /* ğŸ”µ ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼ */
        .hero-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white; 
            padding: 14px 30px; 
            border-radius: 25px;
            font-size: 15px; 
            font-weight: 700; 
            border: none;
            box-shadow: 0 4px 20px rgba(107, 70, 193, 0.3);
            cursor: pointer; 
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }
        .hero-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(107, 70, 193, 0.4);
        }
        .hero-btn:active { 
            transform: scale(0.98); 
        }

        /* ğŸ”˜ í€µ ë©”ë‰´ (ì›í˜• ì•„ì´ì½˜) */
        .quick-menu {
            display: flex; 
            justify-content: space-around; 
            padding: 0 20px; 
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        .quick-item {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            cursor: pointer; 
            width: 70px;
            transition: transform 0.3s ease;
        }
        .quick-item:hover {
            transform: translateY(-5px);
        }
        .quick-icon {
            width: 60px; 
            height: 60px; 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 24px; 
            margin-bottom: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        .icon-purple { 
            background: linear-gradient(135deg, var(--primary-soft) 0%, var(--primary) 100%); 
            color: white; 
        }
        .icon-blue { 
            background: linear-gradient(135deg, #E3F2FD 0%, #2196F3 100%); 
            color: white; 
        }
        .icon-pink { 
            background: linear-gradient(135deg, var(--accent-soft) 0%, var(--accent) 100%); 
            color: white; 
        }
        .icon-mint { 
            background: linear-gradient(135deg, var(--secondary-soft) 0%, var(--secondary) 100%); 
            color: white; 
        }
        .icon-yellow { 
            background: linear-gradient(135deg, #FFF9C4 0%, #FFC107 100%); 
            color: white; 
        }
        
        .quick-text { 
            font-size: 11px; 
            color: var(--text-main); 
            font-weight: 600; 
        }

        /* ğŸ§­ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ê³ ì •) */
        .bottom-nav {
            position: fixed; 
            bottom: 0; 
            left: 50%; 
            transform: translateX(-50%);
            width: 100%; 
            max-width: 480px; 
            height: 80px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
            display: flex; 
            justify-content: space-around; 
            align-items: center;
            z-index: 1000; 
            padding-bottom: 10px;
            box-shadow: 0 -5px 20px rgba(31, 38, 135, 0.1);
        }
        .nav-item {
            display: flex; 
            flex-direction: column; 
            align-items: center;
            color: var(--text-sub); 
            text-decoration: none; 
            width: 60px;
            transition: color 0.3s ease;
        }
        .nav-item i { 
            font-size: 24px; 
            margin-bottom: 4px; 
            transition: transform 0.3s ease;
        }
        .nav-text { 
            font-size: 10px; 
            font-weight: 500; 
        }
        .nav-item.active { 
            color: var(--primary); 
        }
        .nav-item.active i {
            transform: scale(1.1);
        }
        
        /* ì¤‘ì•™ ë¬´ë“œ ë²„íŠ¼ (ê°•ì¡°) */
        .nav-item.central .central-bg {
            width: 55px; 
            height: 55px; 
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 20px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            box-shadow: 0 8px 25px rgba(107, 70, 193, 0.3); 
            margin-bottom: -20px; 
            border: 4px solid white;
            transform: translateY(-15px);
            transition: all 0.3s ease;
        }
        .nav-item.central:hover .central-bg {
            transform: translateY(-18px) scale(1.05);
        }
        .nav-item.central i { 
            color: white; 
            font-size: 26px; 
            margin: 0; 
        }
        .nav-item.central .nav-text { 
            margin-top: 25px; 
            font-weight: 700; 
            color: var(--primary); 
        }

        /* ğŸ—³ï¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ (ê³µí†µ) */
        .content-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 25px; 
            padding: 20px;
            margin: 0 20px 15px; 
            box-shadow: var(--shadow-card);
            border: 1px solid rgba(255,255,255,0.6);
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .content-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(107, 70, 193, 0.15);
        }
        .badge-new {
            position: absolute; 
            top: 20px; 
            right: 20px;
            background: var(--accent-soft); 
            color: var(--accent); 
            font-size: 10px;
            padding: 4px 10px; 
            border-radius: 12px; 
            font-weight: 700;
        }

        /* ğŸ“® ìŠ¤íƒ¬í”„ ê·¸ë¦¬ë“œ (30ê°œ) */
        .stamp-grid {
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 10px;
            margin-top: 20px; 
            justify-items: center;
        }
        .stamp-circle {
            width: 35px; 
            height: 35px; 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 12px; 
            font-weight: 700;
            border: 2px solid #E2E8F0; 
            color: #CBD5E0;
            transition: all 0.3s ease;
        }
        .stamp-circle.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); 
            color: white; 
            border: none;
            box-shadow: 0 4px 12px rgba(107, 70, 193, 0.4);
            transform: scale(1.05);
        }

        /* ğŸ” ëª¨ë‹¬ (ë¡œê·¸ì¸/ê¸€ì“°ê¸°) */
        .modal-overlay {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: rgba(0,0,0,0.6); 
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none; 
            align-items: center; 
            justify-content: center;
            padding: 20px;
        }
        .modal-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            width: 90%; 
            max-width: 380px;
            border-radius: 30px; 
            padding: 40px 30px; 
            text-align: center;
            box-shadow: 0 20px 60px rgba(31, 38, 135, 0.3);
            border: 1px solid var(--glass-border);
        }
        .input-box {
            width: 100%; 
            padding: 15px 20px; 
            border: 2px solid rgba(107, 70, 193, 0.1);
            border-radius: 15px; 
            margin-bottom: 15px; 
            font-size: 14px; 
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }
        .input-box:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(107, 70, 193, 0.1);
        }

        /* ì´ëª¨í‹°ì½˜ ì„ íƒê¸° */
        .emoji-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
        }
        .emoji-option {
            font-size: 35px;
            padding: 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: white;
        }
        .emoji-option:hover {
            transform: scale(1.1);
            background: var(--primary-soft);
        }
        .emoji-option.selected {
            border-color: var(--primary);
            background: var(--primary-soft);
            transform: scale(1.15);
        }

        /* ìœ í‹¸ë¦¬í‹° */
        .hide { 
            display: none !important; 
        }
        .toast {
            position: fixed; 
            bottom: 100px; 
            left: 50%; 
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 12px 24px; 
            border-radius: 25px; 
            font-size: 13px; 
            z-index: 3000;
            box-shadow: 0 4px 20px rgba(107, 70, 193, 0.3);
            animation: fadeUp 3s forwards;
        }
        @keyframes fadeUp { 
            0%{opacity:0; bottom:80px} 
            10%{opacity:1; bottom:100px} 
            90%{opacity:1; bottom:100px} 
            100%{opacity:0; bottom:80px} 
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(107, 70, 193, 0.3);
        }
        .btn-secondary {
            background: none;
            color: var(--text-sub);
            padding: 12px 24px;
            border: 2px solid rgba(107, 70, 193, 0.1);
            border-radius: 15px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        .btn-secondary:hover {
            background: var(--primary-soft);
            color: var(--primary);
        }

        /* ê¸€ì“°ê¸° ì•„ì´ì½˜ */
        .write-icon {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 4px 20px rgba(107, 70, 193, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 999;
        }
        .write-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(107, 70, 193, 0.4);
        }

        /* ì¹´í…Œê³ ë¦¬ íƒ­ */
        .category-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        .category-tab {
            padding: 8px 20px;
            border-radius: 20px;
            border: 2px solid var(--primary-soft);
            background: white;
            color: var(--text-sub);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .category-tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        .category-tab:hover {
            background: var(--primary-soft);
            color: var(--primary);
        }

        /* ì—ë””í„° í•„í„° */
        .editor-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 0 20px;
        }
        .filter-chip {
            padding: 6px 16px;
            border-radius: 15px;
            background: white;
            border: 1px solid var(--primary-soft);
            color: var(--text-sub);
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-chip.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ê²Œì‹œê¸€ ìƒì„¸ */
        .post-detail {
            background: var(--glass-bg);
            border-radius: 25px;
            padding: 0;
            margin: 0;
            min-height: 100vh;
            position: relative;
        }
        .post-header {
            background: linear-gradient(180deg, var(--primary) 0%, var(--accent) 100%);
            color: white;
            padding: 40px 20px 20px;
            border-radius: 25px 25px 0 0;
        }
        .post-content {
            padding: 20px;
        }
        .post-actions {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            border-top: 1px solid rgba(107, 70, 193, 0.1);
        }
        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(107, 70, 193, 0.05);
            color: var(--text-sub);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .action-btn.active {
            background: var(--primary-soft);
            color: var(--primary);
        }
        .comment-section {
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .comment-input {
            display: flex;
            gap: 10px;
            padding: 20px;
            border-top: 1px solid rgba(107, 70, 193, 0.1);
            background: white;
        }
        .comment-input input {
            flex: 1;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid var(--primary-soft);
            background: white;
        }
        .comment-input button {
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        /* ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ */
        .password-change-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            z-index: 3000;
            width: 90%;
            max-width: 350px;
        }
        .password-change-modal h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        /* ì´ë¯¸ì§€ ì—…ë¡œë“œ */
        .image-upload {
            margin-bottom: 15px;
        }
        .image-preview {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            display: none;
        }
        .upload-btn {
            width: 100%;
            padding: 10px;
            background: var(--primary-soft);
            border: 2px dashed var(--primary);
            border-radius: 10px;
            color: var(--primary);
            cursor: pointer;
            font-size: 13px;
            text-align: center;
            transition: all 0.3s ease;
        }
        .upload-btn:hover {
            background: var(--primary);
            color: white;
        }
    </style>
</head>
<body>

    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" class="modal-overlay" style="display: flex;">
        <div class="modal-card">
            <div style="font-size: 32px; margin-bottom: 20px;">ğŸ’œ</div>
            <h2 style="color: var(--primary); font-size: 24px; margin-bottom: 15px;">ìíœ´ë ˆí„°</h2>
            <p style="color: var(--primary); font-size: 18px; margin-bottom: 25px; font-weight: 600;">í–…ì”¨ë‹˜ í™˜ì˜í•´ìš”!</p>
            
            <input type="email" id="loginEmail" class="input-box" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            <input type="password" id="loginPassword" class="input-box" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
            
            <div style="display: flex; align-items: center; margin-bottom: 25px; font-size: 12px; color: var(--text-sub);">
                <input type="checkbox" id="keepLogin" style="margin-right: 8px; width: 16px; height: 16px;">
                <label for="keepLogin">ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</label>
            </div>

            <button onclick="handleLogin()" class="btn-primary">ë¡œê·¸ì¸</button>
            
            <p style="margin-top: 20px; font-size: 13px; color: var(--text-sub);">
                ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? 
                <span onclick="showSignupModal()" style="color: var(--primary); font-weight: 700; cursor: pointer;">íšŒì›ê°€ì…</span>
            </p>
        </div>
    </div>

    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div id="signupModal" class="modal-overlay">
        <div class="modal-card">
            <div style="font-size: 32px; margin-bottom: 20px;">ğŸŒŸ</div>
            <h2 style="color: var(--primary); font-size: 24px; margin-bottom: 15px;">íšŒì›ê°€ì…</h2>
            <p style="color: var(--text-sub); font-size: 14px; margin-bottom: 25px;">ìíœ´ë ˆí„°ì™€ í•¨ê»˜ íŠ¹ë³„í•œ íœ´ì‹ì„ ì‹œì‘í•´ë³¼ê¹Œìš”?</p>
            
            <input type="email" id="signupEmail" class="input-box" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            <input type="text" id="signupNickname" class="input-box" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            <input type="password" id="signupPassword" class="input-box" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
            <input type="password" id="signupPasswordConfirm" class="input-box" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”" required>
            
            <div style="display: flex; align-items: center; margin-bottom: 25px; font-size: 12px; color: var(--text-sub);">
                <input type="checkbox" id="agreeTerms" style="margin-right: 8px; width: 16px; height: 16px;">
                <label for="agreeTerms">ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì— ë™ì˜í•©ë‹ˆë‹¤</label>
            </div>

            <button onclick="handleSignup()" class="btn-primary">íšŒì›ê°€ì…</button>
            
            <p style="margin-top: 20px; font-size: 13px; color: var(--text-sub);">
                ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? 
                <span onclick="showLoginModal()" style="color: var(--primary); font-weight: 700; cursor: pointer;">ë¡œê·¸ì¸</span>
            </p>
        </div>
    </div>

    <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
    <div id="passwordChangeModal" class="password-change-modal">
        <h3>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
        <input type="password" id="currentPassword" class="input-box" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸">
        <input type="password" id="newPassword" class="input-box" placeholder="ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸">
        <input type="password" id="newPasswordConfirm" class="input-box" placeholder="ìƒˆë¡œìš´ ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button onclick="handleChangePassword()" class="btn-primary">ë³€ê²½</button>
            <button onclick="closePasswordChangeModal()" class="btn-secondary">ì·¨ì†Œ</button>
        </div>
    </div>

    <!-- ê¸€ì“°ê¸° ëª¨ë‹¬ -->
    <div id="writeModal" class="modal-overlay">
        <div class="modal-card" style="text-align: left;">
            <h3 id="writeTitle" style="font-size: 20px; margin-bottom: 20px; color: var(--primary);">ê¸€ì“°ê¸°</h3>
            
            <select id="letterCategory" class="input-box" style="display: none;">
                <option value="ìíœ´ë ˆí„°">ìíœ´ë ˆí„°</option>
                <option value="ìíœ´ë©">ìíœ´ë©</option>
            </select>

            <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì—ë””í„°í†¡ ì „ìš©) -->
            <div id="imageUploadSection" class="image-upload" style="display: none;">
                <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="previewImage(this)">
                <img id="imagePreview" class="image-preview" alt="ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°">
                <div class="upload-btn" onclick="document.getElementById('imageInput').click()">
                    <i class="fas fa-camera"></i> ì‚¬ì§„ ì²¨ë¶€í•˜ê¸°
                </div>
            </div>

            <div id="moodSelector" class="emoji-selector" style="display: none;">
                <span class="emoji-option" onclick="selectEmoji(this, 'ğŸ˜Š')">ğŸ˜Š</span>
                <span class="emoji-option" onclick="selectEmoji(this, 'ğŸ¥°')">ğŸ¥°</span>
                <span class="emoji-option" onclick="selectEmoji(this, 'ğŸ˜¢')">ğŸ˜¢</span>
                <span class="emoji-option" onclick="selectEmoji(this, 'ğŸ˜¡')">ğŸ˜¡</span>
                <span class="emoji-option" onclick="selectEmoji(this, 'ğŸ¥±')">ğŸ¥±</span>
            </div>

            <input type="text" id="postTitle" class="input-box" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
            <textarea id="postContent" class="input-box" style="height: 120px; resize: none;" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            
            <button onclick="submitPost()" class="btn-primary" style="margin-top: 15px;">ë“±ë¡í•˜ê¸°</button>
            <button onclick="closeModal()" class="btn-secondary" style="margin-top: 10px;">ì·¨ì†Œ</button>
        </div>
    </div>

    <!-- ì•± ì»¨í…Œì´ë„ˆ -->
    <div id="appContainer" class="app-container">
    </div>

    <!-- ê´€ë¦¬ì ê¸€ì“°ê¸° ì•„ì´ì½˜ -->
    <div id="writeIcon" class="write-icon" onclick="openModal('editorTalk')" style="display: none;">
        <i class="fas fa-pen"></i>
    </div>

    <nav class="bottom-nav">
        <a class="nav-item active" onclick="renderTab('home')" id="nav-home">
            <i class="fas fa-home"></i>
            <span class="nav-text">í™ˆ</span>
        </a>
        <a class="nav-item" onclick="renderTab('letter')" id="nav-letter">
            <i class="fas fa-envelope"></i>
            <span class="nav-text">ë ˆí„°</span>
        </a>
        <a class="nav-item central" onclick="renderTab('mood')" id="nav-mood">
            <div class="central-bg">
                <i class="fas fa-smile"></i>
            </div>
            <span class="nav-text">ë¬´ë“œ</span>
        </a>
        <a class="nav-item" onclick="renderTab('editorTalk')" id="nav-editorTalk">
            <i class="fas fa-comments"></i>
            <span class="nav-text">ì—ë””í„°í†¡</span>
        </a>
        <a class="nav-item" onclick="renderTab('mypage')" id="nav-mypage">
            <i class="fas fa-user"></i>
            <span class="nav-text">ë§ˆì´</span>
        </a>
    </nav>

    <script>
        // --- ë°ì´í„° ---
        const ADMINS = ['happxi@jahyu.com', 'elly@jahyu.com', 'gokal@jahyu.com', 'sunny@jahyu.com', 'yudan@jahyu.com'];
        const SUPER_ADMIN = ['happxi@jahyu.com']; // ìŠˆí¼ ê´€ë¦¬ì
        let currentUser = null;
        let currentTab = 'home';
        let userStamps = 28; // í…ŒìŠ¤íŠ¸ìš©
        let selectedMoodEmoji = null;
        let todayMoodSubmitted = false; // ì˜¤ëŠ˜ ë¬´ë“œ ê¸°ë¡ ì—¬ë¶€
        let currentLetterCategory = 'ì „ì²´'; // í˜„ì¬ ë ˆí„° ì¹´í…Œê³ ë¦¬
        let currentEditorFilter = 'ì „ì²´'; // í˜„ì¬ ì—ë””í„° í•„í„°
        
        // ì‚¬ìš©ì ë°ì´í„°
        let userPasswords = {}; // ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì €ì¥ (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê´€ë¦¬)
        
        // ê²Œì‹œê¸€ ë°ì´í„°
        let posts = [
            { id: 1, title: '[32í˜¸] í‡´ì‚¬ í›„ ë²ˆì•„ì›ƒ, ì €ë§Œ ì´ëŸ°ê°€ìš”?', category: 'ìíœ´ë ˆí„°', content: 'í‡´ì‚¬ í›„ì—ë„ ì‰¬ì§€ ëª»í•˜ëŠ” ë‹¹ì‹ ì—ê²Œ...', author: 'í–…ì”¨', date: '2024-01-10', likes: 0, liked: false, bookmarked: false, comments: [] },
            { id: 2, title: '[31í˜¸] ì£¼ë§ ì‰¼ì˜ ê¸°ìˆ ', category: 'ìíœ´ë ˆí„°', content: 'ì™„ì „í•œ íœ´ì‹ì„ ìœ„í•œ íŒ', author: 'í–…ì”¨', date: '2024-01-08', likes: 0, liked: false, bookmarked: false, comments: [] },
            { id: 3, title: '[ìíœ´ë©] ê¸€ì“°ê¸° ë…¸í•˜ìš°', category: 'ìíœ´ë©', content: 'ë‚´ ë§ˆìŒì„ ë‹´ëŠ” ë²• A to Z', author: 'ì—˜ë¦¬', date: '2024-01-05', likes: 0, liked: false, bookmarked: false, comments: [] }
        ];
        
        let editorTalks = [
            { id: 1, author: 'ì—˜ë¦¬', content: 'ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ë„ˆë¬´ ì¢‹ë„¤ìš”! ğŸŒ¿', date: '2024-01-10 10:30', likes: 12, comments: [], liked: false, bookmarked: false },
            { id: 2, author: 'í–…ì”¨', content: 'ìƒˆë¡œìš´ ë ˆí„° ë°œí–‰í–ˆì–´ìš”! ë§ì´ ì‚¬ë‘í•´ì£¼ì„¸ìš” ğŸ’œ', date: '2024-01-09 15:22', likes: 24, comments: [], liked: false, bookmarked: false },
            { id: 3, author: 'ê³ ì¹¼', content: 'íë§ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì–´ë– ì…¨ë‚˜ìš”?', date: '2024-01-08 14:15', likes: 18, comments: [], liked: false, bookmarked: false }
        ];
        
        let myMoodRecords = []; // ì‚¬ìš©ì ë¬´ë“œ ê¸°ë¡
        let allMoodRecords = []; // ëª¨ë“  ì‚¬ìš©ì ë¬´ë“œ ê¸°ë¡ (ìŠˆí¼ ê´€ë¦¬ììš©)

        // --- ê¸°ëŠ¥ ---

        // ë¡œê·¸ì¸ ì²˜ë¦¬
        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!email) {
                showToast('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!password) {
                showToast('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ê°„ë‹¨í•œ ìœ íš¨ì„± ê²€ì‚¬ (ì‹¤ì œë¡œëŠ” ì„œë²„ì™€ í†µì‹ í•´ì•¼ í•¨)
            if (!email.includes('@')) {
                showToast('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
                return;
            }

            // ë¹„ë°€ë²ˆí˜¸ ì²´í¬ (ìƒˆ ì‚¬ìš©ìë©´ ìë™ ê°€ì…)
            if (!userPasswords[email]) {
                userPasswords[email] = password;
            } else if (userPasswords[email] !== password) {
                showToast('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            currentUser = {
                id: email,
                name: email.includes('happxi') ? 'í–…ì‚' : email.includes('elly') ? 'ì—˜ë¦¬' : email.includes('gokal') ? 'ê³ ì¹¼' : email.includes('sunny') ? 'ì¨ë‹ˆ' : email.includes('yudan') ? 'ìœ ë‹¨' : email === 'test@test.com' ? 'í…ŒìŠ¤í„°' : 'í–…ì‚ë‹˜',
                isAdmin: ADMINS.includes(email),
                isSuperAdmin: SUPER_ADMIN.includes(email)
            };

            // ë¡œê·¸ì¸ ìœ ì§€ (localStorage)
            if (document.getElementById('keepLogin').checked) {
                localStorage.setItem('jahyu_user', JSON.stringify(currentUser));
            }

            document.getElementById('loginModal').style.display = 'none';
            renderTab('home');
            showToast(`${currentUser.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!`);
        }

        // íšŒì›ê°€ì… ì²˜ë¦¬
        function handleSignup() {
            const email = document.getElementById('signupEmail').value.trim();
            const nickname = document.getElementById('signupNickname').value.trim();
            const password = document.getElementById('signupPassword').value;
            const passwordConfirm = document.getElementById('signupPasswordConfirm').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;

            // ìœ íš¨ì„± ê²€ì‚¬
            if (!email || !nickname || !password || !passwordConfirm) {
                showToast('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!email.includes('@')) {
                showToast('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.');
                return;
            }

            if (password !== passwordConfirm) {
                showToast('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            if (password.length < 6) {
                showToast('ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            if (!agreeTerms) {
                showToast('ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
                return;
            }

            // íšŒì›ê°€ì… ì„±ê³µ (ì‹¤ì œë¡œëŠ” ì„œë²„ì™€ í†µì‹ )
            userPasswords[email] = password;
            currentUser = {
                id: email,
                name: nickname,
                isAdmin: ADMINS.includes(email),
                isSuperAdmin: SUPER_ADMIN.includes(email)
            };

            // ë¡œê·¸ì¸ ìƒíƒœ ì €ì¥
            localStorage.setItem('jahyu_user', JSON.stringify(currentUser));

            document.getElementById('signupModal').style.display = 'none';
            renderTab('home');
            showToast(`${nickname}ë‹˜, íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
        function handleChangePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const newPassConfirm = document.getElementById('newPasswordConfirm').value;

            if (!current || !newPass || !newPassConfirm) {
                showToast('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (userPasswords[currentUser.id] !== current) {
                showToast('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            if (newPass !== newPassConfirm) {
                showToast('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }

            if (newPass.length < 6) {
                showToast('ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            userPasswords[currentUser.id] = newPass;
            closePasswordChangeModal();
            showToast('ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function showChangePassword() {
            document.getElementById('passwordChangeModal').style.display = 'block';
            // ì…ë ¥ê°’ ì´ˆê¸°í™”
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('newPasswordConfirm').value = '';
        }

        function closePasswordChangeModal() {
            document.getElementById('passwordChangeModal').style.display = 'none';
        }

        // ëª¨ë‹¬ ì „í™˜
        function showSignupModal() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('signupModal').style.display = 'flex';
            // ì…ë ¥ê°’ ì´ˆê¸°í™”
            document.getElementById('signupEmail').value = '';
            document.getElementById('signupNickname').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('signupPasswordConfirm').value = '';
            document.getElementById('agreeTerms').checked = false;
        }

        function showLoginModal() {
            document.getElementById('signupModal').style.display = 'none';
            document.getElementById('loginModal').style.display = 'flex';
        }

        // ìë™ ë¡œê·¸ì¸ ì²´í¬
        function checkAutoLogin() {
            const savedUser = localStorage.getItem('jahyu_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('loginModal').style.display = 'none';
                document.getElementById('signupModal').style.display = 'none';
                renderTab('home');
            }
        }

        // ì´ëª¨ì§€ ì„ íƒ
        function selectEmoji(element, emoji) {
            const selector = document.getElementById('moodSelector');
            selector.querySelectorAll('.emoji-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedMoodEmoji = emoji;
        }

        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
        function previewImage(input) {
            const preview = document.getElementById('imagePreview');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- íƒ­ ë Œë”ë§ ì‹œìŠ¤í…œ ---
        function renderTab(tabName) {
            currentTab = tabName;
            const container = document.getElementById('appContainer');
            container.innerHTML = '';
            window.scrollTo(0,0);

            // íƒ­ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById(`nav-${tabName}`);
            if (activeNav) activeNav.classList.add('active');

            // ê´€ë¦¬ì ê¸€ì“°ê¸° ì•„ì´ì½˜ ì œì–´ (ì—ë””í„°í†¡ì—ì„œë§Œ)
            const writeIcon = document.getElementById('writeIcon');
            if (currentUser && currentUser.isAdmin && tabName === 'editorTalk') {
                writeIcon.style.display = 'flex';
            } else {
                writeIcon.style.display = 'none';
            }

            if (tabName === 'home') {
                container.innerHTML = `
                    <div class="header-section">
                        <h1 class="header-title">í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</h1>
                        <p class="header-sub">ë©”ë§ˆë¥¸ ì¼ìƒì— íœ´ì‹ í•œ ë°©ìš¸! ğŸ’§</p>
                    </div>

                    <div class="hero-card">
                        <h3>ì˜¤ëŠ˜ì€ ì–´ë–¤ íë§ì´ í•„ìš”í•˜ì„¸ìš”?</h3>
                        <p>ìíœ´ë ˆí„°ì™€ ìíœ´ë©ì„ ì£¼ì œë³„ë¡œ í•œ ëˆˆì—!</p>
                        <button onclick="handleArchiveClick()" class="hero-btn">ë ˆí„° ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°</button>
                    </div>

                    <div style="padding: 0 20px;">
                        <h4 style="margin-bottom:15px; font-weight:700; color:var(--text-main);">ì˜¤ëŠ˜ì€ ì–´ë–¤ íë§ì´ í•„ìš”í•˜ì„¸ìš”?</h4>
                    </div>

                    <div class="quick-menu">
                        <div class="quick-item" onclick="window.open('https://maily.so/happci/', '_blank')">
                            <div class="quick-icon icon-purple">
                                <i class="fas fa-envelope-open-text"></i>
                            </div>
                            <span class="quick-text">ë ˆí„° ì½ê¸°</span>
                        </div>
                        <div class="quick-item" onclick="window.open('https://index-html-zak5.vercel.app/', '_blank')">
                            <div class="quick-icon icon-blue">
                                <i class="fas fa-magic"></i>
                            </div>
                            <span class="quick-text">íë§ í…ŒìŠ¤íŠ¸</span>
                        </div>
                        <div class="quick-item" onclick="renderTab('mood')">
                            <div class="quick-icon icon-pink">
                                <i class="fas fa-heart"></i>
                            </div>
                            <span class="quick-text">ì˜¤ëŠ˜ì˜ ë¬´ë“œ</span>
                        </div>
                        <div class="quick-item" onclick="window.open('http://pf.kakao.com/_Jfjxgn/111753149', '_blank')">
                            <div class="quick-icon icon-mint">
                                <i class="fas fa-pen-fancy"></i>
                            </div>
                            <span class="quick-text">ë¬¸ì¥ ìˆ˜ì§‘</span>
                        </div>
                        <div class="quick-item" onclick="window.open('http://pf.kakao.com/_Jfjxgn', '_blank')">
                            <div class="quick-icon icon-yellow">
                                <i class="fas fa-comments"></i>
                            </div>
                            <span class="quick-text">1:1 ì±„íŒ…</span>
                        </div>
                    </div>

                    <div style="padding: 0 20px;">
                        <h4 style="margin-bottom:15px; font-weight:700; color:var(--text-main);">ìµœì‹  ë ˆí„°</h4>
                        ${posts.slice(0, 2).map(post => `
                            <div class="content-card" onclick="viewPost(${post.id})">
                                ${post.id === posts[0].id ? '<span class="badge-new">NEW</span>' : ''}
                                <h4 style="font-weight:700; margin-bottom:5px;">${post.title}</h4>
                                <p style="font-size:12px; color:var(--text-sub);">${post.content}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (tabName === 'letter') {
                const filteredPosts = currentLetterCategory === 'ì „ì²´' ? posts : posts.filter(p => p.category === currentLetterCategory);
                
                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">ìíœ´ë ˆí„°ë¥¼ í•œ ëˆˆì—!</h2>
                        <div class="category-tabs">
                            <button class="category-tab ${currentLetterCategory === 'ì „ì²´' ? 'active' : ''}" onclick="filterCategory(this, 'ì „ì²´')">ì „ì²´</button>
                            <button class="category-tab ${currentLetterCategory === 'ìíœ´ë ˆí„°' ? 'active' : ''}" onclick="filterCategory(this, 'ìíœ´ë ˆí„°')">ìíœ´ë ˆí„°</button>
                            <button class="category-tab ${currentLetterCategory === 'ìíœ´ë©' ? 'active' : ''}" onclick="filterCategory(this, 'ìíœ´ë©')">ìíœ´ë©</button>
                        </div>
                    </div>
                    <div style="padding: 0 20px;">
                        ${filteredPosts.map(post => `
                            <div class="content-card" onclick="viewPost(${post.id})">
                                <h4 style="font-weight:700; margin-bottom:5px;">${post.title}</h4>
                                <p style="font-size:12px; color:var(--text-sub);">${post.content}</p>
                                <div style="margin-top:10px; font-size:11px; color:var(--text-sub); display:flex; justify-content:space-between;">
                                    <span>${post.author} Â· ${post.date}</span>
                                    <span><i class="fas fa-heart" style="color:${post.liked ? 'var(--accent)' : '#ccc'}"></i> ${post.likes}</span>
                                </div>
                            </div>
                        `).join('')}
                        ${filteredPosts.length === 0 ? '<p style="text-align:center; padding:40px; color:var(--text-sub);">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>' : ''}
                    </div>
                `;
            } else if (tabName === 'mood') {
                // ë¬´ë“œ ê¸°ë¡ ì—¬ë¶€ í™•ì¸
                const today = new Date().toDateString();
                todayMoodSubmitted = myMoodRecords.some(record => new Date(record.date).toDateString() === today);
                
                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">ì˜¤ëŠ˜ì˜ ë¬´ë“œ</h2>
                        <p class="header-sub">í–…ì‚ë‹˜ì˜ ê°ì •ê³¼ ìƒê°ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!<br>ì˜¤ì§ í–…ì‚ë‹˜ë§Œì„ ìœ„í•œ ê³µê°„ì´ì—ìš”!<br>ë¬´ë“œë¥¼ ê¸°ë¡í•˜ë©´ ìíœ´ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë¼ìš”!(1ì¼ 1íšŒ)</p>
                    </div>
                    
                    ${currentUser.isSuperAdmin ? `
                        <div class="content-card" style="margin:0 20px 20px;">
                            <h4 style="color:var(--primary); margin-bottom:10px;">
                                <i class="fas fa-crown"></i> ìŠˆí¼ ê´€ë¦¬ì ëª¨ë“œ
                            </h4>
                            <p style="font-size:12px; color:var(--text-sub); margin-bottom:15px;">ëª¨ë“  ì‚¬ìš©ìì˜ ë¬´ë“œ ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                            <button onclick="showAllMoodRecords()" class="btn-primary" style="font-size:12px;">ëª¨ë“  ë¬´ë“œ ê¸°ë¡ ë³´ê¸°</button>
                        </div>
                    ` : ''}
                    
                    <div class="content-card" style="text-align:center; padding: 40px 20px;">
                        ${todayMoodSubmitted ? 
                            `<p style="color:var(--primary); font-size:14px; margin-bottom:10px;">âœ… ì˜¤ëŠ˜ì˜ ë¬´ë“œë¥¼ ì´ë¯¸ ê¸°ë¡í•˜ì…¨ì–´ìš”!</p>
                             <p style="color:var(--text-sub); font-size:12px;">ë‚´ì¼ ë‹¤ì‹œ ì™€ì„œ ë¬´ë“œë¥¼ ê¸°ë¡í•´ì£¼ì„¸ìš” ğŸ’œ</p>` :
                            `<p style="color:var(--text-sub); margin-bottom:25px;">ì•„ì§ ë¬´ë“œë¥¼ ê¸°ë¡í•˜ì§€ ì•Šìœ¼ì…¨ì–´ìš”.</p>
                             <button onclick="openModal('mood')" class="hero-btn">ë¬´ë“œ ê¸°ë¡í•˜ê¸° âœï¸</button>`
                        }
                    </div>
                    
                    ${myMoodRecords.length > 0 ? `
                        <div style="padding: 0 20px;">
                            <h4 style="margin-bottom:15px; font-weight:700; color:var(--text-main);">ë‚˜ì˜ ë¬´ë“œ ê¸°ë¡</h4>
                            ${myMoodRecords.slice(-3).reverse().map(record => `
                                <div class="content-card" onclick="viewMoodRecord(${record.id})">
                                    <div style="font-size:24px; margin-bottom:10px;">${record.emoji}</div>
                                    <p style="font-size:13px; margin-bottom:5px;">${record.title || 'ë¬´ì œ'}</p>
                                    <p style="font-size:11px; color:var(--text-sub);">${new Date(record.date).toLocaleDateString()}</p>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                `;
            } else if (tabName === 'editorTalk') {
                // ì—ë””í„° í•„í„°ë§ (ê´€ë¦¬ìë§Œ ê°€ëŠ¥)
                const editors = currentUser.isAdmin ? ['ì „ì²´', 'í–…ì”¨', 'ì—˜ë¦¬', 'ê³ ì¹¼', 'ì¨ë‹ˆ', 'ìœ ë‹¨'] : ['ì „ì²´'];
                let filterHTML = '';
                
                if (currentUser.isAdmin) {
                    filterHTML = `
                        <div class="editor-filter">
                            ${editors.map(editor => `
                                <span class="filter-chip ${editor === currentEditorFilter ? 'active' : ''}" onclick="filterEditor(this, '${editor}')">${editor}</span>
                            `).join('')}
                        </div>
                    `;
                }
                
                // í˜„ì¬ í•„í„°ì— ë”°ë¥¸ ê²Œì‹œê¸€ í•„í„°ë§
                const filteredTalks = currentEditorFilter === 'ì „ì²´' ? editorTalks : editorTalks.filter(t => t.author === currentEditorFilter);
                
                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">ì—ë””í„° í†¡</h2>
                        <p class="header-sub">ì—ë””í„°ì˜ ì¼ìƒì„ ë” ê°€ê¹Œì´ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”!</p>
                    </div>
                    ${filterHTML}
                    <div style="padding: ${filterHTML ? '0 20px' : '20px'};">
                         ${filteredTalks.map(talk => `
                            <div class="content-card" onclick="viewEditorTalk(${talk.id})">
                                <div style="display:flex; align-items:center; margin-bottom:15px;">
                                    <div style="width:40px; height:40px; background:linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); border-radius:50%; display:flex; align-items:center; justify-content: center; color:white; margin-right:12px; font-weight:700;">
                                        ${talk.author.charAt(0)}
                                    </div>
                                    <div>
                                        <span style="font-weight:700; cursor: pointer;" onclick="event.stopPropagation(); filterEditorByName('${talk.author}')">${talk.author}</span>
                                        <p style="font-size:11px; color:var(--text-sub); margin:0;">${talk.date}</p>
                                    </div>
                                </div>
                                ${talk.image ? `<img src="${talk.image}" style="width:100%; border-radius:10px; margin-bottom:10px;" alt="ì²¨ë¶€ ì´ë¯¸ì§€">` : ''}
                                <p style="font-size:14px; line-height:1.5;">${talk.content}</p>
                                <div style="margin-top:15px; padding-top:15px; border-top:1px solid var(--primary-soft); font-size:11px; color:var(--text-sub); display:flex; gap:20px;">
                                    <span><i class="fas fa-heart" style="color:${talk.liked ? 'var(--accent)' : '#ccc'}"></i> ${talk.likes}</span>
                                    <span><i class="fas fa-comment"></i> ${talk.comments.length}</span>
                                    <span><i class="fas fa-bookmark" style="color:${talk.bookmarked ? 'var(--primary)' : '#ccc'}"></i></span>
                                </div>
                            </div>
                        `).join('')}
                        ${filteredTalks.length === 0 ? '<p style="text-align:center; padding:40px; color:var(--text-sub);">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>' : ''}
                    </div>
                `;
            } else if (tabName === 'mypage') {
                let stampHTML = '';
                for(let i=1; i<=30; i++) {
                    const active = i <= userStamps ? 'active' : '';
                    stampHTML += `<div class="stamp-circle ${active}">${i}</div>`;
                }

                // ë‚´ ê²Œì‹œë¬¼ í•„í„°ë§
                const myPosts = posts.filter(p => p.author === currentUser.name);
                const myLikedPosts = posts.filter(p => p.liked);
                const myBookmarkedPosts = posts.filter(p => p.bookmarked);

                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">My Page</h2>
                        <div style="background:var(--glass-bg); padding:25px; border-radius:25px; display:flex; align-items:center; margin-top:20px; box-shadow:var(--shadow-card); backdrop-filter: blur(10px);">
                            <div style="width:60px; height:60px; background:linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%); border-radius:50%; margin-right:20px; display:flex; align-items:center; justify-content:center; color:white; font-weight:700; font-size:24px; box-shadow:0 4px 15px rgba(107, 70, 193, 0.3);">
                                ${currentUser.name.charAt(0)}
                            </div>
                            <div>
                                <h3 style="font-size:18px; font-weight:700;">${currentUser.name}ë‹˜</h3>
                                <p style="font-size:12px; color:var(--text-sub);">${currentUser.id}</p>
                                ${currentUser.isAdmin ? '<span style="font-size:10px; background:var(--accent-soft); color:var(--accent); padding:2px 8px; border-radius:10px; margin-top:5px; display:inline-block;">ê´€ë¦¬ì</span>' : ''}
                            </div>
                        </div>
                    </div>

                    <div style="padding: 0 20px;">
                        <div class="content-card">
                            <h4 style="font-weight:700; color:var(--primary); margin-bottom:15px;">ìíœ´ìŠ¤íƒ¬í”„ í˜„í™© (${userStamps}ê°œ)</h4>
                            <div class="stamp-grid">
                                ${stampHTML}
                            </div>
                            <div style="background:linear-gradient(135deg, var(--primary-soft) 0%, var(--accent-soft) 100%); padding:20px; border-radius:20px; margin-top:25px; font-size:12px; color:var(--text-main); line-height:1.6; text-align:center;">
                                <strong>ìíœ´ìŠ¤íƒ¬í”„ ì´ë²¤íŠ¸</strong><br>
                                ìŠ¤íƒ¬í”„ 30ê°œë¥¼ ëª¨ì€ í™”ë©´ì„ ìº¡ì³í•˜ì—¬<br>
                                ìíœ´ë ˆí„° ì¹´ì¹´ì˜¤í†¡ ì±„ë„ë¡œ ë³´ë‚´ì£¼ì‹œë©´<br>
                                ì–´ëŠë‚  <strong>ìŠ¤í˜ì…œ ë ˆí„°</strong>ê°€ ë„ì°©í• ì§€ë„ ëª°ë¼ìš”!
                            </div>
                        </div>

                        <div class="content-card" style="padding:0;">
                            <div onclick="viewMyPosts()" style="padding:18px 20px; border-bottom:1px solid var(--primary-soft); display:flex; justify-content:space-between; align-items:center; cursor: pointer;">
                                <span><i class="fas fa-edit"></i> ë‚´ê°€ ì“´ ê¸€ <small style="color:var(--text-sub);">(${myPosts.length})</small></span> 
                                <span style="color:var(--text-sub);">â€º</span>
                            </div>
                            <div onclick="viewMyComments()" style="padding:18px 20px; border-bottom:1px solid var(--primary-soft); display:flex; justify-content:space-between; align-items:center; cursor: pointer;">
                                <span><i class="fas fa-comment-dots"></i> ë‚˜ì˜ ëŒ“ê¸€ <small style="color:var(--text-sub);">(0)</small></span> 
                                <span style="color:var(--text-sub);">â€º</span>
                            </div>
                            <div onclick="viewMyLikes()" style="padding:18px 20px; border-bottom:1px solid var(--primary-soft); display:flex; justify-content:space-between; align-items:center; cursor: pointer;">
                                <span><i class="fas fa-heart"></i> ì¢‹ì•„ìš”í•œ ê¸€ <small style="color:var(--text-sub);">(${myLikedPosts.length})</small></span> 
                                <span style="color:var(--text-sub);">â€º</span>
                            </div>
                            <div onclick="viewMyBookmarks()" style="padding:18px 20px; display:flex; justify-content:space-between; align-items:center; cursor: pointer;">
                                <span><i class="fas fa-bookmark"></i> ë¶ë§ˆí¬í•œ ê¸€ <small style="color:var(--text-sub);">(${myBookmarkedPosts.length})</small></span> 
                                <span style="color:var(--text-sub);">â€º</span>
                            </div>
                        </div>

                        <div class="content-card">
                            <h4 style="font-weight:700; margin-bottom:15px;">ê³„ì • ê´€ë¦¬</h4>
                            <button onclick="showChangePassword()" style="width:100%; padding:15px; background:var(--primary-soft); color:var(--primary); border:none; border-radius:15px; font-weight:700; margin-bottom:10px;">
                                <i class="fas fa-lock"></i> ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                            </button>
                        </div>
                        
                        <button onclick="handleLogout()" style="width:100%; padding:15px; color:var(--accent); background:none; border:2px solid var(--accent-soft); border-radius:15px; font-weight:700; margin-top:20px;">
                            <i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ
                        </button>
                    </div>
                `;
            }
        }

        // --- ë¡œì§ í•¸ë“¤ëŸ¬ ---
        function handleArchiveClick() {
            renderTab('letter');
        }

        function openModal(type) {
            const modal = document.getElementById('writeModal');
            const title = document.getElementById('writeTitle');
            const moodSec = document.getElementById('moodSelector');
            const letterCat = document.getElementById('letterCategory');
            const imageUpload = document.getElementById('imageUploadSection');

            modal.style.display = 'flex';
            moodSec.style.display = 'none';
            letterCat.style.display = 'none';
            imageUpload.style.display = 'none';

            // ì´ëª¨ì§€ ì„ íƒê¸° ì´ˆê¸°í™”
            moodSec.querySelectorAll('.emoji-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            selectedMoodEmoji = null;

            if (type === 'mood') {
                title.innerText = 'ì˜¤ëŠ˜ì˜ ë¬´ë“œ ê¸°ë¡';
                moodSec.style.display = 'grid';
                
                // ì˜¤ëŠ˜ ë¬´ë“œ ê¸°ë¡ ì—¬ë¶€ í™•ì¸
                const today = new Date().toDateString();
                if (myMoodRecords.some(record => new Date(record.date).toDateString() === today)) {
                    showToast('ì˜¤ëŠ˜ì€ ì´ë¯¸ ë¬´ë“œë¥¼ ê¸°ë¡í•˜ì…¨ì–´ìš”!');
                    closeModal();
                    return;
                }
            } else if (type === 'letter') {
                title.innerText = 'ë ˆí„° ë°œí–‰';
                letterCat.style.display = 'block';
            } else if (type === 'editorTalk') {
                title.innerText = 'ì—ë””í„°í†¡ ì‘ì„±';
                imageUpload.style.display = 'block';
            }
        }

        function closeModal() {
            document.getElementById('writeModal').style.display = 'none';
            // ì…ë ¥ê°’ ì´ˆê¸°í™”
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('imageInput').value = '';
        }

        function submitPost() {
            const category = document.getElementById('letterCategory')?.value || '';
            const title = document.getElementById('postTitle').value.trim();
            const content = document.getElementById('postContent').value.trim();

            if (!title || !content) {
                showToast('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const postData = {
                id: posts.length + 1,
                title: category ? `[${category}] ${title}` : title,
                category: category || 'ìíœ´ë ˆí„°',
                content: content,
                author: currentUser.name,
                date: new Date().toISOString().split('T')[0],
                likes: 0,
                liked: false,
                bookmarked: false,
                comments: []
            };

            // ë¬´ë“œ ê¸°ë¡ì¸ ê²½ìš°
            if (selectedMoodEmoji) {
                const moodRecord = {
                    id: myMoodRecords.length + 1,
                    emoji: selectedMoodEmoji,
                    title: title,
                    content: content,
                    date: new Date(),
                    author: currentUser.name
                };
                myMoodRecords.push(moodRecord);
                
                // ìŠˆí¼ ê´€ë¦¬ìë¥¼ ìœ„í•œ ì „ì²´ ê¸°ë¡
                if (currentUser.isSuperAdmin) {
                    allMoodRecords.push({...moodRecord});
                }
                
                todayMoodSubmitted = true;
            }

            // ì—ë””í„°í†¡ì¸ ê²½ìš°
            if (currentTab === 'editorTalk') {
                const imageInput = document.getElementById('imageInput');
                let imageUrl = null;
                if (imageInput.files && imageInput.files[0]) {
                    // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì—…ë¡œë“œí•´ì•¼ í•¨
                    imageUrl = URL.createObjectURL(imageInput.files[0]);
                }
                
                const newTalk = {
                    id: editorTalks.length + 1,
                    author: currentUser.name,
                    content: content,
                    image: imageUrl,
                    date: new Date().toLocaleString('ko-KR', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit'
                    }),
                    likes: 0,
                    comments: [],
                    liked: false,
                    bookmarked: false
                };
                editorTalks.unshift(newTalk);
            } else {
                // ì¼ë°˜ ë ˆí„°ì¸ ê²½ìš°
                posts.unshift(postData);
            }

            // ìŠ¤íƒ¬í”„ ì ë¦½
            if (userStamps < 30) {
                userStamps++;
                showToast("ì‘ì„± ì™„ë£Œ! ìíœ´ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤ âœ¨");
            } else {
                showToast("ì‘ì„± ì™„ë£Œ! ì´ë¯¸ ìŠ¤íƒ¬í”„ë¥¼ ëª¨ë‘ ëª¨ìœ¼ì…¨ë„¤ìš”! ğŸ‰");
            }
            
            closeModal();
            renderTab(currentTab);
        }

        function handleLogout() {
            localStorage.removeItem('jahyu_user');
            currentUser = null;
            location.reload();
        }

        function showToast(msg) {
            const div = document.createElement('div');
            div.className = 'toast';
            div.innerText = msg;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 3000);
        }

        // ì¹´í…Œê³ ë¦¬ í•„í„°ë§
        function filterCategory(element, category) {
            const tabs = element.parentElement.querySelectorAll('.category-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            element.classList.add('active');
            currentLetterCategory = category;
            renderTab('letter');
        }

        // ì—ë””í„° í•„í„°ë§
        function filterEditor(element, editor) {
            const chips = element.parentElement.querySelectorAll('.filter-chip');
            chips.forEach(chip => chip.classList.remove('active'));
            element.classList.add('active');
            currentEditorFilter = editor;
            renderTab('editorTalk');
        }

        // ì—ë””í„° ì´ë¦„ í´ë¦­ì‹œ í•„í„°ë§
        function filterEditorByName(editorName) {
            currentEditorFilter = editorName;
            renderTab('editorTalk');
        }

        // ê²Œì‹œê¸€ ìƒì„¸ ë³´ê¸°
        function viewPost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;

            const container = document.getElementById('appContainer');
            container.innerHTML = `
                <div class="post-detail">
                    <div class="post-header">
                        <button onclick="renderTab('letter')" style="color:white; background:none; border:none; font-size:18px; position:absolute; left:20px; top:40px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 style="color:white; text-align:center; margin:20px 0;">${post.title}</h2>
                        <p style="color:white; text-align:center; font-size:12px; opacity:0.8;">${post.author} Â· ${post.date}</p>
                    </div>
                    <div class="post
