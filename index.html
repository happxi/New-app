<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìíœ´ë ˆí„° - í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Round+Gothic:wght@300;400;500;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* ğŸ’™ í´ë¦¬ì–´ ìŠ¤íƒ€ì¼ í¬ë¦¬ìŠ¤íƒˆ ì»¬ëŸ¬ ì‹œìŠ¤í…œ */
            --color-primary: #4A90E2;
            --color-primary-light: #87CEEB;
            --color-primary-lighter: #B6E3F7;
            --color-secondary: #E8F4F8;
            --color-accent: #6BB6FF;
            --color-white: rgba(255, 255, 255, 0.85);
            --color-glass: rgba(255, 255, 255, 0.7);
            --color-shadow: rgba(74, 144, 226, 0.15);
            --color-text: #2C5282;
            --color-text-light: #4A7FC7;
            --color-black: #1A365D;
            --color-glass-border: rgba(255, 255, 255, 0.5);
        }
  
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
        }
  
        body {
            background: linear-gradient(135deg, var(--color-secondary) 0%, #F0F8FF 100%);
            color: var(--color-text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
  
        /* ğŸ“± ì™„ë²½í•œ ëª¨ë°”ì¼ ìµœì í™” */
        .main-container {
            width: 100%;
            max-width: 100vw;
            min-height: calc(100vh - 80px);
            max-height: 85vh;
            padding: 0 16px 20px;
            padding-bottom: 100px;
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            display: none;
        }
  
        .main-container.show {
            display: block;
        }
  
        .main-container::-webkit-scrollbar {
            display: none;
        }
  
        /* ë¡œê·¸ì¸ ëª¨ë‹¬ - íˆ¬ëª… ìœ ë¦¬ ìŠ¤íƒ€ì¼ */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
  
        .auth-content {
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.95) 0%,   
                rgba(240, 249, 255, 0.9) 50%,   
                rgba(224, 242, 254, 0.85) 100%);
            border-radius: 28px;
            padding: 40px;
            width: 90%;
            max-width: 380px;
            box-shadow:   
                0 20px 40px rgba(74, 144, 226, 0.2),
                0 8px 25px rgba(255, 255, 255, 0.8) inset,
                0 2px 10px rgba(135, 206, 235, 0.3) inset;
            border: 1px solid var(--color-glass-border);
            animation: bubbleFloat 0.5s ease-out;
        }
  
        @keyframes bubbleFloat {
            from {
                transform: translateY(30px) scale(0.95);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }
  
        .auth-content h2 {
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
        }
  
        .auth-input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid var(--color-primary-lighter);
            border-radius: 24px;
            margin-bottom: 20px;
            font-size: 16px;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.8);
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
        }
  
        .auth-input:focus {
            outline: none;
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow:   
                0 8px 25px rgba(74, 144, 226, 0.2),
                0 2px 10px rgba(255, 255, 255, 0.6) inset;
        }
  
        .auth-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
            color: white;
            border: none;
            border-radius: 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.3);
        }
  
        .auth-button:hover {
            transform: translateY(-3px);
            box-shadow:   
                0 10px 30px rgba(74, 144, 226, 0.4),
                0 4px 15px rgba(255, 255, 255, 0.6) inset;
        }
  
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
  
        .checkbox-container input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
            accent-color: var(--color-primary);
        }
  
        .checkbox-container label {
            font-size: 14px;
            color: var(--color-text);
            font-weight: 400;
        }
  
        .auth-link {
            text-align: center;
            margin-top: 20px;
        }
  
        .auth-link button {
            background: none;
            border: none;
            color: var(--color-primary);
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
        }
  
        .auth-link button:hover {
            text-decoration: underline;
        }
  
        /* ğŸ¯ í—¤ë” ë ˆë””ìì¸ (í…ìŠ¤íŠ¸ ì˜ë¦¼ ë°©ì§€ íŒ¨ë”©/ë§ˆì§„ ì¡°ì •) */
        .main-header {
            text-align: center;
            padding: 35px 0 25px;
        }
  
        .main-header h1 {
            font-size: 24px; /* í¬ê¸° ì¶•ì†Œ */
            font-weight: 600; /* ì•½ê°„ êµµê²Œ */
            margin-bottom: 8px;
            color: var(--color-black);
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif; /* ë‘¥ê¸€ê³  ë¶€ë“œëŸ¬ìš´ ì„œì²´ */
            border-radius: 24px;
            padding: 20px 25px; /* ë„‰ë„‰í•œ ì„¸ë¡œ íŒ¨ë”© */
            background: linear-gradient(135deg,   
                rgba(135, 206, 235, 0.9) 0%,   
                rgba(107, 182, 255, 0.85) 100%);
            box-shadow:   
                0 8px 25px rgba(74, 144, 226, 0.25),
                0 4px 15px rgba(255, 255, 255, 0.8) inset;
            border: 1px solid var(--color-glass-border);
            letter-spacing: -0.5px; /* ìê°„ ì¡°ì • */
            display: inline-block;
            max-width: 100%; /* ë„ˆë¹„ í™•ë³´ */
        }
        
        /* ì„œë¸Œ í—¤ë” íƒ€ì´í‹€ í…ìŠ¤íŠ¸ ì˜ë¦¼ ë°©ì§€ ì¶”ê°€ íŒ¨ë”© */
        .main-header h2 {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-black);
            margin-bottom: 8px;
            padding: 0 10px; /* ì¢Œìš° íŒ¨ë”© ì¶”ê°€ */
        }
  
        .main-header p {
            font-size: 14px;
            color: var(--color-text-light);
            font-weight: 300;
            margin-top: 10px;
            padding: 0 10px; /* ì¢Œìš° íŒ¨ë”© ì¶”ê°€ */
        }
  
        /* â¬…ï¸ ë°±ë²„íŠ¼ */
        .back-button {
            position: absolute;
            top: 20px;
            left: 16px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.9) 0%,   
                rgba(240, 249, 255, 0.85) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow:   
                0 6px 20px rgba(74, 144, 226, 0.2),
                0 2px 10px rgba(255, 255, 255, 0.8) inset;
            border: 1px solid var(--color-glass-border);
        }
  
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow:   
                0 8px 25px rgba(74, 144, 226, 0.3),
                0 4px 15px rgba(255, 255, 255, 0.9) inset;
        }
  
        .back-button svg {
            width: 24px;
            height: 24px;
            fill: var(--color-primary);
        }
  
        /* ğŸ’ íˆ¬ëª… ìœ ë¦¬êµ¬ìŠ¬ ì¹´ë“œ */
        .glass-card {
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.9) 0%,   
                rgba(240, 249, 255, 0.85) 50%,   
                rgba(224, 242, 254, 0.8) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 24px;
            border: 1px solid var(--color-glass-border);
            box-shadow:   
                0 12px 35px rgba(74, 144, 226, 0.12),
                0 4px 15px rgba(255, 255, 255, 0.8) inset,
                0 1px 8px rgba(135, 206, 235, 0.3) inset;
            padding: 25px 20px; /* ì¢Œìš° íŒ¨ë”© ë„‰ë„‰í•˜ê²Œ ìˆ˜ì • */
            margin-bottom: 20px;
            width: 100%;
            min-height: 200px; /* ìµœì†Œ ë†’ì´ ì œí•œ */
            max-height: 250px; /* ìµœëŒ€ ë†’ì´ ì œí•œ */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
  
        /* ğŸ¯ ì•„ì´ì½˜ ì› - íˆ¬ëª… ìœ ë¦¬ ëŠë‚Œ */
        .icon-circle {
            width: 70px;
            height: 70px;
            margin: 0 auto 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg,   
                rgba(135, 206, 235, 0.8) 0%,   
                rgba(74, 144, 226, 1) 100%);
            box-shadow:   
                0 10px 30px rgba(74, 144, 226, 0.3),
                0 4px 15px rgba(255, 255, 255, 0.6) inset,
                0 2px 8px rgba(107, 182, 255, 0.4) inset;
            transition: all 0.4s;
            border: 1px solid rgba(255, 255, 255, 0.6);
        }
  
        .icon-circle:hover {
            transform: translateY(-6px) scale(1.08);
            box-shadow:   
                0 15px 40px rgba(74, 144, 226, 0.4),
                0 6px 20px rgba(255, 255, 255, 0.8) inset;
        }
  
        .icon-circle svg {
            width: 32px;
            height: 32px;
            fill: white;
            filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.2));
        }
  
        /* âœ¨ ì•¡ì…˜ ë²„íŠ¼ */
        .action-button {
            display: inline-block;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
            color: white;
            border: none;
            border-radius: 28px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s;
            text-decoration: none;
            text-align: center;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
            box-shadow:   
                0 6px 20px rgba(74, 144, 226, 0.3),
                0 2px 10px rgba(255, 255, 255, 0.6) inset;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
  
        .action-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow:   
                0 10px 30px rgba(74, 144, 226, 0.4),
                0 4px 15px rgba(255, 255, 255, 0.8) inset;
        }
  
        .action-button:disabled {
            background: #ccc;
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
  
        /* ğŸŒŸ ì•¡ì…˜ ê·¸ë£¹ */
        .action-group {
            display: flex;
            justify-content: space-around;
            margin: 25px 0;
            gap: 15px;
        }
  
        .action-item {
            text-decoration: none;
            color: var(--color-text);
            font-size: 13px;
            text-align: center;
            flex: 1;
        }
  
        .action-item:hover {
            transform: translateY(-3px);
        }
  
        /* ğŸ“ ê²Œì‹œë¬¼ */
        .post-item {
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.95) 0%,   
                rgba(240, 249, 255, 0.9) 100%);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 16px;
            box-shadow:   
                0 8px 25px rgba(74, 144, 226, 0.1),
                0 2px 10px rgba(255, 255, 255, 0.8) inset;
            transition: all 0.4s;
            cursor: pointer;
            border: 1px solid var(--color-glass-border);
        }
  
        .post-item:hover {
            transform: translateY(-3px);
            box-shadow:   
                0 12px 35px rgba(74, 144, 226, 0.2),
                0 4px 15px rgba(255, 255, 255, 0.9) inset;
        }
  
        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
  
        .post-avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);
        }
  
        .post-info h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text);
        }
  
        .post-info p {
            font-size: 12px;
            color: var(--color-text-light);
        }
  
        .post-content {
            margin-bottom: 15px;
            line-height: 1.6;
            color: var(--color-text);
        }
  
        .post-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.2);
        }
  
        .post-actions {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 12px;
            background: linear-gradient(135deg,   
                rgba(240, 249, 255, 0.8) 0%,   
                rgba(224, 242, 254, 0.7) 100%);
            border-radius: 16px;
        }
  
        .action-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 14px;
            border: none;
            background: transparent;
            color: var(--color-text-light);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
            font-weight: 500;
        }
  
        .action-btn:hover {
            background: var(--color-primary-lighter);
            color: var(--color-primary);
            transform: translateY(-2px);
        }
  
        .action-btn.active {
            color: var(--color-primary);
            background: var(--color-primary-lighter);
        }
  
        /* ğŸ“‹ ë§ˆì´í˜ì´ì§€ */
        .mypage-menu {
            list-style: none;
            padding: 0;
        }
  
        .mypage-menu li {
            margin-bottom: 14px;
        }
  
        .mypage-button {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 16px;
            border: none;
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.95) 0%,   
                rgba(240, 249, 255, 0.9) 100%);
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 15px;
            color: var(--color-text);
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.08);
            border: 1px solid var(--color-glass-border);
        }
  
        .mypage-button:hover {
            background: var(--color-secondary);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.15);
        }
  
        .mypage-button::after {
            content: 'â€º';
            font-size: 18px;
            color: var(--color-primary);
            font-weight: 700;
        }
  
        /* ğŸ’ ì˜ˆìœ ìŠ¤íƒ¬í”„ ë¦¬ë‰´ì–¼ (30ê°œì— ë§ê²Œ ìˆ˜ì •) */
        .stamp-grid {
            /* 50ê°œ -> 30ê°œë¡œ ë³€ê²½ (5ì—´ ë°°ì¹˜) */
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5ì—´ë¡œ ì¡°ì • */
            gap: 12px; /* ê°„ê²© ëŠ˜ë¦¼ */
            margin-top: 20px;
            justify-items: center;
        }
  
        .stamp-icon {
            /* í¬ê¸° ì¡°ì • */
            width: 35px; /* í¬ê¸° í‚¤ì›€ */
            height: 35px; /* í¬ê¸° í‚¤ì›€ */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s;
            position: relative;
        }
        
        /* ìŠ¤íƒ¬í”„ ë²ˆí˜¸ ìŠ¤íƒ€ì¼ */
        .stamp-number {
            position: absolute;
            font-size: 12px; /* ê¸€ì”¨ í¬ê¸° ì¡°ì • */
            font-weight: 700;
            color: var(--color-text); /* ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            text-align: center;
            line-height: 1;
            z-index: 10;
        }
        
        .stamped .stamp-number {
            color: white; /* ì°íŒ ìŠ¤íƒ¬í”„ëŠ” í°ìƒ‰ */
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
        }
  
        .unstamped {
            background: rgba(241, 245, 249, 0.6);
            border: 1px solid rgba(224, 242, 254, 0.8);
            box-shadow: inset 0 1px 3px rgba(74, 144, 226, 0.1);
        }
  
        .stamped {
            background: radial-gradient(circle,   
                rgba(59, 130, 246, 0.8) 0%,   
                rgba(96, 165, 250, 0.6) 70%,   
                rgba(147, 197, 253, 0.4) 100%);
            border: 2px solid rgba(219, 234, 254, 0.9);
            box-shadow:   
                0 4px 12px rgba(59, 130, 246, 0.3),
                inset 0 1px 3px rgba(255, 255, 255, 0.6);
            animation: stampGlow 2s ease-in-out infinite alternate;
        }
  
        @keyframes stampGlow {
            from {
                box-shadow:   
                    0 4px 12px rgba(59, 130, 246, 0.3),
                    inset 0 1px 3px rgba(255, 255, 255, 0.6);
            }
            to {
                box-shadow:   
                    0 6px 18px rgba(59, 130, 246, 0.5),
                    inset 0 2px 5px rgba(255, 255, 255, 0.8);
            }
        }
  
        /* ğŸ§­ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 100vw;
            height: 80px;
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.98) 0%,   
                rgba(240, 249, 255, 0.95) 100%);
            backdrop-filter: blur(15px);
            border-top: 1px solid var(--color-glass-border);
            display: none;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
            box-shadow:   
                0 -8px 30px rgba(74, 144, 226, 0.15),
                0 -2px 10px rgba(255, 255, 255, 0.8);
        }
  
        .bottom-nav.show {
            display: flex;
        }
  
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--color-text-light);
            font-size: 11px;
            padding: 6px;
            transition: all 0.3s;
            flex: 1;
            position: relative;
        }
  
        .nav-item.active {
            color: var(--color-primary);
        }
  
        .nav-icon {
            width: 30px;
            height: 30px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
  
        .nav-icon svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
            transition: all 0.3s;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
        }
  
        .nav-item.active .nav-icon {
            background: linear-gradient(135deg,   
                rgba(135, 206, 235, 0.3) 0%,   
                rgba(74, 144, 226, 0.2) 100%);
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.2);
        }
  
        .central-button {
            background: linear-gradient(135deg,   
                var(--color-primary) 0%,   
                var(--color-accent) 100%) !important;
            color: white !important;
            border-radius: 20px;
            padding: 8px 6px;
            margin: -10px 3px;
            box-shadow:   
                0 8px 25px rgba(74, 144, 226, 0.4),
                0 2px 10px rgba(255, 255, 255, 0.6) inset !important;
            animation: centralPulse 3s ease-in-out infinite;
        }
  
        @keyframes centralPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
  
        .central-button .nav-icon svg {
            fill: white !important;
        }
  
        /* ğŸ”„ í•„í„° */
        .filter-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
  
        .filter-buttons button {
            flex: 1;
            padding: 14px;
            border: 2px solid var(--color-primary);
            background: transparent;
            color: var(--color-primary);
            font-weight: 600;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
        }
  
        .filter-buttons button:hover {
            background: var(--color-primary-lighter);
            transform: translateY(-2px);
        }
  
        .filter-buttons button.active {
            background: linear-gradient(135deg,   
                var(--color-primary) 0%,   
                var(--color-accent) 100%);
            color: white;
            border: none;
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.3);
        }
  
        /* ğŸ­ ëª¨ë‹¬ */
        .other-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
        }
  
        .other-modal.hide {
            display: none;
        }
  
        .modal-content {
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.98) 0%,   
                rgba(240, 249, 255, 0.95) 100%);
            border-radius: 24px;
            padding: 30px;
            width: 90%;
            max-width: 420px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow:   
                0 20px 50px rgba(74, 144, 226, 0.25),
                0 8px 25px rgba(255, 255, 255, 0.9) inset,
                0 2px 10px rgba(135, 206, 235, 0.3) inset;
            border: 1px solid var(--color-glass-border);
        }
  
        .modal-content h3 {
            color: var(--color-primary);
            margin-bottom: 25px;
            text-align: center;
            font-size: 24px;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
        }
  
        .textarea-input {
            width: 100%;
            min-height: 150px;
            padding: 14px;
            border: 2px solid var(--color-primary-lighter);
            border-radius: 20px;
            resize: none;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.8);
        }
  
        .textarea-input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
  
        .image-area {
            border: 2px dashed var(--color-primary-lighter);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
            background: linear-gradient(135deg,   
                rgba(255, 255, 255, 0.8) 0%,   
                rgba(240, 249, 255, 0.7) 100%);
        }
  
        .image-area:hover {
            border-color: var(--color-primary);
            background: var(--color-primary-lighter);
            transform: translateY(-2px);
        }
  
        /* ğŸ’¡ ë©”ì‹œì§€ */
        .toast-message {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg,   
                var(--color-primary) 0%,   
                var(--color-accent) 100%);
            color: white;
            padding: 18px 35px;
            border-radius: 25px;
            z-index: 2000;
            box-shadow:   
                0 10px 30px rgba(74, 144, 226, 0.3),
                0 4px 15px rgba(255, 255, 255, 0.6) inset;
            font-size: 14px;
            font-weight: 500;
            font-family: 'Nanum Round Gothic', 'Noto Sans KR', sans-serif;
            animation: fadeInOut 3s ease-out forwards;
            border: 1px solid rgba(255, 255, 255, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
        }
  
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
  
        /* ğŸ‘‘ ì—ë””í„° ëŒ€ì‹œë³´ë“œ */
        .admin-header {
            background: linear-gradient(135deg,   
                var(--color-primary-light) 0%,   
                var(--color-secondary) 100%);
            border-radius: 24px;
            padding: 35px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow:   
                0 8px 25px rgba(74, 144, 226, 0.15),
                0 4px 15px rgba(255, 255, 255, 0.8) inset;
        }
  
        .admin-header h2 {
            color: var(--color-black);
            font-size: 26px;
            margin-bottom: 12px;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.8);
        }
  
        /* ğŸ  ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
  
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(25px); }
            to { opacity: 1; transform: translateY(0); }
        }
  
        /* ğŸ‘» ìˆ¨ê¹€ */
        .hide {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="loginModal" class="auth-modal">
        <div class="auth-content">
            <h2>ë¡œê·¸ì¸</h2>
            <input type="email" id="loginEmail" class="auth-input" placeholder="ì´ë©”ì¼">
            <input type="password" id="loginPassword" class="auth-input" placeholder="ë¹„ë°€ë²ˆí˜¸">
            <div class="checkbox-container">
                <input type="checkbox" id="rememberMe">
                <label for="rememberMe">ë¡œê·¸ì¸ ì •ë³´ ê¸°ì–µí•˜ê¸°</label>
            </div>
            <button onclick="handleLogin()" class="auth-button">ë¡œê·¸ì¸</button>
            <div class="auth-link">
                <p style="color: var(--color-text-light); font-size: 12px; margin-bottom: 8px;">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?</p>
                <button onclick="showSignup()">íšŒì›ê°€ì…</button>
            </div>
        </div>
    </div>
  
    <div id="signupModal" class="other-modal hide">
        <div class="modal-content">
            <h3>íšŒì›ê°€ì…</h3>
            <input type="email" id="signupEmail" class="auth-input" placeholder="ì´ë©”ì¼">
            <input type="password" id="signupPassword" class="auth-input" placeholder="ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ)">
            <input type="password" id="signupPasswordConfirm" class="auth-input" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
            <button onclick="handleSignup()" class="auth-button">ê°€ì…í•˜ê¸°</button>
            <button onclick="showLogin()" class="auth-button" style="background: transparent; border: 2px solid var(--color-primary); color: var(--color-primary); margin-top: 15px;">ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
    </div>
  
    <div id="passwordModal" class="other-modal hide">
        <div class="modal-content">
            <h3>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
            <input type="password" id="currentPassword" class="auth-input" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸">
            <input type="password" id="newPassword" class="auth-input" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ)">
            <input type="password" id="newPasswordConfirm" class="auth-input" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
            <button onclick="handleChangePassword()" class="auth-button">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
            <button onclick="closePasswordModal()" class="auth-button" style="background: transparent; border: 2px solid var(--color-primary); color: var(--color-primary); margin-top: 15px;">ì·¨ì†Œ</button>
        </div>
    </div>
  
    <div id="writeModal" class="other-modal hide">
        <div class="modal-content">
            <h3>ì—ë””í„°í†¡ ê¸€ì“°ê¸°</h3>
            <textarea id="writeText" class="textarea-input" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            <div class="image-area" onclick="document.getElementById('imageFile').click()">
                <div style="font-size: 36px; margin-bottom: 12px;">ğŸ“·</div>
                <p>ì‚¬ì§„ ì¶”ê°€í•˜ê¸°</p>
                <input type="file" id="imageFile" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
            </div>
            <button onclick="submitPost()" class="auth-button">ê²Œì‹œí•˜ê¸°</button>
            <button onclick="closeWriteModal()" class="auth-button" style="background: transparent; border: 2px solid var(--color-primary); color: var(--color-primary); margin-top: 15px;">ì·¨ì†Œ</button>
        </div>
    </div>

    <div id="moodModal" class="other-modal hide">
        <div class="modal-content">
            <h3>ì˜¤ëŠ˜ì˜ ë¬´ë“œ ê¸°ë¡</h3>
            <div style="text-align: center; margin-bottom: 20px; font-size: 14px; color: var(--color-text-light);">
                ${new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: '2-digit', day: '2-digit' }).replace(/\./g, '-').trim()}
            </div>
            <textarea id="moodText" class="textarea-input" placeholder="ì˜¤ëŠ˜ì˜ ê°ì •ê³¼ ì´ìœ ë¥¼ ê¸°ë¡í•´ë³´ì„¸ìš”." style="min-height: 100px;"></textarea>
            <div style="text-align: center; margin-bottom: 20px;">
                <label for="moodEmoji" style="display: block; margin-bottom: 10px; font-weight: 600;">ì˜¤ëŠ˜ì˜ ê¸°ë¶„ ì´ëª¨ì§€ ì„ íƒ:</label>
                <select id="moodEmoji" class="auth-input" style="width: auto; display: inline-block; padding: 10px 15px;">
                    <option value="ğŸ˜Š">ğŸ˜Š (í–‰ë³µ)</option>
                    <option value="ğŸ˜©">ğŸ˜© (ì§€ì¹¨)</option>
                    <option value="ğŸ˜­">ğŸ˜­ (ìŠ¬í””)</option>
                    <option value="ğŸ˜¡">ğŸ˜¡ (í™”ë‚¨)</option>
                    <option value="ğŸ˜Œ">ğŸ˜Œ (í‰ì˜¨)</option>
                    <option value="ğŸ¤”">ğŸ¤” (ê³ ë¯¼)</option>
                </select>
            </div>
            <button onclick="submitMood()" class="auth-button">ê¸°ë¡ ì™„ë£Œ (ìŠ¤íƒ¬í”„ ì ë¦½)</button>
            <button onclick="closeMoodModal()" class="auth-button" style="background: transparent; border: 2px solid var(--color-primary); color: var(--color-primary); margin-top: 15px;">ì·¨ì†Œ</button>
        </div>
    </div>
  
    <div id="appContainer" class="main-container">
        </div>
  
    <nav id="bottomNav" class="bottom-nav">
        <a href="#" class="nav-item active" data-tab="home">
            <div class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
            </div>
            <span>í™ˆ</span>
        </a>
        <a href="#" class="nav-item" data-tab="letter">
            <div class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
            </div>
            <span>ë ˆí„°</span>
        </a>
        <a href="#" class="nav-item central-button" data-tab="mood">
            <div class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
            </div>
            <span>ë¬´ë“œ</span>
        </a>
        <a href="#" class="nav-item" data-tab="editor-talk">
            <div class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/>
                </svg>
            </div>
            <span>ì—ë””í„°í†¡</span>
        </a>
        <a href="#" class="nav-item" data-tab="mypage">
            <div class="nav-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
            </div>
            <span>ë§ˆì´</span>
        </a>
    </nav>
  
    <script>
        // ì‚¬ìš©ì ë°ì´í„°
        const users = [
            { id: 'happxi@jahyu.com', name: 'í–…ì”¨', password: 'admin123', role: 'super_admin', avatar: 'í–…' },
            { id: 'elly@jahyu.com', name: 'ì—˜ë¦¬', password: 'admin123', role: 'admin', avatar: 'ì—˜' },
            { id: 'gokal@jahyu.com', name: 'ê³ ì¹¼', password: 'admin123', role: 'admin', avatar: 'ê³ ' },
            { id: 'yudan@jahyu.com', name: 'ìœ ë‹¨', password: 'admin123', role: 'admin', avatar: 'ìœ ' },
            { id: 'sunny@jahyu.com', name: 'ì¨ë‹ˆ', password: 'admin123', role: 'admin', avatar: 'ì¨' },
            { id: 'hyeran@example.com', name: 'í˜œë€', password: 'user123', role: 'user', avatar: 'í˜œ' }
        ];
  
        // ì „ì—­ ë³€ìˆ˜
        let currentUser = null;
        let currentTab = 'home';
        let userStamps = 45; // ì‚¬ìš©ìì˜ ìŠ¤íƒ¬í”„ ìˆ˜ (ì´ˆê¸°ê°’) 
        let selectedImage = null;
        let letterFilter = 'ìíœ´ë ˆí„°';
        let isLoggedIn = false;
        
        const MAX_STAMPS = 30; // ìŠ¤íƒ¬í”„ ìµœëŒ€ ê°œìˆ˜ (ìš”ì²­ ë°˜ì˜)
  
        // ê²Œì‹œë¬¼ ë°ì´í„°
        const posts = [
            {
                id: 1,
                author: 'ì—˜ë¦¬',
                content: 'ìƒˆí•´ ëª©í‘œë¥¼ ì„¸ì›Œë´¤ì–´ìš”. ì¼ì£¼ì¼ì— 3ë²ˆ ìš”ê°€í•˜ê¸°!',
                date: '2025.12.10',
                likes: 12,
                comments: 3,
                likedBy: [],
                bookmarkedBy: [],
                commentsData: [
                    { id: 101, author: 'í˜œë€', content: 'ë©‹ì§„ ëª©í‘œë„¤ìš”! ì‘ì›í•©ë‹ˆë‹¤!', date: '2025.12.10' },
                    { id: 102, author: 'í–…ì”¨', content: 'ì—˜ë¦¬ë‹˜ í™”ì´íŒ…!ğŸ’ª', date: '2025.12.10' }
                ]
            },
            {
                id: 2,
                author: 'ê³ ì¹¼',
                content: 'ê²¨ìš¸ í•œì •íŒ íŠ¸ë Œë”” ì¹´í˜ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ì •ë¦¬ ì¤‘!',
                date: '2025.12.09',
                likes: 8,
                comments: 1,
                likedBy: [],
                bookmarkedBy: [],
                commentsData: [
                    { id: 201, author: 'ìœ ë‹¨', content: 'ê¸°ëŒ€ë©ë‹ˆë‹¤! ì–¼ë¥¸ ë°œí–‰í•´ì£¼ì„¸ìš”!', date: '2025.12.09' }
                ]
            },
            {
                id: 3,
                author: 'ì¨ë‹ˆ',
                content: 'ì˜¤ëŠ˜ì€ ì°½ë¬¸ì„ ì—´ê³  í–‡ì‚´ì„ ë°›ìœ¼ë©° ì°¨ í•œì”~',
                date: '2025.12.08',
                likes: 15,
                comments: 5,
                likedBy: [],
                bookmarkedBy: [],
                commentsData: []
            }
        ];
  
        // ë¬´ë“œ ë°ì´í„° (ì‚¬ìš©ì ë¬´ë“œ)
        const moods = [
            { id: 1, user: 'í˜œë€', content: 'ì˜¤ëŠ˜ í•˜ë£¨ ë„ˆë¬´ ì§€ì³¤ì–´ìš”... ğŸ˜­', mood: 'ğŸ˜©', date: '2025.12.10', time: '14:30' },
            { id: 2, user: 'í˜œë€', content: 'í–‡ì‚´ì´ ë„ˆë¬´ ì¢‹ì•˜ë˜ í•˜ë£¨ ğŸ˜Š', mood: 'ğŸ˜Š', date: '2025.12.09', time: '11:00' },
            { id: 3, user: 'ì—˜ë¦¬', content: 'ì£¼ë§ì— í‘¹ ì‰¬ì–´ì•¼ê² ì–´ìš”', mood: 'ğŸ˜Œ', date: '2025.12.10', time: '17:00' }
        ];
  
        // ë‚ ì§œ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
        function getTodayDateString() {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            return `${year}.${month}.${day}`;
        }
  
        function getTimeString() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            return `${hours}:${minutes}`;
        }
  
        // í˜ì´ì§€ ì´ˆê¸°í™” - ìë™ ë¡œê·¸ì¸ ì²´í¬
        document.addEventListener('DOMContentLoaded', function() {
            checkAutoLogin();
            // í™ˆ í™”ë©´ 'ë ˆí„° ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°' ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ìš”ì²­ ë°˜ì˜)
            document.getElementById('appContainer').addEventListener('click', function(e) {
                const target = e.target.closest('.action-button[data-tab="letter"]');
                if (target) {
                    e.preventDefault();
                    if (isLoggedIn) {
                        renderTab('letter');
                    } else {
                        showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                        showLoginModal();
                    }
                }
            });
        });
  
        // ìë™ ë¡œê·¸ì¸ ì²´í¬
        function checkAutoLogin() {
            const savedEmail = localStorage.getItem('rememberedEmail');
            const autoLogin = localStorage.getItem('autoLogin') === 'true';
              
            if (savedEmail && autoLogin) {
                const user = users.find(u => u.id === savedEmail);
                if (user) {
                    currentUser = user;
                    isLoggedIn = true;
                    hideLoginModal();
                    showMainApp();
                    renderTab('home');
                    showToast('ìë™ ë¡œê·¸ì¸ ë˜ì—ˆìŠµë‹ˆë‹¤! ì•ˆë…•í•˜ì„¸ìš” ' + user.name + 'ë‹˜!');
                    document.getElementById('rememberMe').checked = true;
                    return;
                }
            }
              
            showLoginModal();
        }
  
        // ë¡œê·¸ì¸ ì²˜ë¦¬ (ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€)
        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            const rememberMe = document.getElementById('rememberMe').checked;
              
            if (!email || !password) {
                showToast('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
              
            const user = users.find(u => u.id === email && u.password === password);
            if (user) {
                currentUser = user;
                isLoggedIn = true;
                  
                // ìë™ ë¡œê·¸ì¸ ì •ë³´ ì €ì¥
                if (rememberMe) {
                    localStorage.setItem('rememberedEmail', email);
                    localStorage.setItem('autoLogin', 'true');
                } else {
                    localStorage.removeItem('rememberedEmail');
                    localStorage.removeItem('autoLogin');
                }
                  
                hideLoginModal();
                showMainApp();
                renderTab('home');
                showToast('ë¡œê·¸ì¸ ì„±ê³µ! ì•ˆë…•í•˜ì„¸ìš” ' + user.name + 'ë‹˜!');
            } else {
                showToast('ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }
  
        // íšŒì›ê°€ì… ì²˜ë¦¬
        function handleSignup() {
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value.trim();
            const confirm = document.getElementById('signupPasswordConfirm').value.trim();
              
            if (!email || !password || !confirm) {
                showToast('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
              
            if (password !== confirm) {
                showToast('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
              
            if (password.length < 8) {
                showToast('ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }
              
            if (users.find(u => u.id === email)) {
                showToast('ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.');
                return;
            }
              
            const newUser = {
                id: email,
                name: email.split('@')[0],
                password: password,
                role: 'user',
                avatar: email[0].toUpperCase()
            };
              
            users.push(newUser);
            showToast('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
            showLogin();
        }
  
        // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì²˜ë¦¬
        function handleChangePassword() {
            const current = document.getElementById('currentPassword').value.trim();
            const newPass = document.getElementById('newPassword').value.trim();
            const confirm = document.getElementById('newPasswordConfirm').value.trim();
              
            if (!current || !newPass || !confirm) {
                showToast('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
              
            if (current !== currentUser.password) {
                showToast('í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
              
            if (newPass !== confirm) {
                showToast('ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
              
            if (newPass.length < 8) {
                showToast('ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }
              
            if (newPass === current) {
                showToast('ì´ì „ ë¹„ë°€ë²ˆí˜¸ì™€ ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
              
            // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            users[userIndex].password = newPass;
            currentUser.password = newPass;
              
            closePasswordModal();
            showToast('ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
  
        // ëª¨ë‹¬ ì œì–´ í•¨ìˆ˜
        function showLoginModal() {
            const savedEmail = localStorage.getItem('rememberedEmail');
            if (savedEmail) {
                document.getElementById('loginEmail').value = savedEmail;
                document.getElementById('rememberMe').checked = true;
            }
            document.getElementById('loginModal').classList.remove('hide');
        }
  
        function hideLoginModal() {
            document.getElementById('loginModal').classList.add('hide');
        }
  
        function showMainApp() {
            document.getElementById('appContainer').classList.add('show');
            document.getElementById('bottomNav').classList.add('show');
        }
  
        function showSignup() {
            document.getElementById('signupModal').classList.remove('hide');
        }
  
        function showLogin() {
            document.getElementById('signupModal').classList.add('hide');
            document.getElementById('loginModal').classList.remove('hide');
        }
  
        function openPasswordModal() {
            document.getElementById('passwordModal').classList.remove('hide');
        }
  
        function closePasswordModal() {
            document.getElementById('passwordModal').classList.add('hide');
            // ì…ë ¥ê°’ ì´ˆê¸°í™”
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('newPasswordConfirm').value = '';
        }
  
        function openWriteModal() {
            if (!currentUser || currentUser.role === 'user') {
                showToast('ê¸€ì“°ê¸° ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            document.getElementById('writeModal').classList.remove('hide');
        }
  
        function closeWriteModal() {
            document.getElementById('writeModal').classList.add('hide');
            selectedImage = null;
            document.getElementById('writeText').value = '';
        }

        function openWriteMoodModal() {
            if (!currentUser) {
                showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
  
            // ì˜¤ëŠ˜ ì´ë¯¸ ì‘ì„±í–ˆëŠ”ì§€ í™•ì¸
            const today = getTodayDateString();
            const hasMoodToday = moods.some(m => m.user === currentUser.name && m.date === today);
  
            // ì—ë””í„°ë„ ìŠ¤íƒ¬í”„ ì ë¦½ì„ í•˜ë¯€ë¡œ, ëª¨ë‘ ë‹¹ì¼ 1íšŒ ì œí•œ
            if (hasMoodToday) {
                showToast('ì˜¤ëŠ˜ì€ ì´ë¯¸ ë¬´ë“œë¥¼ ê¸°ë¡í–ˆì–´ìš”! ë‚´ì¼ ë‹¤ì‹œ ë§Œë‚˜ìš” ğŸ˜Š');
                return;
            }
            
            document.getElementById('moodModal').classList.remove('hide');
        }
  
        function closeMoodModal() {
            document.getElementById('moodModal').classList.add('hide');
            document.getElementById('moodText').value = '';
            document.getElementById('moodEmoji').value = 'ğŸ˜Š';
        }
  
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    selectedImage = e.target.result;
                    const imageArea = event.target.parentElement;
                    imageArea.innerHTML = `
                        <img src="${selectedImage}" style="max-width: 100%; max-height: 200px; border-radius: 12px; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(74, 144, 226, 0.2);">
                        <p>ì‚¬ì§„ ë³€ê²½í•˜ê¸°</p>
                    `;
                };
                reader.readAsDataURL(file);
            }
        }
  
        function submitPost() {
            const content = document.getElementById('writeText').value.trim();
            if (!content) {
                showToast('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
  
            const newPost = {
                id: posts.length + 1,
                author: currentUser.name,
                content: content,
                date: getTodayDateString(),
                likes: 0,
                comments: 0,
                likedBy: [],
                bookmarkedBy: [],
                image: selectedImage,
                commentsData: []
            };
  
            posts.unshift(newPost);
            closeWriteModal();
            renderTab('editor-talk');
            showToast('ê²Œì‹œë¬¼ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
  
        function submitMood() {
            const content = document.getElementById('moodText').value.trim();
            const emoji = document.getElementById('moodEmoji').value;
  
            if (!content) {
                showToast('ê°ì • ê¸°ë¡ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
  
            // ì˜¤ëŠ˜ì˜ ë¬´ë“œ ì‘ì„± ì œí•œ ë‹¤ì‹œ í™•ì¸
            const today = getTodayDateString();
            const hasMoodToday = moods.some(m => m.user === currentUser.name && m.date === today);
  
            if (hasMoodToday) {
                showToast('ì˜¤ëŠ˜ì€ ì´ë¯¸ ë¬´ë“œë¥¼ ê¸°ë¡í–ˆì–´ìš”! ë‚´ì¼ ë‹¤ì‹œ ë§Œë‚˜ìš” ğŸ˜Š');
                return;
            }
  
            const newMood = {
                id: moods.length + 1,
                user: currentUser.name,
                content: content,
                mood: emoji,
                date: today,
                time: getTimeString()
            };
  
            moods.unshift(newMood);
            closeMoodModal();
  
            // ìŠ¤íƒ¬í”„ ì ë¦½ (ì—ë””í„°ë„ ì ë¦½ë˜ë„ë¡ ìˆ˜ì •)
            if (userStamps < MAX_STAMPS) {
                userStamps++;
                showStampToast('ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } else {
                showToast('ë¬´ë“œê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
            
            renderTab('mood');
            updateUserStats();
        }
  
        function submitComment(postId) {
            const commentInput = document.getElementById(`commentInput-${postId}`);
            const content = commentInput.value.trim();
  
            if (!content) {
                showToast('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
  
            const post = posts.find(p => p.id === postId);
            if (!post) return;
  
            const newComment = {
                id: Date.now(),
                author: currentUser.name,
                content: content,
                date: getTodayDateString()
            };
  
            post.commentsData.unshift(newComment);
            post.comments = post.commentsData.length;
            
            // ì…ë ¥ê°’ ì´ˆê¸°í™”
            commentInput.value = '';
  
            // ìŠ¤íƒ¬í”„ ì ë¦½ (ì—ë””í„°ë„ ì ë¦½ë˜ë„ë¡ ìˆ˜ì •)
            if (userStamps < MAX_STAMPS) {
                userStamps++;
                showStampToast('ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤!');
            } else {
                showToast('ëŒ“ê¸€ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
  
            // ìƒì„¸ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
            renderTab('detail', postId);
            updateUserStats();
        }
  
        function handleLogout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ìë™ ë¡œê·¸ì¸ ì •ë³´ë„ ì‚­ì œ
                localStorage.removeItem('rememberedEmail');
                localStorage.removeItem('autoLogin');
                  
                currentUser = null;
                isLoggedIn = false;
                document.getElementById('appContainer').classList.remove('show');
                document.getElementById('bottomNav').classList.remove('show');
                  
                // ë¡œê·¸ì¸ ì…ë ¥ê°’ ì´ˆê¸°í™”
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                document.getElementById('rememberMe').checked = false;
                  
                showLoginModal();
            }
        }
  
        function showToast(message) {
            const existingToast = document.querySelector('.toast-message');
            if (existingToast) {
                existingToast.remove();
            }
  
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            document.body.appendChild(toast);
              
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
  
        function showStampToast(message) {
            const existingToast = document.querySelector('.toast-message');
            if (existingToast) {
                existingToast.remove();
            }
  
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.innerHTML = `<span style="font-size: 24px;">ğŸ’</span> ${message}`;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
  
        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (ìƒì„¸í˜ì´ì§€ ì ìš©)
        document.addEventListener('click', function handleButtonClicks(event) {
            const target = event.target.closest('.action-btn');
            if (!target) return;
  
            event.stopPropagation();
              
            // í•˜íŠ¸ ë²„íŠ¼ì¼ ê²½ìš°
            if (target.innerHTML.includes('â¤ï¸')) {
                const postContainer = target.closest('.post-item, .glass-card');
                const postId = parseInt(postContainer.getAttribute('data-post-id'));
                if (postId) {
                    const post = posts.find(p => p.id === postId);
                    if (post) {
                        // í˜„ì¬ ì¢‹ì•„ìš” ìƒíƒœ
                        const isLiked = post.likedBy.includes(currentUser.id);
                          
                        if (isLiked) {
                            post.likes--;
                            post.likedBy = post.likedBy.filter(id => id !== currentUser.id);
                        } else {
                            post.likes++;
                            post.likedBy.push(currentUser.id);
                        }
                          
                        // ì¦‰ì‹œ í™”ë©´ ì—…ë°ì´íŠ¸
                        target.innerHTML = `â¤ï¸ ${post.likes}`;
                        target.classList.toggle('active', !isLiked);
                          
                        // ì—…ë°ì´íŠ¸ í•¨ìˆ˜ í˜¸ì¶œ
                        updateUserStats();
                    }
                }
            }
        });
  
        // ê¸°ì¡´ í† ê¸€ í•¨ìˆ˜ë“¤
        function toggleLike(event, postId) {
            event.stopPropagation();
            const post = posts.find(p => p.id === postId);
            if (!post) return;
  
            if (!currentUser) {
                showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
  
            const userIndex = post.likedBy.indexOf(currentUser.id);
            if (userIndex > -1) {
                post.likedBy.splice(userIndex, 1);
                post.likes--;
            } else {
                post.likedBy.push(currentUser.id);
                post.likes++;
            }
  
            renderTab('editor-talk');
            updateUserStats();
        }
  
        function toggleBookmark(event, postId) {
            event.stopPropagation();
            const post = posts.find(p => p.id === postId);
            if (!post) return;
  
            if (!currentUser) {
                showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
  
            const userIndex = post.bookmarkedBy.indexOf(currentUser.id);
            if (userIndex > -1) {
                post.bookmarkedBy.splice(userIndex, 1);
            } else {
                post.bookmarkedBy.push(currentUser.id);
            }
  
            renderTab('editor-talk');
            updateUserStats();
        }
  
        // ì‚¬ìš©ì í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateUserStats() {
            // ë§ˆì´í˜ì´ì§€ ë°ì´í„° ì—°ë™ìš© í•¨ìˆ˜
            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œì´ë‚˜ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•¨
            console.log('ì‚¬ìš©ì ë°ì´í„° ì—…ë°ì´íŠ¸ ì™„ë£Œ');
            // ìŠ¤íƒ¬í”„ ìˆ˜ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ë§ˆì´í˜ì´ì§€ ë‹¤ì‹œ ë Œë”ë§ (í˜„ì¬ íƒ­ì´ ë§ˆì´í˜ì´ì§€ì¼ ê²½ìš°)
            if (currentTab === 'mypage') {
                renderTab('mypage');
            }
        }
  
        function filterLetters(category) {
            letterFilter = category;
            renderTab('letter');
        }
  
        // ë°±ë²„íŠ¼ ê¸°ëŠ¥
        function goBack() {
            if (currentTab === 'home') return;
            renderTab('home');
        }
  
        // í…œí”Œë¦¿ í•¨ìˆ˜ë“¤
        function getHomeTemplate() {
            return `
                <div class="fade-in">
                    <div class="main-header">
                        <h1>í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</h1>
                        <p>ë©”ë§ˆë¥¸ ì¼ìƒì— íœ´ì‹ í•œ ë°©ìš¸!</p>
                    </div>
  
                    <div class="glass-card bubble-animation">
                        <div style="text-align: center; padding: 25px 0;">
                            <h2 style="color: var(--color-primary); font-size: 22px; margin-bottom: 15px; font-weight: 600;">
                                ì˜¤ëŠ˜ì€ ì–´ë–¤ íë§ì´ í•„ìš”í•˜ì„¸ìš”?
                            </h2>
                            <p style="color: var(--color-text-light); margin-bottom: 25px; font-weight: 400;">
                                ìíœ´ë ˆí„°ì™€ ìíœ´ë©ì„ ì£¼ì œë³„ë¡œ í•œ ëˆˆì—!
                            </p>
                            <a href="#" class="action-button" data-tab="letter">ë ˆí„° ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°</a>
                        </div>
                    </div>
  
                    <div class="action-group">
                        <a href="http://pf.kakao.com/_Jfjxgn" class="action-item" target="_blank">
                            <div class="icon-circle bubble-animation">
                                <svg viewBox="0 0 24 24">
                                    <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                                </svg>
                            </div>
                            <p>1:1 ì±„íŒ…</p>
                        </a>
                        <a href="http://pf.kakao.com/_Jfjxgn/111753149" class="action-item" target="_blank">
                            <div class="icon-circle bubble-animation">
                                <svg viewBox="0 0 24 24">
                                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                                </svg>
                            </div>
                            <p>ë¬¸ì¥ ìˆ˜ì§‘</p>
                        </a>
                        <a href="https://index-html-zak5.vercel.app/" class="action-item" target="_blank">
                            <div class="icon-circle bubble-animation">
                                <svg viewBox="0 0 24 24">
                                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                                </svg>
                            </div>
                            <p>íë§í…ŒìŠ¤íŠ¸</p>
                        </a>
                        <a href="https://maily.so/happci/posts/2nzn7qegrp5" class="action-item" target="_blank">
                            <div class="icon-circle bubble-animation">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                </svg>
                            </div>
                            <p>ë ˆí„°ì½ê¸°</p>
                        </a>
                    </div>
                </div>
            `;
        }
  
        function getLetterTemplate() {
            const letterPosts = [
                { title: '[ìíœ´ë ˆí„°] íë§ ì—ì„¸ì´ 12ì›”í˜¸', date: '2025.12.10', category: 'ìíœ´ë ˆí„°' },
                { title: '[ìíœ´ë©] ì£¼ë§ ì‰¼ì˜ ê¸°ìˆ ', date: '2025.12.09', category: 'ìíœ´ë©' },
                { title: '[ìíœ´ë ˆí„°] ì¼ìƒì˜ ì‘ì€ í–‰ë³µ ì°¾ê¸°', date: '2025.12.08', category: 'ìíœ´ë ˆí„°' },
                { title: '[ìíœ´ë©] ê°ì„±ì ì¸ ì¹´í˜ ì¶”ì²œ', date: '2025.12.07', category: 'ìíœ´ë©' }
            ];
  
            const filteredPosts = letterPosts.filter(post => post.category === letterFilter);
  
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="goBack()">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="main-header">
                        <h2>ë ˆí„° ì•„ì¹´ì´ë¸Œ</h2>
                    </div>
  
                    <div class="filter-buttons">
                        <button class="${letterFilter === 'ìíœ´ë ˆí„°' ? 'active' : ''}" onclick="filterLetters('ìíœ´ë ˆí„°')">ìíœ´ë ˆí„°</button>
                        <button class="${letterFilter === 'ìíœ´ë©' ? 'active' : ''}" onclick="filterLetters('ìíœ´ë©')">ìíœ´ë©</button>
                    </div>
  
                    <div>
                        ${filteredPosts.map(post => `
                            <div class="post-item">
                                <div class="post-header">
                                    <div class="post-avatar">ì</div>
                                    <div class="post-info">
                                        <h4>${post.title}</h4>
                                        <p>${post.date}</p>
                                    </div>
                                </div>
                                <div class="post-actions">
                                    <button class="action-btn">â¤ï¸ ì¢‹ì•„ìš”</button>
                                    <button class="action-btn">ğŸ’¬ ëŒ“ê¸€</button>
                                    <button class="action-btn">ğŸ”– ë¶ë§ˆí¬</button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }
  
        function getEditorTalkTemplate() {
            const isAdmin = currentUser && currentUser.role !== 'user';
              
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="goBack()">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="main-header">
                        <h2>ì—ë””í„°í†¡</h2>
                        <p>ì—ë””í„°ì˜ ì¼ìƒì„ ë” ê°€ê¹Œì´ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”!</p>
                    </div>
  
                    ${isAdmin ? `
                        <button onclick="openWriteModal()" class="action-button" style="width: 100%; margin-bottom: 20px;">
                            âœï¸ ê¸€ì“°ê¸°
                        </button>
                    ` : ''}
  
                    <div>
                        ${posts.map(post => {
                            const userColor = getUserColor(post.author);
                            const authorProfile = users.find(u => u.name === post.author);
                            const avatar = authorProfile ? authorProfile.avatar : 'ì';
                            return `
                                <div class="post-item" onclick="showPostDetail(${post.id})">
                                    <div class="post-header">
                                        <div class="post-avatar" style="background: ${userColor}">${avatar}</div>
                                        <div class="post-info">
                                            <h4>${post.author}</h4>
                                            <p>${post.date}</p>
                                        </div>
                                    </div>
                                    <div class="post-content">${post.content}</div>
                                    ${post.image ? `<img src="${post.image}" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€" style="width: 100%; height: 200px; object-fit: cover; border-radius: 12px; margin-bottom: 12px;">` : ''}
                                    <div class="post-actions">
                                        <button class="action-btn ${post.likedBy.includes(currentUser?.id) ? 'active' : ''}" onclick="toggleLike(event, ${post.id})">
                                            â¤ï¸ ${post.likes}
                                        </button>
                                        <button class="action-btn">
                                            ğŸ’¬ ${post.comments}
                                        </button>
                                        <button class="action-btn ${post.bookmarkedBy.includes(currentUser?.id) ? 'active' : ''}" onclick="toggleBookmark(event, ${post.id})">
                                            ğŸ”–
                                        </button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }
  
        function getMoodTemplate() {
            if (currentUser && currentUser.role === 'super_admin') {
                return getAdminMoodTemplate();
            }
  
            const today = getTodayDateString();
            const hasMoodToday = currentUser && moods.some(m => m.user === currentUser.name && m.date === today);
            const buttonText = hasMoodToday ? 'ì˜¤ëŠ˜ì˜ ë¬´ë“œ ê¸°ë¡ ì™„ë£Œ âœ…' : 'ë¬´ë“œ ê¸°ë¡ ì‘ì„±';
            const buttonDisabled = hasMoodToday; // ì—ë””í„°ë„ ìŠ¤íƒ¬í”„ ì ë¦½í•˜ë¯€ë¡œ ë‹¹ì¼ 1íšŒë§Œ í—ˆìš©
  
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="goBack()">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="main-header">
                        <h2>ì˜¤ëŠ˜ì˜ ë¬´ë“œ</h2>
                        <p>ë‹¹ì‹ ì˜ ê°ì •ì„ ê¸°ë¡í•´ë³´ì„¸ìš”</p>
                    </div>
  
                    <div class="glass-card bubble-animation" style="text-align: center; padding: 60px 20px; min-height: 300px;">
                        <p style="font-size: 18px; color: var(--color-text-light); margin-bottom: 30px; font-weight: 400;">
                            ì—¬ê¸°ì— ì›”ê°„/ì£¼ê°„ ë¬´ë“œ íŠ¸ë˜ì»¤ê°€ ì‹œê°í™”ë©ë‹ˆë‹¤
                        </p>
                        <div style="font-size: 64px; margin-bottom: 30px;">ğŸ“Š</div>
                        <button onclick="openWriteMoodModal()" class="action-button" ${buttonDisabled ? 'disabled' : ''}>
                            ${buttonText}
                        </button>
                        ${buttonDisabled ? '<p style="font-size: 12px; color: red; margin-top: 10px;">ì˜¤ëŠ˜ì€ ì´ë¯¸ ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë˜ì—ˆì–´ìš”!</p>' : ''}
                    </div>
                </div>
            `;
        }
  
        function getAdminMoodTemplate() {
            const adminMoods = [...moods].sort((a, b) => new Date(b.date) - new Date(a.date));
  
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="goBack()">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="admin-header">
                        <h2>ğŸ‘‘ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
                        <p>ëª¨ë“  í–…ì‚ë‹˜ë“¤ì˜ ê°ì •ì„ ì‚´í´ë³´ì„¸ìš”</p>
                    </div>
  
                    ${adminMoods.map(mood => {
                        const userColor = getUserColor(mood.user);
                        const avatar = users.find(u => u.name === mood.user)?.avatar || 'ì‚¬';
                        return `
                            <div class="glass-card bubble-animation" style="max-height: none; min-height: 150px;">
                                <div class="post-header">
                                    <div class="post-avatar" style="background: ${userColor}">${avatar}</div>
                                    <div class="post-info">
                                        <h4>${mood.user}</h4>
                                        <p>${mood.date} ${mood.time}</p>
                                    </div>
                                </div>
                                <div style="margin-top: 10px;">
                                    <p style="margin-bottom: 10px; font-size: 16px;"><strong>${mood.mood} ${mood.content}</strong></p>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }
  
        function getMyPageTemplate() {
            const isVIP = userStamps >= MAX_STAMPS;
              
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="goBack()">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="main-header">
                        <h2>${isVIP ? 'â­ VIP í–…ì‚ë‹˜!' : 'My Space'}</h2>
                        <p style="font-weight: 400;">${isVIP ? 'íŠ¹ë³„í•œ í˜œíƒì„ ì¦ê²¨ë³´ì„¸ìš”!' : 'ì˜¤ëŠ˜ë„ ìíœ´ë ˆí„°ì™€ í•¨ê»˜í•´ìš”'}</p>
                    </div>
  
                    <ul class="mypage-menu">
                        <li><button class="mypage-button" onclick="showContentList('mypost')">ë‚´ê°€ ì“´ ê¸€</button></li>
                        <li><button class="mypage-button" onclick="showContentList('mycomment')">ë‚˜ì˜ ëŒ“ê¸€</button></li>
                        <li><button class="mypage-button" onclick="showContentList('mylike')">ì¢‹ì•„ìš”í•œ ê¸€</button></li>
                        <li><button class="mypage-button" onclick="showContentList('mybookmark')">ë¶ë§ˆí¬í•œ ê¸€</button></li>
                        <li><button class="mypage-button" onclick="showContentList('mystamp')">ìíœ´ìŠ¤íƒ¬í”„ í˜„í™© (${userStamps}ê°œ)</button></li>
                        ${currentUser && currentUser.role !== 'user' ? `
                            <li><button class="mypage-button" onclick="showAdminPanel()">ê´€ë¦¬ì íŒ¨ë„</button></li>
                        ` : ''}
                        <li><button class="mypage-button" onclick="openPasswordModal()">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button></li>
                        <li><button class="mypage-button" onclick="handleLogout()">ë¡œê·¸ì•„ì›ƒ</button></li>
                    </ul>
  
                    <div class="glass-card bubble-animation">
                        <h3 style="color: var(--color-primary); margin-bottom: 25px; text-align: center;">ë‚˜ì˜ ìíœ´ ìŠ¤íƒ¬í”„</h3>
                        <div class="stamp-grid">
                            ${Array(MAX_STAMPS).fill(0).map((_, index) => `
                                <div class="stamp-icon ${index < userStamps ? 'stamped' : 'unstamped'}">
                                    <span class="stamp-number">${index + 1}</span>
                                </div>
                            `).join('')}
                        </div>
                        <p style="text-align: center; margin-top: 25px; font-size: 12px; color: var(--color-text)">
                            *ì˜¤ëŠ˜ì˜ ë¬´ë“œ ë˜ëŠ” ì—ë””í„°í†¡ ëŒ“ê¸€ ì‘ì„±ì‹œ ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë©ë‹ˆë‹¤! ${MAX_STAMPS}ê°œ ëª¨ìœ¼ì‹  í™”ë©´ì„ ìº¡ì³í•´ì„œ ìíœ´ë ˆí„° ì¹´ì¹´ì˜¤í†¡ì±„ë„ë¡œ ë³´ë‚´ì£¼ì„¸ìš”! ì–´ëŠë‚  ìŠ¤íì…œë ˆí„°ê°€ ë„ì°©í• ì§€ë„ ëª°ë¡œìš”!â¤ï¸
                        </p>
                    </div>
                </div>
            `;
        }
  
        // --- ìƒì„¸ í˜ì´ì§€ ë° ë³´ì¡° í…œí”Œë¦¿ í•¨ìˆ˜ ---
  
        // í¬ìŠ¤íŠ¸ ìƒì„¸ í˜ì´ì§€ í…œí”Œë¦¿
        function getPostDetailTemplate(post) {
            const userColor = getUserColor(post.author);
            const authorProfile = users.find(u => u.name === post.author);
            const avatar = authorProfile ? authorProfile.avatar : 'ì';
  
            // ëŒ“ê¸€ ëª©ë¡ ë Œë”ë§
            const commentsHtml = post.commentsData.map(comment => {
                const commentUser = users.find(u => u.name === comment.author);
                const commentAvatar = commentUser ? commentUser.avatar : 'ì‚¬';
                const commentUserColor = getUserColor(comment.author);
                return `
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; padding: 10px; border-radius: 12px; background: rgba(240, 249, 255, 0.7);">
                        <div class="post-avatar" style="width: 32px; height: 32px; font-size: 14px; background: ${commentUserColor}">${commentAvatar}</div>
                        <div style="flex-grow: 1;">
                            <p style="font-size: 14px; font-weight: 600; color: var(--color-text);">${comment.author}</p>
                            <p style="font-size: 13px; color: var(--color-text); line-height: 1.4; margin-top: 3px;">${comment.content}</p>
                            <p style="font-size: 11px; color: var(--color-text-light); margin-top: 5px;">${comment.date}</p>
                        </div>
                    </div>
                `;
            }).join('');
  
  
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="renderTab('editor-talk')">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="main-header" style="padding-top: 70px;">
                        <h2>ì—ë””í„°í†¡ ìƒì„¸</h2>
                        <p>${post.author}ë‹˜ì˜ ì¼ìƒ</p>
                    </div>
  
                    <div class="glass-card bubble-animation" data-post-id="${post.id}" style="min-height: auto; max-height: none;">
                        <div class="post-header" style="margin-bottom: 20px;">
                            <div class="post-avatar" style="background: ${userColor}">${avatar}</div>
                            <div class="post-info">
                                <h4>${post.author}</h4>
                                <p>${post.date}</p>
                            </div>
                        </div>
                        
                        ${post.image ? `<img src="${post.image}" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€" class="post-image" style="height: auto; max-height: 400px; margin-bottom: 20px;">` : ''}
  
                        <div class="post-content" style="font-size: 16px; margin-bottom: 25px;">
                            ${post.content.split('\n').map(p => `<p>${p}</p>`).join('')}
                        </div>
  
                        <div class="post-actions" style="margin-top: 10px;">
                            <button class="action-btn ${post.likedBy.includes(currentUser?.id) ? 'active' : ''}" onclick="toggleLike(event, ${post.id})">
                                â¤ï¸ ${post.likes}
                            </button>
                            <button class="action-btn">
                                ğŸ’¬ ${post.comments}
                            </button>
                            <button class="action-btn ${post.bookmarkedBy.includes(currentUser?.id) ? 'active' : ''}" onclick="toggleBookmark(event, ${post.id})">
                                ğŸ”–
                            </button>
                        </div>
                    </div>
  
                    <div class="glass-card bubble-animation" style="min-height: 100px; max-height: none;">
                        <h3 style="color: var(--color-text); font-size: 18px; margin-bottom: 15px;">ëŒ“ê¸€ (${post.comments})</h3>
                        
                        ${commentsHtml}
  
                        <textarea id="commentInput-${post.id}" class="textarea-input" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." style="min-height: 80px; margin-top: 15px;"></textarea>
                        <button onclick="submitComment(${post.id})" class="action-button" style="padding: 10px 20px; font-size: 14px; width: 100%;">ëŒ“ê¸€ ë“±ë¡ (ìŠ¤íƒ¬í”„ ì ë¦½)</button>
                    </div>
                </div>
            `;
        }
  
        // ë§ˆì´í˜ì´ì§€ ì„œë¸Œ ì½˜í…ì¸  ëª©ë¡ í…œí”Œë¦¿
        function getContentListTemplate(type) {
            const titles = {
                'mypost': 'ë‚´ê°€ ì“´ ê¸€',
                'mycomment': 'ë‚˜ì˜ ëŒ“ê¸€',
                'mylike': 'ì¢‹ì•„ìš”í•œ ê¸€',
                'mybookmark': 'ë¶ë§ˆí¬í•œ ê¸€',
                'mystamp': 'ìíœ´ ìŠ¤íƒ¬í”„ ìƒì„¸'
            };
            const title = titles[type] || 'ì½˜í…ì¸  ëª©ë¡';
  
            return `
                <div class="fade-in">
                    <div class="back-button" onclick="renderTab('mypage')">
                        <svg viewBox="0 0 24 24">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
  
                    <div class="main-header" style="padding-top: 70px;">
                        <h2>${title}</h2>
                        <p>${currentUser.name}ë‹˜ì˜ í™œë™ ë‚´ì—­</p>
                    </div>
  
                    <div class="glass-card bubble-animation" style="min-height: 300px; max-height: none;">
                        <p style="color: var(--color-text-light); font-weight: 500; margin-bottom: 15px;">
                            ${type === 'mystamp' ? `í˜„ì¬ ìŠ¤íƒ¬í”„: ${userStamps}ê°œ / ìµœëŒ€ ${MAX_STAMPS}ê°œ` : '[ë°ì´í„° ì—°ë™ ì˜ì—­]'} ${title} ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                        </p>
                        <div style="border-top: 1px solid var(--color-primary-lighter); padding-top: 15px;">
                            <p style="font-size: 14px; margin-bottom: 8px;">- 2025.12.10: í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ ì œëª©</p>
                            <p style="font-size: 14px; margin-bottom: 8px;">- 2025.12.09: ê°ì„±ì ì¸ í•˜ë£¨</p>
                            <p style="font-size: 14px;">- 2025.12.08: ìíœ´ë© ê¸°íš íšŒì˜</p>
                        </div>
                    </div>
                </div>
            `;
        }
  
        // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
  
        // ì‚¬ìš©ì ì´ë¦„ì— ë”°ë¥¸ ìƒ‰ìƒ (ì„ì‹œ)
        function getUserColor(name) {
            switch (name) {
                case 'í–…ì”¨': return '#4A90E2';
                case 'ì—˜ë¦¬': return '#87CEEB';
                case 'ê³ ì¹¼': return '#6BB6FF';
                case 'ìœ ë‹¨': return '#4A7FC7';
                case 'ì¨ë‹ˆ': return '#B6E3F7';
                case 'í˜œë€': return '#E8F4F8';
                default: return '#D3D3D3';
            }
        }
  
        // --- ë©”ì¸ ë Œë”ë§ ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---
  
        const appContainer = document.getElementById('appContainer');
        const bottomNav = document.getElementById('bottomNav');
  
        function renderTab(tabName, postId = null) {
            currentTab = tabName;
            appContainer.innerHTML = '';
            
            // ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            const activeNav = document.querySelector(`.nav-item[data-tab="${tabName}"]`);
            if (activeNav) activeNav.classList.add('active');
  
            if (postId) {
                const post = posts.find(p => p.id === postId);
                if (post) {
                    appContainer.innerHTML = getPostDetailTemplate(post);
                    appContainer.classList.add('show');
                    bottomNav.classList.add('show');
                    return;
                }
            }
  
            switch (tabName) {
                case 'home':
                    appContainer.innerHTML = getHomeTemplate();
                    break;
                case 'letter':
                    appContainer.innerHTML = getLetterTemplate();
                    break;
                case 'editor-talk':
                    appContainer.innerHTML = getEditorTalkTemplate();
                    break;
                case 'mood':
                    appContainer.innerHTML = getMoodTemplate();
                    break;
                case 'mypage':
                    appContainer.innerHTML = getMyPageTemplate();
                    break;
                default:
                    appContainer.innerHTML = `<div class="main-header"><h2>í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</h2></div>`;
            }
  
            appContainer.classList.add('show');
            bottomNav.classList.add('show');
            window.scrollTo(0, 0); // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
        }
  
        function showPostDetail(postId) {
             if (!isLoggedIn) {
                showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }
            // ì—ë””í„°í†¡ ìƒì„¸ í˜ì´ì§€ ë Œë”ë§
            renderTab('detail', postId);
        }
  
        function showContentList(type) {
            // ë§ˆì´í˜ì´ì§€ ì„œë¸Œ ì½˜í…ì¸  ëª©ë¡ ë Œë”ë§
            appContainer.innerHTML = getContentListTemplate(type);
            window.scrollTo(0, 0);
        }
  
        // ë„¤ë¹„ê²Œì´ì…˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        bottomNav.addEventListener('click', function(e) {
            const navItem = e.target.closest('.nav-item');
            if (navItem && navItem.hasAttribute('data-tab')) {
                e.preventDefault();
                const tabName = navItem.getAttribute('data-tab');
                
                // ë¡œê·¸ì¸ í•„ìš” ì‹œ ì²´í¬
                if (!isLoggedIn && tabName !== 'home') {
                    showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    showLoginModal();
                    return;
                }
                
                renderTab(tabName);
            }
        });
        
        // í–…ì”¨ ê´€ë¦¬ì íŒ¨ë„ (ì„ì‹œ)
        function showAdminPanel() {
            if (currentUser && currentUser.role !== 'user') {
                showToast('ê´€ë¦¬ì íŒ¨ë„ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
                // ì‹¤ì œ ê´€ë¦¬ì í˜ì´ì§€ë¡œ ì´ë™ (ì—¬ê¸°ì„œëŠ” ì„ì‹œë¡œ Mood íƒ­ìœ¼ë¡œ ì´ë™)
                renderTab('mood');
            } else {
                showToast('ê´€ë¦¬ì ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
            }
        }
    </script>
</body>
</html>
