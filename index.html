<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìíœ´ë ˆí„° - ì´íƒˆë¦¬ì•„ ëŒ€í•™ìƒ ê°ì„± UI</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        
        /* í°íŠ¸ ì¶”ê°€: ì´íƒˆë¦¬ì•„ ê°ì„±ì— ë§ëŠ” Serif ê³„ì—´ (ì˜ˆì‹œ: Georgia) */
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap');

        :root {
            /* ğŸ’– ì´íƒˆë¦¬ì•„ íŒŒìŠ¤í…” ê°ì„± ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ */
            --color-primary-dark: #6A5ACD; /* Lavander - ë©”ì¸ ê°•ì¡° */
            --color-secondary-pastel: #F08080; /* Coral - í¬ì¸íŠ¸ */
            --color-background-soft: #FCF5E3; /* ë² ì´ì§€-í¬ë¦¼ ë°°ê²½ */
            --color-glass-base: rgba(255, 255, 255, 0.7); /* íˆ¬ëª…ë„ ë†’ì„ */
            --color-glass-shadow: rgba(106, 90, 205, 0.1);
            --color-text-dark: #333333;
            --color-text-light: #FFFFFF;
            --color-border-light: rgba(255, 255, 255, 0.9);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans KR', sans-serif;
        }

        body {
            background-color: var(--color-background-soft);
            color: var(--color-text-dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ğŸ’ ëª½ê¸€ëª½ê¸€ Glassmorphism ì¹´ë“œ */
        .glass-card {
            background: var(--color-glass-base);
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
            border-radius: 25px; /* ë” ëª½ê¸€ëª½ê¸€í•˜ê²Œ */
            border: 1px solid var(--color-border-light);
            box-shadow: 0 8px 25px var(--color-glass-shadow);
            padding: 20px;
            margin-bottom: 20px;
            width: 100%;
        }

        .container {
            width: 100%;
            max-width: 450px;
            padding: 20px 20px 80px 20px;
            flex-grow: 1;
        }

        /* --- í—¤ë“œë¼ì¸ --- */
        .headline-text {
            font-family: 'Playfair Display', serif; /* ê°ì„± í°íŠ¸ ì ìš© */
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            padding-top: 30px;
            color: var(--color-primary-dark);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.05);
        }

        /* --- í™ˆ ì„¹ì…˜ --- */
        .archive-section { text-align: center; padding: 25px 20px; }
        .archive-section h2 { font-size: 1.5em; margin-bottom: 10px; color: var(--color-primary-dark); }
        .archive-section p { font-size: 0.9em; color: #666; margin-bottom: 25px; }
        
        /* ğŸ’– ê°ì„± ë²„íŠ¼ */
        .styled-button {
            display: inline-block; padding: 12px 25px; border: none; 
            border-radius: 25px; font-weight: 700; cursor: pointer; 
            transition: all 0.3s ease; text-decoration: none; text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .styled-button.primary {
            background: var(--color-primary-dark); color: var(--color-text-light);
        }
        .styled-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        /* ğŸŒŸ ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼ ê·¸ë£¹ (ì•„ì´ì½˜ ë””ìì¸ ë³€ê²½ ë° íˆ¬ëª…ë„ ê°•í™”) */
        .action-group { display: flex; justify-content: space-around; margin: 30px 0; text-align: center; }
        .action-item { text-decoration: none; color: var(--color-text-dark); font-size: 0.85em; width: 80px; }
        .glass-icon-wrapper {
            width: 65px; height: 65px; margin: 0 auto 10px auto; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 1.6em;
            
            /* âœ¨ ì´íƒˆë¦¬ì•„ ê°ì„± íˆ¬ëª… ìœ ë¦¬êµ¬ìŠ¬ */
            background: rgba(255, 255, 255, 0.85); 
            backdrop-filter: blur(15px);
            border: 3px solid var(--color-border-light);
            box-shadow: 0 4px 15px rgba(106, 90, 205, 0.2), inset 0 0 15px rgba(255, 255, 255, 0.9);
            color: var(--color-secondary-pastel); /* ì•„ì´ì½˜ ìƒ‰ìƒ í¬ì¸íŠ¸ */
        }
        
        /* --- ë ˆí„° ì•„ì¹´ì´ë¸Œ í•„í„°ë§ ë””ìì¸ --- */
        .filter-buttons {
            display: flex; justify-content: space-around; margin-bottom: 20px;
        }
        .filter-buttons button {
            flex: 1; padding: 10px; margin: 0 5px; border: 2px solid var(--color-primary-dark); 
            background: transparent; color: var(--color-primary-dark); font-weight: 700;
            border-radius: 25px; cursor: pointer; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .filter-buttons button.active {
            background-color: var(--color-primary-dark); color: var(--color-text-light);
            transform: scale(1.05); box-shadow: 0 4px 10px rgba(106, 90, 205, 0.4);
        }

        /* --- ë§ˆì´í˜ì´ì§€ ë²„íŠ¼ & ìŠ¤íƒ¬í”„ ë””ìì¸ (ìŠ¤íƒ¬í”„ ê°ì„± ìœ ì§€) --- */
        .mypage-button-list {
            padding: 0; list-style: none;
        }
        .mypage-button-list li {
            margin-bottom: 10px;
        }
        .mypage-button {
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; padding: 15px; border: none; background: rgba(255, 255, 255, 0.6);
            border-radius: 15px; font-weight: 500; cursor: pointer; transition: background 0.2s;
            text-align: left;
        }
        .mypage-button:hover {
            background: rgba(240, 240, 240, 0.7);
        }
        .mypage-button span:last-child {
            font-size: 1.2em; color: var(--color-primary-dark);
        }

        .stamp-grid {
            display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; margin-top: 15px;
        }
        .stamp-icon {
            width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center;
            justify-content: center; font-size: 1.2em; border: 1px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        .unstamped { background-color: #f0f0f0; color: #aaa; }
        .stamped {
            background: linear-gradient(45deg, #FFDAB9, #FFB6C1); 
            color: var(--color-text-light); box-shadow: 0 2px 5px rgba(255, 182, 193, 0.5);
            font-size: 1.5em; 
        }
        .stamped:after { content: 'âœ“'; }

        /* --- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” (ëª¨ë¨¼íŠ¸ ì‚­ì œ, ë¬´ë“œ ì¤‘ì•™) --- */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; max-width: 450px; display: flex; justify-content: space-around;
            background: var(--color-glass-base); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border-top: 1px solid var(--color-border-light); padding: 10px 0; box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.05); z-index: 100;
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; text-decoration: none; color: #888;
            font-size: 0.7em; padding: 5px; transition: color 0.2s; flex-grow: 1;
        }
        .nav-item.active { color: var(--color-primary-dark); font-weight: 700; }
        .nav-item span:first-child { font-size: 1.5em; margin-bottom: 3px; }

        /* ì¤‘ì•™ 'ë¬´ë“œ' ë²„íŠ¼ */
        .central-button {
            background-color: var(--color-primary-dark); color: var(--color-text-light) !important;
            border-radius: 15px; margin: -10px 5px -10px 5px; padding: 10px 0; font-size: 0.8em;
            font-weight: 700; box-shadow: 0 4px 10px rgba(106, 90, 205, 0.5); transition: all 0.2s;
            flex-grow: 1.5;
        }
        .central-button:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

    <div id="app">
        </div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-tab="home"><span>ğŸ¡</span><span class="label">í™ˆ</span></a>
        <a href="#" class="nav-item" data-tab="letter"><span>ğŸ’Œ</span><span class="label">ë ˆí„°</span></a>
        <a href="#" class="nav-item central-button" data-tab="mood"><span></span><span class="label">ë¬´ë“œ</span></a>
        <a href="#" class="nav-item" data-tab="editor-talk"><span>â˜•</span><span class="label">ì—ë””í„°í†¡</span></a>
        <a href="#" class="nav-item" data-tab="mypage"><span>ğŸ‘¤</span><span class="label">ë§ˆì´</span></a>
    </nav>

    <div class="modal-overlay" id="record-modal" style="display:none;">
        <div class="modal-content" style="background: var(--color-background-soft); border-radius: 20px;">
            <h3 id="modal-title" style="margin-bottom: 20px;">ë¬´ë“œ ê¸°ë¡ ì‘ì„±</h3>
            <input type="text" id="record-title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒ)" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px;">
            
            <div id="mood-icons" style="text-align:center; margin-bottom:15px; font-size:1.8em;">
                <span data-mood="joy" style="cursor:pointer; margin: 0 5px;">ğŸ˜Š</span>
                <span data-mood="happy" style="cursor:pointer; margin: 0 5px;">ğŸ˜</span>
                <span data-mood="love" style="cursor:pointer; margin: 0 5px;">ğŸ¥°</span>
                <span data-mood="sad" style="cursor:pointer; margin: 0 5px;">ğŸ˜¥</span>
                <span data-mood="tired" style="cursor:pointer; margin: 0 5px;">ğŸ˜«</span>
            </div>

            <textarea id="record-content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." style="width: 100%; min-height: 100px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px;"></textarea>
            <button id="save-button" class="styled-button primary" style="width:100%;">ë¬´ë“œ ê¸°ë¡</button>
        </div>
    </div>


    <script>
        // --- ğŸš¨ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ---
        const USER_ROLE = 'user'; 
        const EDITOR_PROFILES = {
            'í–…ì”¨': { color: '#87CEEB', role: 'admin_super' }, 
            'ì—˜ë¦¬': { color: '#9932CC', role: 'admin_general' }, 
            'ê³ ì¹¼': { color: '#FF7F50', role: 'admin_general' }, 
            'ì¨ë‹ˆ': { color: '#FFD700', role: 'admin_general' }, 
            'ìœ ë‹¨': { color: '#3CB371', role: 'admin_general' },
        };
        const editorTalks = [
            { author: 'ì—˜ë¦¬', content: 'ìƒˆí•´ ëª©í‘œë¥¼ ì„¸ì›Œë´¤ì–´ìš”. ì¼ì£¼ì¼ì— 3ë²ˆ ìš”ê°€í•˜ê¸°!', date: '2025.12.10' },
            { author: 'ê³ ì¹¼', content: 'ê²¨ìš¸ í•œì •íŒ íŠ¸ë Œë”” ì¹´í˜ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ì •ë¦¬ ì¤‘!', date: '2025.12.09' },
        ];
        let userStamps = 45; 
        let currentTab = 'home';
        let currentLetterFilter = 'ìíœ´ë ˆí„°'; 

        // --- HTML í…œí”Œë¦¿ í•¨ìˆ˜ ---

        // ğŸ  í™ˆ í…œí”Œë¦¿ (ëª½ê¸€ëª½ê¸€ íˆ¬ëª… ë””ìì¸ ê°•í™”)
        function getHomeTemplate() {
            return `
                <h1 class="headline-text">La Tua Pausa Perfetta</h1>
                <p style="text-align:center; font-size:1.1em; color:#777; margin-top:-15px; margin-bottom:40px;">ììœ ë¡œìš´ ë‹¹ì‹ ì˜ ì™„ë²½í•œ íœ´ì‹</p>

                <div class="container">
                    <section class="archive-section glass-card" style="min-height: 200px; display:flex; flex-direction:column; justify-content:center;">
                        <h2>ì½˜í…ì¸  ì•„ì¹´ì´ë¸Œ</h2>
                        <p>ìíœ´ë ˆí„°ì™€ ìíœ´ë©ì˜ ëª¨ë“  ê¸€ì„ ëª¨ì•„ë³´ì„¸ìš”.</p>
                        <a href="#" class="styled-button primary" data-tab="letter">ë ˆí„° ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°</a>
                    </section>

                    <section class="action-group">
                        <a href="https://pf.kakao.com/_xxxxxx" class="action-item" target="_blank">
                            <div class="glass-icon-wrapper">ğŸ—£ï¸</div> 
                            <p>1:1 ì¹´í†¡</p>
                        </a>
                        <a href="http://pf.kakao.com/_Jfjxgn/111753149" class="action-item" target="_blank">
                            <div class="glass-icon-wrapper">ğŸ–‹ï¸</div> 
                            <p>ë¬¸ì¥ ìˆ˜ì§‘</p>
                        </a>
                        <a href="#" class="action-item" data-tab="mood">
                            <div class="glass-icon-wrapper">âœ¨</div> 
                            <p>ì˜¤ëŠ˜ì˜ ë¬´ë“œ</p>
                        </a>
                    </section>
                </div>
            `;
        }
        
        // âœ‰ï¸ ë ˆí„° ì•„ì¹´ì´ë¸Œ í…œí”Œë¦¿
        function getLetterTemplate() {
            return `
                <div class="container">
                    <header style="text-align:center;"><h2>ë ˆí„° ì•„ì¹´ì´ë¸Œ</h2></header>
                    
                    <input type="text" class="search-bar" placeholder="ì½˜í…ì¸  ì œëª©, ë‚´ìš©ì„ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰" style="margin-bottom: 25px;">

                    <div class="filter-buttons" id="letter-filter">
                        <button class="${currentLetterFilter === 'ìíœ´ë ˆí„°' ? 'active' : ''}" data-filter="ìíœ´ë ˆí„°">ìíœ´ë ˆí„°</button>
                        <button class="${currentLetterFilter === 'ìíœ´ë©' ? 'active' : ''}" data-filter="ìíœ´ë©">ìíœ´ë©</button>
                    </div>

                    <div id="letter-content" class="glass-card">
                        <h3>${currentLetterFilter} ì½˜í…ì¸ </h3>
                        <p style="font-size:0.9em; color:#777;">ë¶ë§ˆí¬, ì¢‹ì•„ìš”, ëŒ“ê¸€ ê¸°ëŠ¥ì´ ì—¬ê¸°ì— ì—°ë™ë©ë‹ˆë‹¤.</p>
                        <div style="border-top: 1px solid #eee; padding-top: 10px; margin-top: 10px;">
                            <p>ìµœì‹ ê¸€: [${currentLetterFilter}] íë§ ì—ì„¸ì´ 12ì›”í˜¸</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // ğŸ‘¥ ì—ë””í„°í†¡ í…œí”Œë¦¿
        function getEditorTalkTemplate() {
            const isEditor = USER_ROLE.includes('admin');
            
            const postList = editorTalks.map(post => {
                const profile = EDITOR_PROFILES[post.author];
                return `
                    <div class="post-item glass-card" style="padding: 15px; margin-bottom: 10px;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 35px; height: 35px; border-radius: 50%; background-color: ${profile.color}; display: flex; align-items: center; justify-content: center; color: white; margin-right: 10px;">${post.author[0]}</div>
                            <p style="font-weight: 700;">${post.author}</p>
                            <span style="font-size:0.8em; color:#999; margin-left: auto;">${post.date}</span>
                        </div>
                        <p style="font-size:1em; margin-bottom: 10px;">${post.content}</p>
                        <div style="font-size: 0.9em; color: var(--color-secondary-pastel); cursor:pointer;">
                            <span data-action="like">â¤ï¸ ì¢‹ì•„ìš”</span>
                            <span data-action="comment" style="margin-left: 15px;">ğŸ’¬ ëŒ“ê¸€</span>
                        </div>
                    </div>
                `;
            }).join('');

            return `
                <div class="container">
                    <header style="text-align:center;"><h2>ì—ë””í„°í†¡</h2></header>
                    <p class="subtitle" style="text-align:center; margin-bottom: 20px;">ì—ë””í„°ë“¤ì˜ ì¼ìƒê³¼ ìƒê°ì„ ë‚˜ëˆ ë³´ì„¸ìš”.</p>
                    
                    <div style="display:flex; justify-content:flex-end; margin-bottom: 20px;">
                        ${isEditor ? `<button class="styled-button primary" id="write-editor-talk" style="padding: 10px 20px; font-size:0.9em;">
                            ê¸€ì“°ê¸° âœï¸
                        </button>` : ''}
                    </div>

                    <div class="post-list">${postList}</div>
                </div>
            `;
        }

        // ğŸŒˆ ë¬´ë“œ íƒ­ í…œí”Œë¦¿ (ë¬´ë“œ ê¸°ë¡ ì‘ì„± ë²„íŠ¼ í¬í•¨)
        function getMoodTemplate() {
            
            return `
                <div class="mood-container">
                    <header style="text-align:center;"><h2>ì˜¤ëŠ˜ì˜ ë¬´ë“œ íŠ¸ë˜ì»¤</h2></header>
                    <p class="description" style="text-align:center; margin-bottom: 30px;">ë‹¹ì‹ ì˜ ê°ì • ì¼ê¸°ë¥¼ ê¸°ë¡í•˜ê³  ì¶”ì í•˜ì„¸ìš”.</p>
                    
                    <div class="glass-card" style="background:rgba(255,255,255,0.7); min-height:250px; padding: 25px;">
                        <p style="text-align:center; color:#555; font-size: 0.9em;">ì—¬ê¸°ì— ì›”ê°„/ì£¼ê°„ ë¬´ë“œ íŠ¸ë˜ì»¤ê°€ ì‹œê°í™”ë©ë‹ˆë‹¤.</p>
                        <p style="text-align:center; color:#555; margin-top:10px;">(ê°ì • ì¶”ì´ ê·¸ë˜í”„ ë“±)</p>
                    </div>
                    
                    <button class="styled-button primary" id="open-mood-modal" style="width: 100%; max-width: 250px; margin: 30px auto 0 auto; display: block;">
                        ë¬´ë“œ ê¸°ë¡ ì‘ì„±
                    </button>
                </div>
            `;
        }


        // ğŸ‘¤ ë§ˆì´ íƒ­ í…œí”Œë¦¿ (ê¸°ëŠ¥ ì—°ë™ ê°•í™”)
        function getMyPageTemplate(stamps) {
            const isVIP = stamps >= 50;
            
            const stampGrid = Array(50).fill(0).map((_, index) => {
                const collected = index < stamps;
                return `<div class="stamp-icon ${collected ? 'stamped' : 'unstamped'}"></div>`;
            }).join('');

            return `
                <div class="container">
                    <header style="text-align:center;"><h2>My Spazio</h2></header>
                    <p style="text-align:center; margin-bottom: 30px; font-size:0.9em;">${isVIP ? 'âœ¨ VIP í–…ì‚ë‹˜!' : 'ì˜¤ëŠ˜ë„ ìíœ´ë ˆí„°ì™€ í•¨ê»˜ í•˜ì„¸ìš”.'}</p>

                    <ul class="mypage-button-list glass-card">
                        <li><button class="mypage-button" data-action="mypost">ë‚´ê°€ ì“´ ê¸€ <span>â–¶ï¸</span></button></li>
                        <li><button class="mypage-button" data-action="mycomment">ë‚˜ì˜ ëŒ“ê¸€ <span>â–¶ï¸</span></button></li>
                        <li><button class="mypage-button" data-action="mylike">ì¢‹ì•„ìš”í•œ ê¸€ <span>â–¶ï¸</span></button></li>
                        <li><button class="mypage-button" data-action="mybookmark">ë¶ë§ˆí¬í•œ ê¸€ <span>â–¶ï¸</span></button></li>
                        <li><button class="mypage-button" data-action="mystamp">ìíœ´ ìŠ¤íƒ¬í”„ (${stamps}ê°œ) <span>â–¶ï¸</span></button></li>
                        <li><button class="mypage-button" data-action="logout" style="color: ${isVIP ? var(--color-secondary-pastel) : '#555'};">ë¡œê·¸ì•„ì›ƒ <span>â–¶ï¸</span></button></li>
                    </ul>

                    <section class="stamp-section glass-card">
                        <h3>ë‚˜ì˜ ìíœ´ ìŠ¤íƒ¬í”„</h3>
                        <div class="stamp-grid">${stampGrid}</div>
                    </section>
                </div>
            `;
        }
        
        // **ìƒˆë¡œìš´ ë Œë”ë§ í˜ì´ì§€ (ê°€ìƒ ì½˜í…ì¸  ëª©ë¡)**
        function getContentListTemplate(type) {
             const title = {
                'mypost': 'ë‚´ê°€ ì“´ ê¸€ ëª©ë¡',
                'mycomment': 'ë‚˜ì˜ ëŒ“ê¸€ ëª©ë¡',
                'mylike': 'ì¢‹ì•„ìš”í•œ ê¸€ ëª©ë¡',
                'mybookmark': 'ë¶ë§ˆí¬í•œ ê¸€ ëª©ë¡'
             }[type] || 'ì½˜í…ì¸  ëª©ë¡';
             
             return `
                 <div class="container">
                    <header style="text-align:center; margin-bottom: 20px;">
                        <h2 style="color: var(--color-primary-dark);">${title}</h2>
                        <a href="#" data-tab="mypage" style="font-size:0.8em; color:#999; text-decoration: none;">[ë§ˆì´í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°]</a>
                    </header>
                    <div class="glass-card" style="min-height: 300px;">
                        <p style="font-weight: 700; margin-bottom: 15px;">${title} ë°ì´í„°ê°€ ì—¬ê¸°ì— ì—°ë™ë©ë‹ˆë‹¤.</p>
                        <p>- 12/10: í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ 1</p>
                        <p>- 12/08: í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ 2</p>
                        <p style="margin-top: 15px; color: ${var(--color-secondary-pastel)};">âœ… í•´ë‹¹ í˜ì´ì§€ ë Œë”ë§ìœ¼ë¡œ ê¸°ëŠ¥ ì—°ë™ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    </div>
                 </div>
             `;
        }


        // --- ë©”ì¸ ë Œë”ë§ ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---

        const app = document.getElementById('app');
        const navItems = document.querySelectorAll('.bottom-nav .nav-item');
        const modalOverlay = document.getElementById('record-modal');
        
        function renderTab(tabName, actionType = null) {
            currentTab = tabName;
            app.innerHTML = '';
            
            navItems.forEach(item => item.classList.remove('active'));
            const activeNav = document.querySelector(`.nav-item[data-tab="${tabName}"]`);
            if (activeNav) activeNav.classList.add('active');

            document.body.style.backgroundColor = 'var(--color-background-soft)';
            
            if (actionType && ['mypost', 'mycomment', 'mylike', 'mybookmark'].includes(actionType)) {
                 app.innerHTML = getContentListTemplate(actionType);
                 return;
            }

            switch (tabName) {
                case 'home':
                    app.innerHTML = getHomeTemplate();
                    break;
                case 'letter':
                    app.innerHTML = getLetterTemplate();
                    break;
                case 'editor-talk':
                    app.innerHTML = getEditorTalkTemplate();
                    break;
                case 'mood':
                    app.innerHTML = getMoodTemplate();
                    document.body.style.backgroundColor = '#A9D1DF'; /* ë¬´ë“œ íƒ­ì€ ê³ ìœ  ë°°ê²½ìƒ‰ */
                    break;
                case 'mypage':
                    app.innerHTML = getMyPageTemplate(userStamps);
                    break;
                default:
                    app.innerHTML = `<div class="container">í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>`;
            }

            window.scrollTo(0, 0);
        }

        // ì´ˆê¸° ë¡œë“œ
        renderTab('home');


        // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---

        document.addEventListener('click', handleAppClicks);

        function handleAppClicks(e) {
            const target = e.target.closest('[data-tab], [data-filter], [data-action], .styled-button, .mypage-button');
            if (!target) return;
            
            // íƒ­ í´ë¦­, í™ˆ ì•„ì¹´ì´ë¸Œ ë²„íŠ¼ í´ë¦­
            if (target.hasAttribute('data-tab')) {
                e.preventDefault();
                const tab = target.getAttribute('data-tab');
                renderTab(tab);
            } 
            // ë ˆí„° ì•„ì¹´ì´ë¸Œ í•„í„°ë§ ë²„íŠ¼ í´ë¦­
            else if (target.hasAttribute('data-filter')) {
                e.preventDefault();
                currentLetterFilter = target.getAttribute('data-filter');
                renderTab('letter'); 
            }
            // ë§ˆì´í˜ì´ì§€ ê¸°ëŠ¥ í™œì„±í™”/ì—°ë™
            else if (target.hasAttribute('data-action')) {
                 const action = target.getAttribute('data-action');
                 
                 if (['mypost', 'mycomment', 'mylike', 'mybookmark'].includes(action)) {
                    e.preventDefault();
                    // ğŸ’¡ ëª©ë¡ í˜ì´ì§€ ë Œë”ë§ìœ¼ë¡œ ê¸°ëŠ¥ ì—°ë™ êµ¬í˜„
                    renderTab('content-list', action); 
                 }
                 else if (action === 'mystamp') {
                    e.preventDefault();
                    alert(`í˜„ì¬ ${userStamps}ê°œì˜ ìŠ¤íƒ¬í”„ë¥¼ ëª¨ìœ¼ì…¨ìŠµë‹ˆë‹¤! VIPê¹Œì§€ ${50 - userStamps}ê°œ ë‚¨ì•˜ìŠµë‹ˆë‹¤.`);
                 }
                 else if (action === 'logout') {
                     e.preventDefault();
                     alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
                     renderTab('home');
                 }
            }
            // ë¬´ë“œ ê¸°ë¡/ê¸€ì“°ê¸° ëª¨ë‹¬ ì—´ê¸°
            else if (target.id === 'open-mood-modal' || target.id === 'write-editor-talk') {
                e.preventDefault();
                const isMood = target.id === 'open-mood-modal';
                
                document.getElementById('modal-title').textContent = isMood ? 'ë¬´ë“œ ê¸°ë¡ ì‘ì„±' : 'ì—ë””í„°í†¡ ê²Œì‹œë¬¼ ì‘ì„±';
                document.getElementById('save-button').textContent = isMood ? 'ë¬´ë“œ ê¸°ë¡' : 'ê²Œì‹œ';
                document.getElementById('mood-icons').style.display = isMood ? 'block' : 'none'; 
                
                // ëª¨ë‹¬ í‘œì‹œ
                modalOverlay.style.display = 'flex';
                // ëª¨ë‹¬ì´ í™”ë©´ ì¤‘ì•™ì— ì˜¤ë„ë¡ ì²˜ë¦¬ (CSSë¡œ ì²˜ë¦¬ë˜ì–´ ìˆìœ¼ë‚˜ ëª…ì‹œì ìœ¼ë¡œ í™•ì¸)
                modalOverlay.style.alignItems = 'center';
                modalOverlay.style.justifyContent = 'center';
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸° ë° ì €ì¥ ì´ë²¤íŠ¸
        modalOverlay.addEventListener('click', (e) => {
            const saveButtonText = document.getElementById('save-button').textContent;
            
            if (e.target.id === 'record-modal') {
                // ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
                modalOverlay.style.display = 'none';
            } else if (e.target.id === 'save-button') {
                e.preventDefault();
                
                alert(`${document.getElementById('modal-title').textContent}ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                
                document.getElementById('record-title').value = '';
                document.getElementById('record-content').value = '';
                modalOverlay.style.display = 'none';
                
                // ì €ì¥ í›„ í•´ë‹¹ íƒ­ìœ¼ë¡œ ë³µê·€
                if (saveButtonText === 'ë¬´ë“œ ê¸°ë¡') {
                    // ìŠ¤íƒ¬í”„ íšë“ ë¡œì§ ì‹œë®¬ë ˆì´ì…˜
                    userStamps = Math.min(50, userStamps + 1); 
                    renderTab('mood');
                } else if (saveButtonText === 'ê²Œì‹œ') {
                    renderTab('editor-talk');
                }
            }
        });
        
    </script>
</body>
</html>
