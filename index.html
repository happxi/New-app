<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìíœ´ë ˆí„° - í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Round+Gothic:wght@400;700;800&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* ğŸ¨ ì˜¤ë¦¬ì§€ë„ ë””ìì¸ ì»¬ëŸ¬ (ìŠ¤í¬ë¦°ìƒ· ê¸°ë°˜) */
            --primary: #4A90E2;       /* ë©”ì¸ ë¸”ë£¨ */
            --primary-soft: #E3F2FD;  /* ì—°í•œ ë¸”ë£¨ ë°°ê²½ */
            --accent: #FFB6C1;        /* í¬ì¸íŠ¸ í•‘í¬ (NEW ë±ƒì§€ ë“±) */
            --text-main: #1A365D;     /* ì§„í•œ ë‚¨ìƒ‰ í…ìŠ¤íŠ¸ */
            --text-sub: #718096;      /* íšŒìƒ‰ ì„œë¸Œ í…ìŠ¤íŠ¸ */
            --bg-body: #F0F8FF;       /* ì „ì²´ ë°°ê²½ */
            --white: #FFFFFF;
            --shadow-card: 0 10px 25px rgba(148, 163, 184, 0.15); /* ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Nanum Round Gothic', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            /* ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ ì¤‘ì•™ ì •ë ¬ */
            display: flex; flex-direction: column; align-items: center;
        }

        /* ğŸ“± ì•± ì»¨í…Œì´ë„ˆ */
        .app-container {
            width: 100%; max-width: 480px; 
            min-height: 100vh;
            background-color: var(--bg-body);
            padding-bottom: 90px; /* í•˜ë‹¨ íƒ­ë°” ê³µê°„ */
            position: relative;
        }

        /* ğŸ  í—¤ë” ë””ìì¸ (ìŠ¤í¬ë¦°ìƒ· ì°¸ê³ ) */
        .header-section {
            padding: 40px 25px 20px;
            text-align: center;
        }
        .header-title {
            font-size: 24px; font-weight: 800; color: var(--text-main);
            margin-bottom: 8px; letter-spacing: -0.5px;
        }
        .header-sub {
            font-size: 14px; color: var(--text-sub); font-weight: 500;
        }

        /* ğŸ’ ë©”ì¸ ì¹´ë“œ (Hero Card) */
        .hero-card {
            background: linear-gradient(180deg, #FFFFFF 0%, #F8FAFC 100%);
            border-radius: 30px;
            padding: 30px 20px;
            margin: 0 20px 30px;
            text-align: center;
            box-shadow: var(--shadow-card);
            border: 1px solid rgba(255,255,255,0.8);
            position: relative; overflow: hidden;
        }
        .hero-card h3 { font-size: 19px; font-weight: 700; color: #4A5568; margin-bottom: 8px; }
        .hero-card p { font-size: 13px; color: #718096; margin-bottom: 25px; }
        
        /* ğŸ”µ ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼ */
        .hero-btn {
            background: linear-gradient(90deg, #4A90E2 0%, #63B3ED 100%);
            color: white; padding: 14px 30px; border-radius: 25px;
            font-size: 15px; font-weight: 700; border: none;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
            cursor: pointer; transition: transform 0.2s;
        }
        .hero-btn:active { transform: scale(0.98); }

        /* ğŸ”˜ í€µ ë©”ë‰´ (ì›í˜• ì•„ì´ì½˜) */
        .quick-menu {
            display: flex; justify-content: space-around; padding: 0 20px; margin-bottom: 30px;
        }
        .quick-item {
            display: flex; flex-direction: column; align-items: center; cursor: pointer; width: 70px;
        }
        .quick-icon {
            width: 55px; height: 55px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; margin-bottom: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            /* ê° ì•„ì´ì½˜ ë³„ ë°°ê²½ìƒ‰ */
        }
        .icon-blue { background: #E3F2FD; color: #4A90E2; }
        .icon-yellow { background: #FFF9C4; color: #FBC02D; }
        .icon-purple { background: #F3E5F5; color: #AB47BC; }
        .icon-green { background: #E8F5E9; color: #66BB6A; }
        
        .quick-text { font-size: 11px; color: #4A5568; font-weight: 600; }

        /* ğŸ§­ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ê³ ì •) */
        .bottom-nav {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 480px; height: 80px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0,0,0,0.05);
            display: flex; justify-content: space-around; align-items: center;
            z-index: 1000; padding-bottom: 10px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.03);
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center;
            color: #A0AEC0; text-decoration: none; width: 60px;
            transition: color 0.3s;
        }
        .nav-item svg { width: 24px; height: 24px; margin-bottom: 4px; fill: currentColor; }
        .nav-text { font-size: 10px; font-weight: 500; }
        .nav-item.active { color: var(--primary); }
        
        /* ì¤‘ì•™ ë¬´ë“œ ë²„íŠ¼ (ê°•ì¡°) */
        .nav-item.central .central-bg {
            width: 50px; height: 50px; background: linear-gradient(135deg, #4A90E2 0%, #63B3ED 100%);
            border-radius: 18px; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 8px 15px rgba(74, 144, 226, 0.3); margin-bottom: -20px; border: 4px solid white;
            transform: translateY(-15px);
        }
        .nav-item.central svg { fill: white; width: 26px; height: 26px; margin: 0; }
        .nav-item.central .nav-text { margin-top: 25px; font-weight: 700; color: var(--primary); }

        /* ğŸ—³ï¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ (ê³µí†µ) */
        .content-card {
            background: white; border-radius: 20px; padding: 20px;
            margin: 0 20px 15px; box-shadow: var(--shadow-card);
            border: 1px solid rgba(0,0,0,0.02);
            position: relative;
        }
        .badge-new {
            position: absolute; top: 20px; right: 20px;
            background: #FFF0F5; color: #FF69B4; font-size: 10px;
            padding: 3px 8px; border-radius: 10px; font-weight: 700;
        }

        /* ğŸ“® ìŠ¤íƒ¬í”„ ê·¸ë¦¬ë“œ (30ê°œ) */
        .stamp-grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;
            margin-top: 20px; justify-items: center;
        }
        .stamp-circle {
            width: 35px; height: 35px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: 700;
            border: 1px solid #E2E8F0; color: #CBD5E0;
        }
        .stamp-circle.active {
            background: var(--primary); color: white; border: none;
            box-shadow: 0 2px 8px rgba(74, 144, 226, 0.4);
        }

        /* ğŸ” ëª¨ë‹¬ (ë¡œê·¸ì¸/ê¸€ì“°ê¸°) */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 2000;
            display: none; align-items: center; justify-content: center;
        }
        .modal-card {
            background: white; width: 85%; max-width: 340px;
            border-radius: 25px; padding: 30px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }
        .input-box {
            width: 100%; padding: 12px; border: 1px solid #E2E8F0;
            border-radius: 12px; margin-bottom: 10px; font-size: 14px; background: #F8FAFC;
        }

        /* ìœ í‹¸ë¦¬í‹° */
        .hide { display: none !important; }
        .toast {
            position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%);
            background: rgba(26, 54, 93, 0.9); color: white;
            padding: 10px 20px; border-radius: 20px; font-size: 13px; z-index: 3000;
            animation: fadeUp 3s forwards;
        }
        @keyframes fadeUp { 0%{opacity:0; bottom:80px} 10%{opacity:1; bottom:100px} 90%{opacity:1; bottom:100px} 100%{opacity:0; bottom:80px} }
    </style>
</head>
<body>

    <div id="loginModal" class="modal-overlay" style="display: flex;">
        <div class="modal-card">
            <h2 style="color: var(--primary); font-size: 24px; margin-bottom: 5px;">ìíœ´ë ˆí„°</h2>
            <p style="color: #718096; font-size: 13px; margin-bottom: 25px;">í–…ì‚ë‹˜ í™˜ì˜í•´ìš”! ë‹¹ì‹ ì˜ íŠ¹ë³„í•œ íœ´ì‹ì„ ìœ„í•œ ê³µê°„</p>
            
            <input type="email" id="loginEmail" class="input-box" placeholder="ì´ë©”ì¼">
            <input type="password" id="loginPassword" class="input-box" placeholder="ë¹„ë°€ë²ˆí˜¸">
            
            <div style="display: flex; align-items: center; margin-bottom: 20px; font-size: 12px; color: #718096;">
                <input type="checkbox" id="keepLogin" style="margin-right: 5px;">
                <label for="keepLogin">ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</label>
            </div>

            <button onclick="handleLogin()" class="hero-btn" style="width: 100%;">ë¡œê·¸ì¸</button>
            <p style="margin-top: 15px; font-size: 12px; color: #CBD5E0;">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <span style="color: var(--primary);">íšŒì›ê°€ì…</span></p>
        </div>
    </div>

    <div id="writeModal" class="modal-overlay">
        <div class="modal-card" style="text-align: left;">
            <h3 id="writeTitle" style="font-size: 18px; margin-bottom: 15px; color: var(--text-main);">ê¸€ì“°ê¸°</h3>
            
            <select id="letterCategory" class="input-box" style="display:none;">
                <option value="ìíœ´ë ˆí„°">ìíœ´ë ˆí„°</option>
                <option value="ìíœ´ë©">ìíœ´ë©</option>
            </select>

            <div id="moodSelector" style="display:none; margin-bottom: 15px; text-align: center; font-size: 24px;">
                <span onclick="alert('ğŸ˜Š ì„ íƒ')" style="margin: 5px;">ğŸ˜Š</span>
                <span onclick="alert('ğŸ¥° ì„ íƒ')" style="margin: 5px;">ğŸ¥°</span>
                <span onclick="alert('ğŸ˜¢ ì„ íƒ')" style="margin: 5px;">ğŸ˜¢</span>
                <span onclick="alert('ğŸ˜¡ ì„ íƒ')" style="margin: 5px;">ğŸ˜¡</span>
                <span onclick="alert('ğŸ¥± ì„ íƒ')" style="margin: 5px;">ğŸ¥±</span>
            </div>

            <input type="text" id="postTitle" class="input-box" placeholder="ì œëª©">
            <textarea id="postContent" class="input-box" style="height: 120px; resize: none;" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
            
            <button onclick="submitPost()" class="hero-btn" style="width: 100%;">ë“±ë¡í•˜ê¸°</button>
            <button onclick="closeModal()" style="width: 100%; background: none; border: none; color: #718096; margin-top: 10px;">ì·¨ì†Œ</button>
        </div>
    </div>

    <div id="appContainer" class="app-container">
        </div>

    <nav class="bottom-nav">
        <a class="nav-item active" onclick="renderTab('home')" id="nav-home">
            <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span class="nav-text">í™ˆ</span>
        </a>
        <a class="nav-item" onclick="renderTab('letter')" id="nav-letter">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            <span class="nav-text">ë ˆí„°</span>
        </a>
        <a class="nav-item central" onclick="renderTab('mood')" id="nav-mood">
            <div class="central-bg">
                <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
            </div>
            <span class="nav-text">ë¬´ë“œ</span>
        </a>
        <a class="nav-item" onclick="renderTab('editorTalk')" id="nav-editorTalk">
            <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
            <span class="nav-text">ì—ë””í„°í†¡</span>
        </a>
        <a class="nav-item" onclick="renderTab('mypage')" id="nav-mypage">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <span class="nav-text">ë§ˆì´</span>
        </a>
    </nav>

    <script>
        // --- ë°ì´í„° ---
        const ADMINS = ['happxi@jahyu.com', 'elly@jahyu.com', 'gokal@jahyu.com', 'sunny@jahyu.com', 'yudan@jahyu.com'];
        let currentUser = null;
        let currentTab = 'home';
        let userStamps = 28; // í…ŒìŠ¤íŠ¸ìš©

        // --- ê¸°ëŠ¥ ---

        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            if(!email) return alert('ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');

            currentUser = {
                id: email,
                name: email.includes('happxi') ? 'í–…ì”¨' : 'í–…ì‚',
                isAdmin: ADMINS.includes(email)
            };

            // ë¡œê·¸ì¸ ìœ ì§€ ë¡œì§ (localStorage)
            if(document.getElementById('keepLogin').checked) {
                localStorage.setItem('jahyu_user', JSON.stringify(currentUser));
            }

            document.getElementById('loginModal').style.display = 'none';
            renderTab('home');
            showToast(`${currentUser.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!`);
        }

        function checkAutoLogin() {
            const savedUser = localStorage.getItem('jahyu_user');
            if(savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('loginModal').style.display = 'none';
                renderTab('home');
            }
        }

        // --- íƒ­ ë Œë”ë§ ì‹œìŠ¤í…œ ---
        function renderTab(tabName) {
            currentTab = tabName;
            const container = document.getElementById('appContainer');
            container.innerHTML = '';
            window.scrollTo(0,0);

            // íƒ­ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById(`nav-${tabName}`);
            if(activeNav) activeNav.classList.add('active');

            if(tabName === 'home') {
                container.innerHTML = `
                    <div class="header-section">
                        <h1 class="header-title">í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</h1>
                        <p class="header-sub">ë©”ë§ˆë¥¸ ì¼ìƒì— íœ´ì‹ í•œ ë°©ìš¸! ğŸ’§</p>
                    </div>

                    <div class="hero-card">
                        <h3>ì˜¤ëŠ˜ì€ ì–´ë–¤ íë§ì´ í•„ìš”í•˜ì„¸ìš”?</h3>
                        <p>ìíœ´ë ˆí„°ì™€ ìíœ´ë©ì„ ì£¼ì œë³„ë¡œ í•œ ëˆˆì—!</p>
                        <button onclick="handleArchiveClick()" class="hero-btn">ë ˆí„° ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°</button>
                    </div>

                    <div class="quick-menu">
                        <div class="quick-item" onclick="window.open('https://maily.so/happci/', '_blank')">
                            <div class="quick-icon icon-purple">ğŸ’Œ</div>
                            <span class="quick-text">ë ˆí„° ì½ê¸°</span>
                        </div>
                        <div class="quick-item" onclick="window.open('https://index-html-zak5.vercel.app/', '_blank')">
                            <div class="quick-icon icon-blue">ğŸ”®</div>
                            <span class="quick-text">íë§ í…ŒìŠ¤íŠ¸</span>
                        </div>
                        <div class="quick-item" onclick="renderTab('mood')">
                            <div class="quick-icon icon-green">ğŸ€</div>
                            <span class="quick-text">ì˜¤ëŠ˜ì˜ ë¬´ë“œ</span>
                        </div>
                        <div class="quick-item" onclick="window.open('http://pf.kakao.com/_Jfjxgn/111753149', '_blank')">
                            <div class="quick-icon icon-yellow">ğŸ“</div>
                            <span class="quick-text">ë¬¸ì¥ ìˆ˜ì§‘</span>
                        </div>
                        <div class="quick-item" onclick="window.open('http://pf.kakao.com/_Jfjxgn', '_blank')">
                            <div class="quick-icon icon-blue">ğŸ’¬</div>
                            <span class="quick-text">1:1 ì±„íŒ…</span>
                        </div>
                    </div>

                    <div style="padding: 0 20px;">
                        <h4 style="margin-bottom:15px; font-weight:700; color:#2D3748;">ìµœì‹  ë ˆí„°</h4>
                        <div class="content-card">
                            <span class="badge-new">NEW</span>
                            <h4 style="font-weight:700; margin-bottom:5px;">[32í˜¸] í‡´ì‚¬ í›„ ë²ˆì•„ì›ƒ, ì €ë§Œ ì´ëŸ°ê°€ìš”?</h4>
                            <p style="font-size:12px; color:#718096;">í‡´ì‚¬ í›„ì—ë„ ì‰¬ì§€ ëª»í•˜ëŠ” ë‹¹ì‹ ì—ê²Œ...</p>
                        </div>
                    </div>
                `;
            } else if (tabName === 'letter') {
                // ë ˆí„° íƒ­
                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">ë ˆí„° ì•„ì¹´ì´ë¸Œ</h2>
                        <div style="display:flex; justify-content:center; gap:10px; margin-top:20px;">
                            <button style="padding:8px 16px; border-radius:20px; border:1px solid #4A90E2; background:#4A90E2; color:white; font-weight:700;">ì „ì²´</button>
                            <button style="padding:8px 16px; border-radius:20px; border:1px solid #E2E8F0; background:white; color:#718096;">ìíœ´ë ˆí„°</button>
                            <button style="padding:8px 16px; border-radius:20px; border:1px solid #E2E8F0; background:white; color:#718096;">ìíœ´ë©</button>
                        </div>
                    </div>
                    <div style="padding: 0 20px;">
                        <div class="content-card">
                             <h4 style="font-weight:700;">[ìíœ´ë©] ê¸€ì“°ê¸° ë…¸í•˜ìš°</h4>
                             <p style="font-size:12px; color:#718096;">ë‚´ ë§ˆìŒì„ ë‹´ëŠ” ë²• A to Z</p>
                        </div>
                         <div class="content-card">
                             <h4 style="font-weight:700;">[31í˜¸] ì£¼ë§ ì‰¼ì˜ ê¸°ìˆ </h4>
                             <p style="font-size:12px; color:#718096;">ì™„ì „í•œ íœ´ì‹ì„ ìœ„í•œ íŒ</p>
                        </div>
                    </div>
                `;
            } else if (tabName === 'mood') {
                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">ì˜¤ëŠ˜ì˜ ë¬´ë“œ</h2>
                        <p class="header-sub">í–…ì‚ë‹˜ì´ ì˜¤ëŠ˜ ëŠë‚€ ê°ì •ê³¼ ìƒê°ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!</p>
                    </div>
                    <div class="content-card" style="text-align:center; padding: 40px 20px;">
                        <p style="color:#A0AEC0; margin-bottom:20px;">ì‘ì„±ëœ ë¬´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <button onclick="openModal('mood')" class="hero-btn">ë¬´ë“œ ê¸°ë¡í•˜ê¸° âœï¸</button>
                    </div>
                `;
            } else if (tabName === 'editorTalk') {
                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">ì—ë””í„° í†¡</h2>
                        <p class="header-sub">ì—ë””í„°ì˜ ì¼ìƒì„ ë” ê°€ê¹Œì´ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”!</p>
                    </div>
                    <div style="padding: 0 20px;">
                         ${currentUser.isAdmin ? `<button onclick="openModal('letter')" style="width:100%; padding:12px; background:#4A90E2; color:white; border:none; border-radius:15px; margin-bottom:20px; font-weight:700;">âœï¸ ê´€ë¦¬ì ê¸€ì“°ê¸°</button>` : ''}
                         <div class="content-card">
                            <div style="display:flex; align-items:center; margin-bottom:10px;">
                                <div style="width:35px; height:35px; background:#FFB6C1; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; margin-right:10px;">ì—˜</div>
                                <span style="font-weight:700;">ì—˜ë¦¬</span>
                            </div>
                            <p>ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ë„ˆë¬´ ì¢‹ë„¤ìš”! ğŸŒ¿</p>
                            <div style="margin-top:15px; border-top:1px solid #eee; padding-top:10px; font-size:12px; color:#718096; display:flex; gap:15px;">
                                <span>â¤ï¸ 12</span> <span>ğŸ’¬ 5</span>
                            </div>
                        </div>
                    </div>
                `;
            } else if (tabName === 'mypage') {
                let stampHTML = '';
                for(let i=1; i<=30; i++) {
                    const active = i <= userStamps ? 'active' : '';
                    stampHTML += `<div class="stamp-circle ${active}">${i}</div>`;
                }

                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">My Page</h2>
                        <div style="background:white; padding:20px; border-radius:20px; display:flex; align-items:center; margin-top:20px; box-shadow:var(--shadow-card);">
                            <div style="width:50px; height:50px; background:#87CEEB; border-radius:50%; margin-right:15px; display:flex; align-items:center; justify-content:center; color:white; font-weight:700; font-size:20px;">
                                ${currentUser.name[0]}
                            </div>
                            <div>
                                <h3 style="font-size:18px; font-weight:700;">${currentUser.name}ë‹˜</h3>
                                <p style="font-size:12px; color:#718096;">${currentUser.id}</p>
                            </div>
                        </div>
                    </div>

                    <div style="padding: 0 20px;">
                        <div class="content-card">
                            <h4 style="font-weight:700; color:#4A90E2; margin-bottom:15px;">ìíœ´ìŠ¤íƒ¬í”„ í˜„í™© (${userStamps}ê°œ)</h4>
                            <div class="stamp-grid">
                                ${stampHTML}
                            </div>
                            <div style="background:#F7FAFC; padding:15px; border-radius:15px; margin-top:20px; font-size:12px; color:#555; line-height:1.5;">
                                *30ê°œë¥¼ ëª¨ì€ ìŠ¤íƒ¬í”„í™”ë©´ì„ ìº¡ì³í•´ì„œ êµ¬ë… ì¤‘ì¸ ì´ë©”ì¼ê³¼ í•¨ê»˜ ì¹´í†¡ì±„ë„ë¡œ ë³´ë‚´ì£¼ì„¸ìš”!<br>
                                ììœ ë¡œìš´ ë‹¹ì‹ ì—ê²Œ íŠ¹ë³„í•œ ì„ ë¬¼ì´ ë„ì°©í• ì§€ë„ ëª°ë¼ìš”!ğŸ
                            </div>
                        </div>

                        <div class="content-card" style="padding:0;">
                            ${['ë‚´ê°€ ì“´ ê¸€', 'ë‚˜ì˜ ëŒ“ê¸€', 'ì¢‹ì•„ìš”í•œ ê¸€', 'ë¶ë§ˆí¬í•œ ê¸€'].map(m => `
                                <div onclick="alert('ëª©ë¡ ì¡°íšŒ')" style="padding:15px 20px; border-bottom:1px solid #f0f0f0; display:flex; justify-content:space-between;">
                                    <span>${m}</span> <span style="color:#ccc;">â€º</span>
                                </div>
                            `).join('')}
                        </div>
                        
                        <button onclick="handleLogout()" style="width:100%; padding:15px; color:#E53E3E; background:none; border:none; font-weight:700;">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                `;
            }
        }

        // --- ë¡œì§ í•¸ë“¤ëŸ¬ ---
        function handleArchiveClick() {
            if (currentUser.isAdmin) {
                // ê´€ë¦¬ìë¼ë©´ ê¸€ì“°ê¸° ëª¨ë‹¬ ì—´ê¸°
                openModal('letter');
            } else {
                // ì¼ë°˜ ì‚¬ìš©ìë¼ë©´ ë ˆí„° íƒ­ìœ¼ë¡œ ì´ë™
                renderTab('letter');
            }
        }

        function openModal(type) {
            const modal = document.getElementById('writeModal');
            const title = document.getElementById('writeTitle');
            const moodSec = document.getElementById('moodSelector');
            const letterCat = document.getElementById('letterCategory');

            modal.style.display = 'flex';
            moodSec.style.display = 'none';
            letterCat.style.display = 'none';

            if (type === 'mood') {
                title.innerText = 'ì˜¤ëŠ˜ì˜ ë¬´ë“œ ê¸°ë¡';
                moodSec.style.display = 'block';
            } else if (type === 'letter') {
                title.innerText = 'ë ˆí„° ë°œí–‰ (ê´€ë¦¬ì)';
                letterCat.style.display = 'block';
            } else {
                title.innerText = 'ê¸€ì“°ê¸°';
            }
        }

        function closeModal() {
            document.getElementById('writeModal').style.display = 'none';
        }

        function submitPost() {
            // âœ… ì—ë””í„°ë„ ìŠ¤íƒ¬í”„ ì ë¦½ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •
            if (userStamps < 30) {
                userStamps++;
                showToast("ì‘ì„± ì™„ë£Œ! ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤ âœ¨");
            } else {
                showToast("ì‘ì„± ì™„ë£Œ! ì´ë¯¸ 30ê°œë¥¼ ë‹¤ ëª¨ìœ¼ì…¨ë„¤ìš”! ğŸ‰");
            }
            closeModal();
            renderTab(currentTab); // í˜„ì¬ íƒ­ ìƒˆë¡œê³ ì¹¨
        }

        function handleLogout() {
            localStorage.removeItem('jahyu_user');
            currentUser = null;
            location.reload();
        }

        function showToast(msg) {
            const div = document.createElement('div');
            div.className = 'toast';
            div.innerText = msg;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 3000);
        }

        // ì‹œì‘ ì‹œ ìë™ ë¡œê·¸ì¸ ì²´í¬
        checkAutoLogin();

    </script>
</body>
</html>
