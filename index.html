<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìíœ´ë ˆí„° - í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Round+Gothic:wght@400;700;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* ğŸ¨ ìƒˆë¡œìš´ ë””ìì¸ ì»¬ëŸ¬ */
            --primary: #FFB6C1;       /* ë©”ì¸ í•‘í¬ */
            --primary-blur: rgba(255, 182, 193, 0.1);
            --secondary: #E3F2FD;    /* ì—°í•œ ë¸”ë£¨ */
            --accent: #F3E5F5;       /* ì—°ë³´ë¼ */
            --text-main: #2D3748;     /* ì°¨ì½œê·¸ë ˆì´ */
            --text-sub: #718096;      /* íšŒìƒ‰ ì„œë¸Œ í…ìŠ¤íŠ¸ */
            --bg-body: linear-gradient(135deg, #FFF5F7 0%, #F0F8FF 50%, #F5F3FF 100%);
            --white: rgba(255, 255, 255, 0.9);
            --glass: rgba(255, 255, 255, 0.7);
            --shadow-glass: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Noto Sans KR', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: var(--bg-body);
            background-attachment: fixed;
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex; 
            flex-direction: column; 
            align-items: center;
            font-weight: 300;
        }

        /* ğŸ“± ì•± ì»¨í…Œì´ë„ˆ - ìœ ë¦¬êµ¬ìŠ¬ íš¨ê³¼ */
        .app-container {
            width: 100%; 
            max-width: 480px; 
            min-height: 100vh;
            padding-bottom: 85px; 
            position: relative;
            background: transparent;
        }

        /* ğŸ  í—¤ë” - íˆ¬ëª…ê° ìˆëŠ” ë””ìì¸ */
        .header-section {
            padding: 35px 25px 15px;
            text-align: center;
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            margin-bottom: 20px;
        }
        .header-title {
            font-size: 26px; 
            font-weight: 700; 
            color: var(--text-main);
            margin-bottom: 8px; 
            letter-spacing: -0.5px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.05);
        }
        .header-sub {
            font-size: 14px; 
            color: var(--text-sub); 
            font-weight: 400;
            opacity: 0.8;
        }

        /* ğŸ’ ë©”ì¸ ì¹´ë“œ - ìœ ë¦¬êµ¬ìŠ¬ ì¹´ë“œ */
        .hero-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px 20px;
            margin: 0 20px 25px;
            text-align: center;
            box-shadow: var(--shadow-glass);
            border: 1px solid rgba(255,255,255,0.5);
            position: relative;
            overflow: hidden;
        }
        .hero-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            pointer-events: none;
        }
        .hero-card h3 { 
            font-size: 19px; 
            font-weight: 600; 
            color: var(--text-main); 
            margin-bottom: 8px; 
        }
        .hero-card p { 
            font-size: 13px; 
            color: var(--text-sub); 
            margin-bottom: 20px;
            opacity: 0.9;
        }
        
        /* ğŸ”µ ë©”ì¸ ì•¡ì…˜ ë²„íŠ¼ - ê·¸ë¼ë°ì´ì…˜ */
        .hero-btn {
            background: linear-gradient(135deg, var(--primary) 0%, #FF91A4 100%);
            color: white; 
            padding: 14px 30px; 
            border-radius: 25px;
            font-size: 15px; 
            font-weight: 600; 
            border: none;
            box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3);
            cursor: pointer; 
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
        }
        .hero-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(255, 182, 193, 0.4);
        }
        .hero-btn:active { 
            transform: translateY(0); 
        }

        /* ğŸ”˜ í€µ ë©”ë‰´ - ì›í˜• ì•„ì´ì½˜ */
        .quick-menu {
            display: flex; 
            justify-content: space-around; 
            padding: 0 20px; 
            margin-bottom: 25px;
        }
        .quick-item {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            cursor: pointer; 
            width: 70px;
            transition: transform 0.2s;
        }
        .quick-item:active {
            transform: scale(0.95);
        }
        .quick-icon {
            width: 55px; 
            height: 55px; 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 24px; 
            margin-bottom: 8px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .quick-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            padding: 2px;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.5), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .quick-item:hover .quick-icon::before {
            opacity: 1;
        }
        
        /* ê° ì•„ì´ì½˜ ìƒ‰ìƒ */
        .icon-love { background: linear-gradient(135deg, #FFB6C1 0%, #FF91A4 100%); color: white; }
        .icon-test { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); color: #1976D2; }
        .icon-mood { background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); color: #7B1FA2; }
        .icon-collect { background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%); color: #F57F17; }
        .icon-chat { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); color: #388E3C; }
        
        .quick-text { 
            font-size: 11px; 
            color: var(--text-sub); 
            font-weight: 500;
            margin-top: 3px;
        }

        /* ğŸ§­ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ - ìœ ë¦¬êµ¬ìŠ¬ ìŠ¤íƒ€ì¼ */
        .bottom-nav {
            position: fixed; 
            bottom: 0; 
            left: 50%; 
            transform: translateX(-50%);
            width: 100%; 
            max-width: 480px; 
            height: 80px;
            background: var(--glass);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            display: flex; 
            justify-content: space-around; 
            align-items: center;
            z-index: 1000; 
            padding-bottom: 10px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }
        
        /* --- ìƒˆë¡œìš´ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ (Font Awesome) --- */
        .nav-item {
            display: flex; 
            flex-direction: column; 
            align-items: center;
            color: var(--text-sub); 
            text-decoration: none; 
            width: 60px;
            transition: all 0.3s ease;
        }
        .nav-item i {
            font-size: 24px; 
            margin-bottom: 4px;
            transition: all 0.3s ease;
        }
        .nav-text { 
            font-size: 10px; 
            font-weight: 500;
        }
        .nav-item.active { 
            color: var(--primary); 
        }
        .nav-item.active i {
            transform: scale(1.1);
        }
        
        /* ì¤‘ì•™ ë¬´ë“œ ë²„íŠ¼ - ê°•ì¡° */
        .nav-item.central .central-bg {
            width: 50px; 
            height: 50px; 
            background: linear-gradient(135deg, var(--primary) 0%, #FF91A4 100%);
            border-radius: 18px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            box-shadow: 0 8px 20px rgba(255, 182, 193, 0.4); 
            margin-bottom: -20px; 
            border: 3px solid white;
            transform: translateY(-12px);
            transition: all 0.3s ease;
        }
        .nav-item.central:hover .central-bg {
            transform: translateY(-15px) scale(1.05);
        }
        .nav-item.central i { 
            color: white; 
            width: 26px; 
            height: 26px; 
            margin: 0; 
        }
        .nav-item.central .nav-text { 
            margin-top: 20px; 
            font-weight: 700; 
            color: var(--primary);
            font-size: 11px;
        }

        /* ğŸ—³ï¸ ì¹´ë“œ ìŠ¤íƒ€ì¼ - ìœ ë¦¬êµ¬ìŠ¬ íš¨ê³¼ */
        .content-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px; 
            padding: 20px;
            margin: 0 20px 15px; 
            box-shadow: var(--shadow-glass);
            border: 1px solid rgba(255,255,255,0.4);
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .content-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        .badge-new {
            position: absolute; 
            top: 15px; 
            right: 15px;
            background: linear-gradient(135deg, #FFB6C1 0%, #FF91A4 100%);
            color: white; 
            font-size: 10px;
            padding: 4px 10px; 
            border-radius: 15px; 
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(255, 182, 193, 0.3);
        }

        /* ğŸ“® ìŠ¤íƒ¬í”„ ê·¸ë¦¬ë“œ */
        .stamp-grid {
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 8px;
            margin-top: 20px; 
            justify-items: center;
        }
        .stamp-circle {
            width: 35px; 
            height: 35px; 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-size: 12px; 
            font-weight: 600;
            border: 1px solid rgba(203, 213, 224, 0.5); 
            color: var(--text-sub);
            background: rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }
        .stamp-circle.active {
            background: linear-gradient(135deg, var(--primary) 0%, #FF91A4 100%); 
            color: white; 
            border: none;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.4);
            transform: scale(1.05);
        }

        /* ğŸ˜Š ë¬´ë“œ ì´ëª¨í‹°ì½˜ - ì»¤ìŠ¤í…€ ë””ìì¸ */
        .mood-emoji {
            font-size: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
            padding: 10px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.5);
            margin: 10px;
        }
        .mood-emoji:hover {
            transform: scale(1.1);
        }
        .mood-emoji.selected {
            transform: scale(1.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        /* ğŸ” ëª¨ë‹¬ - ëª¨ë˜ ë””ìì¸ */
        .modal-overlay {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%;
            background: rgba(26, 54, 93, 0.3);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            z-index: 2000;
            display: none; 
            align-items: center; 
            justify-content: center;
            padding: 20px;
        }
        .modal-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            width: 90%; 
            max-width: 340px;
            border-radius: 25px; 
            padding: 30px; 
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.5);
        }
        .input-box {
            width: 100%; 
            padding: 14px; 
            border: 1.5px solid rgba(255,255,255,0.5);
            border-radius: 15px; 
            margin-bottom: 12px; 
            font-size: 14px; 
            background: rgba(255,255,255,0.7);
            transition: all 0.3s ease;
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 400;
        }
        .input-box:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.9);
            box-shadow: 0 0 20px rgba(255, 182, 193, 0.2);
        }
        .select-box {
            width: 100%; 
            padding: 14px; 
            border: 1.5px solid rgba(255,255,255,0.5);
            border-radius: 15px; 
            margin-bottom: 12px; 
            font-size: 14px; 
            background: rgba(255,255,255,0.7);
            cursor: pointer;
            font-family: 'Noto Sans KR', sans-serif;
            font-weight: 400;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 20px;
            padding-right: 40px;
        }
        .select-box:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.9);
        }

        /* ğŸ“ ê´€ë¦¬ì ê¸€ì“°ê¸° ë²„íŠ¼ */
        .admin-write-btn {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary) 0%, #FF91A4 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(255, 182, 193, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 999;
        }
        .admin-write-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(255, 182, 193, 0.5);
        }
        .admin-write-btn i {
            color: white;
            font-size: 24px;
        }

        /* ìœ í‹¸ë¦¬í‹° */
        .hide { display: none !important; }
        .toast {
            position: fixed; 
            bottom: 100px; 
            left: 50%; 
            transform: translateX(-50%);
            background: linear-gradient(135deg, rgba(26, 54, 93, 0.95) 0%, rgba(45, 55, 72, 0.95) 100%);
            color: white;
            padding: 12px 24px; 
            border-radius: 25px; 
            font-size: 13px; 
            z-index: 3000;
            animation: fadeUp 3s forwards;
            backdrop-filter: blur(10px);
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        @keyframes fadeUp { 
            0%{opacity:0; bottom:80px; transform:translateX(-50%) translateY(10px)}
            10%{opacity:1; bottom:100px; transform:translateX(-50%) translateY(0)}
            90%{opacity:1; bottom:100px; transform:translateX(-50%) translateY(0)}
            100%{opacity:0; bottom:80px; transform:translateX(-50%) translateY(-10px)}
        }

        /* ê¸€ì“°ê¸° ëª¨ë“œ */
        .mood-write-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            z-index: 1999;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        .mood-write-content {
            width: 100%;
            max-width: 340px;
            text-align: center;
        }
        .selected-mood-emoji {
            font-size: 80px;
            margin-bottom: 20px;
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.1));
        }

        /* ì¹´í…Œê³ ë¦¬ íƒ­ */
        .category-tabs {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            justify-content: center;
        }
        .category-tab {
            padding: 8px 18px;
            border-radius: 20px;
            border: none;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.5);
            color: var(--text-sub);
        }
        .category-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, #FF91A4 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.3);
        }

        /* í•„í„° ë“œë¡­ë‹¤ìš´ */
        .filter-dropdown {
            position: absolute;
            top: 70px;
            right: 20px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            box-shadow: var(--shadow-glass);
            display: none;
            z-index: 100;
            min-width: 150px;
        }
        .filter-dropdown.show {
            display: block;
        }
        .filter-option {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s;
            font-size: 14px;
        }
        .filter-option:hover {
            background: rgba(255, 182, 193, 0.1);
        }
        .filter-option.active {
            background: var(--primary);
            color: white;
        }

        /* ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ */
        .post-detail {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            z-index: 1999;
            display: none;
            padding: 20px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
        }
        .post-detail-content {
            max-width: 480px;
            margin: 0 auto;
            margin-top: 60px;
        }
        .post-actions {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            justify-content: center;
        }
        .post-action-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.7);
            color: var(--text-main);
        }
        .post-action-btn.active {
            background: var(--primary);
            color: white;
        }
        .post-action-btn:hover {
            transform: translateY(-2px);
        }

        /* ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ */
        .change-pw-success {
            margin-top: 15px;
            padding: 12px;
            background: linear-gradient(135deg, #C8E6C9 0%, #A5D6A7 100%);
            color: #2E7D32;
            border-radius: 12px;
            font-size: 13px;
            text-align: center;
            display: none;
        }

        /* ê´€ë¦¬ì ë©”ë‰´ */
        .admin-menu {
            position: absolute;
            top: 15px;
            right: 15px;
        }
        .admin-menu-btn {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: rgba(255, 182, 193, 0.2);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .admin-menu-btn:hover {
            background: rgba(255, 182, 193, 0.3);
            transform: scale(1.05);
        }
        .admin-dropdown {
            position: absolute;
            top: 45px;
            right: 0;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 10px;
            box-shadow: var(--shadow-glass);
            min-width: 120px;
            display: none;
        }
        .admin-dropdown.show {
            display: block;
        }
        .admin-menu-item {
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .admin-menu-item:hover {
            background: rgba(255, 182, 193, 0.1);
        }

        /* ë°˜ì‘í˜• ìµœì í™” */
        @media (max-width: 400px) {
            .header-title {
                font-size: 24px;
            }
            .quick-icon {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }
            .stamp-circle {
                width: 30px;
                height: 30px;
                font-size: 10px;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary) 0%, #FF91A4 100%);
            border-radius: 3px;
        }
    </style>
</head>
<body>

    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" class="modal-overlay" style="display: flex;">
        <div class="modal-card">
            <h2 style="color: var(--primary); font-size: 26px; margin-bottom: 20px; font-weight: 700;">ìíœ´ë ˆí„°</h2>
            <p style="color: var(--text-sub); font-size: 13px; margin-bottom: 25px;">ë‹¹ì‹ ì˜ íŠ¹ë³„í•œ íœ´ì‹ì„ ìœ„í•œ ê³µê°„</p>
            
            <input type="email" id="loginEmail" class="input-box" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
            <input type="password" id="loginPassword" class="input-box" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”">
            
            <div style="display: flex; align-items: center; margin-bottom: 20px; font-size: 12px; color: var(--text-sub);">
                <input type="checkbox" id="keepLogin" style="margin-right: 5px; width: 16px; height: 16px;">
                <label for="keepLogin">ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</label>
            </div>

            <button onclick="handleLogin()" class="hero-btn" style="width: 100%;">ë¡œê·¸ì¸í•˜ê¸°</button>
            <p style="margin-top: 15px; font-size: 12px; color: var(--text-sub);">ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <span onclick="alert('íšŒì›ê°€ì… ê¸°ì¤€ì€ ìíœ´ë ˆí„° êµ¬ë…ìì…ë‹ˆë‹¤')" style="color: var(--primary); cursor: pointer; font-weight: 500;">íšŒì›ê°€ì…</span></p>
        </div>
    </div>

    <!-- ê¸€ì“°ê¸° ëª¨ë‹¬ -->
    <div id="writeModal" class="modal-overlay">
        <div class="modal-card" style="text-align: left;">
            <h3 id="writeTitle" style="font-size: 18px; margin-bottom: 15px; color: var(--text-main); font-weight: 600;">ê¸€ì“°ê¸°</h3>
            
            <select id="letterCategory" class="select-box" style="display:none;">
                <option value="ìíœ´ë ˆí„°">ìíœ´ë ˆí„°</option>
                <option value="ìíœ´ë©">ìíœ´ë©</option>
            </select>

            <div id="moodSelector" style="display:none; margin-bottom: 20px; text-align: center; flex-wrap: wrap; justify-content: center;">
                <span class="mood-emoji" data-mood="happy" onclick="selectMood('happy', 'ğŸ˜Š')">ğŸ˜Š</span>
                <span class="mood-emoji" data-mood="love" onclick="selectMood('love', 'ğŸ¥°')">ğŸ¥°</span>
                <span class="mood-emoji" data-mood="sad" onclick="selectMood('sad', 'ğŸ˜¢')">ğŸ˜¢</span>
                <span class="mood-emoji" data-mood="angry" onclick="selectMood('angry', 'ğŸ˜¡')">ğŸ˜¡</span>
                <span class="mood-emoji" data-mood="tired" onclick="selectMood('tired', 'ğŸ˜´')">ğŸ˜´</span>
            </div>

            <input type="text" id="postTitle" class="input-box" placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
            <textarea id="postContent" class="input-box" style="height: 120px; resize: none;" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
            
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="submitPost()" class="hero-btn" style="flex: 1;">ë“±ë¡í•˜ê¸°</button>
                <button onclick="closeModal()" style="flex: 1; background: rgba(203, 213, 224, 0.3); color: var(--text-main); font-weight: 600;">ì·¨ì†Œí•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ë¬´ë“œ ê¸°ë¡ ì“°ê¸° ëª¨ë“œ -->
    <div id="moodWriteMode" class="mood-write-mode">
        <div class="mood-write-content">
            <div class="selected-mood-emoji" id="selectedMoodEmoji"></div>
            <input type="text" id="moodTitle" class="input-box" placeholder="ì˜¤ëŠ˜ì˜ ë¬´ë“œ ì œëª©">
            <textarea id="moodContent" class="input-box" style="height: 150px; margin-top: 10px;" placeholder="ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë• ë‚˜ìš”? ë§ˆìŒì„ ê¸°ë¡í•´ë³´ì„¸ìš”"></textarea>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="submitMood()" class="hero-btn" style="flex: 1;">ë¬´ë“œ ì €ì¥í•˜ê¸°</button>
                <button onclick="closeMoodWriteMode()" style="flex: 1; background: rgba(203, 213, 224, 0.3); color: var(--text-main); font-weight: 600;">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ê´€ë¦¬ì ê¸€ì“°ê¸° ë²„íŠ¼ -->
    <div id="adminWriteBtn" class="admin-write-btn hide" onclick="openModal('letter')">
        <i class="fas fa-pen"></i>
    </div>

    <!-- ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€ -->
    <div id="postDetailOverlay" class="post-detail-overlay modal-overlay">
        <div id="postDetailContent" class="post-detail-content">
            <!-- ìƒì„¸ ë‚´ìš©ì´ ë™ì ìœ¼ë¡œ ì‚½ì…ë¨ -->
        </div>
    </div>

    <div id="appContainer" class="app-container">
    </div>

    <nav class="bottom-nav">
        <a class="nav-item active" onclick="renderTab('home')" id="nav-home">
            <i class="fas fa-home"></i>
            <span class="nav-text">í™ˆ</span>
        </a>
        <a class="nav-item" onclick="renderTab('letter')" id="nav-letter">
            <i class="fas fa-envelope"></i>
            <span class="nav-text">ë ˆí„°</span>
        </a>
        <a class="nav-item central" onclick="renderTab('mood')" id="nav-mood">
            <div class="central-bg">
                <i class="fas fa-heart"></i>
            </div>
            <span class="nav-text">ë¬´ë“œ</span>
        </a>
        <a class="nav-item" onclick="renderTab('editorTalk')" id="nav-editorTalk">
            <i class="fas fa-comments"></i>
            <span class="nav-text">ì—ë””í„°í†¡</span>
        </a>
        <a class="nav-item" onclick="renderTab('mypage')" id="nav-mypage">
            <i class="fas fa-user"></i>
            <span class="nav-text">ë§ˆì´</span>
        </a>
    </nav>

    <script>
        // --- ë°ì´í„° ---
        const ADMINS = [
            {email: 'happxi@jahyu.com', name: 'í–…ì”¨', role: 'superadmin'}, 
            {email: 'elly@jahyu.com', name: 'ì—˜ë¦¬', role: 'editor'}, 
            {email: 'gokal@jahyu.com', name: 'ê³ ì¹¼', role: 'editor'}, 
            {email: 'sunny@jahyu.com', name: 'ì¨ë‹ˆ', role: 'editor'}, 
            {email: 'yudan@jahyu.com', name: 'ìœ ë‹¨', role: 'editor'}
        ];
        
        let currentUser = null;
        let currentTab = 'home';
        let userStamps = 28; // í…ŒìŠ¤íŠ¸ìš©
        let selectedMoodData = null;
        let currentCategory = 'all';
        let currentEditorFilter = 'all';
        let moodCheckKey = ''; // ë¬´ë“œ ê¸°ë¡ 1ì¼ 1íšŒ ì²´í¬ìš©
        
        // ë”ë¯¸ ë°ì´í„°
        const letterPosts = [
            {id: 1, category: 'ìíœ´ë ˆí„°', title: '[32í˜¸] í‡´ì‚¬ í›„ ë²ˆì•„ì›ƒ, ì €ë§Œ ì´ëŸ°ê°€ìš”?', content: 'í‡´ì‚¬ í›„ì—ë„ ì‰¬ì§€ ëª»í•˜ëŠ” ë‹¹ì‹ ì—ê²Œ...', author: 'í–…ì”¨', date: '2024-01-15'},
            {id: 2, category: 'ìíœ´ë©', title: '[ìíœ´ë©] ê¸€ì“°ê¸° ë…¸í•˜ìš°', content: 'ë‚´ ë§ˆìŒì„ ë‹´ëŠ” ë²• A to Z', author: 'ì—˜ë¦¬', date: '2024-01-14'},
            {id: 3, category: 'ìíœ´ë ˆí„°', title: '[31í˜¸] ì£¼ë§ ì‰¼ì˜ ê¸°ìˆ ', content: 'ì™„ì „í•œ íœ´ì‹ì„ ìœ„í•œ íŒ', author: 'í–…ì”¨', date: '2024-01-13'}
        ];

        const editorTalkPosts = [
            {id: 1, author: 'ì—˜ë¦¬', content: 'ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ë„ˆë¬´ ì¢‹ë„¤ìš”! ğŸŒ¿', date: '2024-01-15 10:30', likes: 12, comments: 5, likesByUser: false},
            {id: 2, author: 'í–…ì”¨', content: 'ëª¨ë‘ ì£¼ë§ ì˜ ë³´ë‚´ê³  ê³„ì‹ ê°€ìš”? â˜€ï¸', date: '2024-01-14 15:20', likes: 25, comments: 8, likesByUser: false},
            {id: 3, author: 'ê³ ì¹¼', content: 'ìƒˆë¡œìš´ ì£¼ê°„ ì‹œì‘! ì‘ì›í•©ë‹ˆë‹¤ ğŸ’ª', date: '2024-01-13 09:00', likes: 18, comments: 3, likesByUser: false}
        ];

        // --- ê¸°ëŠ¥ ---

        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if(!email || !password) return showToast('ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');

            // ê´€ë¦¬ì í™•ì¸
            const admin = ADMINS.find(a => a.email === email);
            
            currentUser = {
                id: email,
                name: admin ? admin.name : (email.includes('happxi') ? 'í–…ì‚' : 'í–…ì‚ë‹˜'),
                isAdmin: !!admin,
                role: admin ? admin.role : 'user'
            };

            // ë¡œê·¸ì¸ ìœ ì§€ ë¡œì§
            if(document.getElementById('keepLogin').checked) {
                localStorage.setItem('jahyu_user', JSON.stringify(currentUser));
            }

            document.getElementById('loginModal').style.display = 'none';
            renderTab('home');
            showToast(`${currentUser.name}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‰`);
            
            // ê´€ë¦¬ì ê¸€ì“°ê¸° ë²„íŠ¼ í‘œì‹œ
            if(currentUser.isAdmin) {
                document.getElementById('adminWriteBtn').classList.remove('hide');
            }
        }

        function checkAutoLogin() {
            const savedUser = localStorage.getItem('jahyu_user');
            if(savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('loginModal').style.display = 'none';
                renderTab('home');
                
                // ê´€ë¦¬ì ê¸€ì“°ê¸° ë²„íŠ¼ í‘œì‹œ
                if(currentUser.isAdmin) {
                    document.getElementById('adminWriteBtn').classList.remove('hide');
                }
            }
        }

        // --- íƒ­ ë Œë”ë§ ì‹œìŠ¤í…œ ---
        function renderTab(tabName) {
            currentTab = tabName;
            const container = document.getElementById('appContainer');
            container.innerHTML = '';
            window.scrollTo(0,0);

            // íƒ­ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById(`nav-${tabName}`);
            if(activeNav) activeNav.classList.add('active');

            if(tabName === 'home') {
                container.innerHTML = `
                    <div class="header-section">
                        <h1 class="header-title">í–…ì‚ë‹˜ ì˜¤ëŠ˜ë„ í–‰ë³µí•˜ì„¸ìš”!</h1>
                        <p class="header-sub">ë©”ë§ˆë¥¸ ì¼ìƒì— íœ´ì‹ í•œ ë°©ìš¸! ğŸ’§</p>
                    </div>

                    <div class="hero-card">
                        <h3>ì˜¤ëŠ˜ì€ ì–´ë–¤ íë§ì´ í•„ìš”í•˜ì„¸ìš”?</h3>
                        <p>ìíœ´ë ˆí„°ì™€ ìíœ´ë©ì„ ì£¼ì œë³„ë¡œ í•œ ëˆˆì—!</p>
                        <button onclick="handleArchiveClick()" class="hero-btn">ë ˆí„° ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°</button>
                    </div>

                    <div class="quick-menu">
                        <div class="quick-item" onclick="window.open('https://maily.so/happci/', '_blank')">
                            <div class="quick-icon icon-love">
                                <i class="fas fa-envelope-open-text"></i>
                            </div>
                            <span class="quick-text">ë ˆí„° ì½ê¸°</span>
                        </div>
                        <div class="quick-item" onclick="window.open('https://index-html-zak5.vercel.app/', '_blank')">
                            <div class="quick-icon icon-test">
                                <i class="fas fa-magic"></i>
                            </div>
                            <span class="quick-text">íë§ í…ŒìŠ¤íŠ¸</span>
                        </div>
                        <div class="quick-item" onclick="renderTab('mood')">
                            <div class="quick-icon icon-mood">
                                <i class="fas fa-heart-pulse"></i>
                            </div>
                            <span class="quick-text">ì˜¤ëŠ˜ì˜ ë¬´ë“œ</span>
                        </div>
                        <div class="quick-item" onclick="window.open('http://pf.kakao.com/_Jfjxgn/111753149', '_blank')">
                            <div class="quick-icon icon-collect">
                                <i class="fas fa-quote-left"></i>
                            </div>
                            <span class="quick-text">ë¬¸ì¥ ìˆ˜ì§‘</span>
                        </div>
                        <div class="quick-item" onclick="window.open('http://pf.kakao.com/_Jfjxgn', '_blank')">
                            <div class="quick-icon icon-chat">
                                <i class="fas fa-comments"></i>
                            </div>
                            <span class="quick-text">1:1 ì±„íŒ…</span>
                        </div>
                    </div>

                    <div style="padding: 0 20px;">
                        <h4 style="margin-bottom:15px; font-weight:600; color:var(--text-main); font-size: 16px;">ìµœì‹  ë ˆí„°</h4>
                        <div class="content-card" onclick="showPostDetail(${letterPosts[0].id})">
                            <span class="badge-new">NEW</span>
                            <h4 style="font-weight:600; margin-bottom:5px; color:var(--text-main);">${letterPosts[0].title}</h4>
                            <p style="font-size:12px; color:var(--text-sub);">${letterPosts[0].content}</p>
                        </div>
                    </div>
                `;
            } else if (tabName === 'letter') {
                container.innerHTML = `
                    <div class="header-section" style="position: relative;">
                        <h2 class="header-title">ìíœ´ë ˆí„°ë¥¼ í•œ ëˆˆì—!</h2>
                        <div class="category-tabs">
                            <button class="category-tab ${currentCategory === 'all' ? 'active' : ''}" onclick="changeCategory('all')">ì „ì²´</button>
                            <button class="category-tab ${currentCategory === 'ìíœ´ë ˆí„°' ? 'active' : ''}" onclick="changeCategory('ìíœ´ë ˆí„°')">ìíœ´ë ˆí„°</button>
                            <button class="category-tab ${currentCategory === 'ìíœ´ë©' ? 'active' : ''}" onclick="changeCategory('ìíœ´ë©')">ìíœ´ë©</button>
                        </div>
                        
                        <!-- ê´€ë¦¬ì ë©”ë‰´ -->
                        ${currentUser && currentUser.isAdmin ? `
                            <div class="admin-menu">
                                <button class="admin-menu-btn" onclick="toggleAdminMenu()">
                                    <i class="fas fa-ellipsis-v" style="color: var(--primary);"></i>
                                </button>
                                <div class="admin-dropdown" id="adminDropdown">
                                    <div class="admin-menu-item" onclick="openModal('letter')">
                                        <i class="fas fa-plus-circle"></i> ê¸€ì“°ê¸°
                                    </div>
                                    <div class="admin-menu-item" onclick="toggleAdminMenu(); alert('ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ ê¸°ëŠ¥')">
                                        <i class="fas fa-tags"></i> ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
                                    </div>
                                    <div class="admin-menu-item" onclick="toggleAdminMenu(); alert('í†µê³„ ê¸°ëŠ¥')">
                                        <i class="fas fa-chart-bar"></i> í†µê³„
                                    </div>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                    <div style="padding: 0 20px;">
                        ${getFilteredPosts().map(post => `
                            <div class="content-card" onclick="showPostDetail(${post.id})">
                                <h4 style="font-weight:600; color:var(--text-main); margin-bottom:5px;">${post.title}</h4>
                                <p style="font-size:12px; color:var(--text-sub); margin-bottom:8px;">${post.content}</p>
                                <p style="font-size:11px; color:var(--text-sub); opacity:0.7;">${post.author} Â· ${formatDate(post.date)}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (tabName === 'mood') {
                // ìŠˆí¼ ê´€ë¦¬ìì¸ í–…ì”¨ë©´ ëª¨ë“  ì‚¬ìš©ì ë¬´ë“œ ë³´ê¸°
                if(currentUser && currentUser.role === 'superadmin') {
                    container.innerHTML = `
                        <div class="header-section" style="position: relative;">
                            <h2 class="header-title">ëª¨ë“  ë¬´ë“œ ê¸°ë¡</h2>
                            <p class="header-sub">ì‚¬ìš©ìë“¤ì˜ ê°ì •ì„ ëª¨ì•„ë´ìš”</p>
                        </div>
                        <div style="padding: 0 20px;">
                            <div class="content-card">
                                <h4 style="font-weight:600; color:var(--text-main); margin-bottom:10px;">ë¬´ë“œ í†µê³„</h4>
                                <p style="font-size:14px; color:var(--text-sub);">ì˜¤ëŠ˜ ì´ 45ëª…ì˜ ì‚¬ìš©ìê°€ ë¬´ë“œë¥¼ ê¸°ë¡í–ˆì–´ìš” ğŸ˜Š</p>
                            </div>
                            <div class="content-card">
                                <p style="color:var(--text-sub); text-align:center;">âœ¨ ìŠˆí¼ ê´€ë¦¬ììš© ë¬´ë“œ ë¶„ì„ ê¸°ì¤€ âœ¨</p>
                            </div>
                        </div>
                    `;
                } else {
                    // ì¼ë°˜ ì‚¬ìš©ì ë¬´ë“œ ê¸°ë¡
                    container.innerHTML = `
                        <div class="header-section">
                            <h2 class="header-title">ì˜¤ëŠ˜ì˜ ë¬´ë“œ</h2>
                            <p class="header-sub">í–…ì‚ë‹˜ì˜ ê°ì •ê³¼ ìƒê°ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!<br>
                            ì˜¤ì§ í–…ì‚ë‹˜ë§Œì„ ìœ„í•œ ê³µê°„ì´ì—ìš”!<br>
                            ë¬´ë“œë¥¼ ê¸°ë¡í•˜ë©´ ìíœ´ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë¼ìš”!(1ì¼ 1íšŒ)</p>
                        </div>
                        <div class="content-card" style="text-align:center; padding: 40px 20px;">
                            <p style="color:var(--text-sub); opacity:0.7; margin-bottom:20px;">ì‘ì„±ëœ ë¬´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            <button onclick="openModal('mood')" class="hero-btn">ë¬´ë“œ ê¸°ë¡í•˜ê¸° âœï¸</button>
                        </div>
                    `;
                }
            } else if (tabName === 'editorTalk') {
                container.innerHTML = `
                    <div class="header-section" style="position: relative;">
                        <h2 class="header-title">ì—ë””í„° í†¡</h2>
                        <p class="header-sub">ì—ë””í„°ì˜ ì¼ìƒì„ ë” ê°€ê¹Œì´ì—ì„œ ë§Œë‚˜ë³´ì„¸ìš”!</p>
                        
                        <!-- ì—ë””í„° í•„í„° (ê´€ë¦¬ììš©) -->
                        ${currentUser && currentUser.isAdmin ? `
                            <div class="admin-menu">
                                <button class="admin-menu-btn" onclick="toggleEditorFilter()">
                                    <i class="fas fa-filter" style="color: var(--primary);"></i>
                                </button>
                                <div class="filter-dropdown" id="editorFilterDropdown">
                                    <div class="filter-option ${currentEditorFilter === 'all' ? 'active' : ''}" onclick="changeEditorFilter('all')">ì „ì²´ ì—ë””í„°</div>
                                    ${ADMINS.filter(a => a.role === 'editor').map(editor => `
                                        <div class="filter-option ${currentEditorFilter === editor.name ? 'active' : ''}" onclick="changeEditorFilter('${editor.name}')">${editor.name}</div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                    <div style="padding: 0 20px;">
                        ${getFilteredEditorTalkPosts().map(post => `
                            <div class="content-card" onclick="showEditorTalkDetail(${post.id})">
                                <div style="display:flex; align-items:center; margin-bottom:10px;">
                                    <div style="width:35px; height:35px; background:linear-gradient(135deg, #FFB6C1 0%, #FF91A4 100%); border-radius:50%; display:flex; align-items:center; justify-content: center; color:white; margin-right:10px; font-weight:600; font-size:14px;">
                                        ${post.author[0]}
                                    </div>
                                    <div>
                                        <span style="font-weight:600; color:var(--text-main);">${post.author}</span>
                                        <p style="font-size:11px; color:var(--text-sub); opacity:0.7;">${post.date}</p>
                                    </div>
                                </div>
                                <p style="margin-bottom:10px; color:var(--text-main); line-height:1.5;">${post.content}</p>
                                <div style="display:flex; gap:15px; font-size:12px; color:var(--text-sub);">
                                    <span style="cursor:pointer; ${post.likesByUser ? 'color: var(--primary);' : ''}" onclick="event.stopPropagation(); toggleLike(${post.id}, 'editorTalk')">
                                        <i class="fas fa-heart"></i> ${post.likes}
                                    </span>
                                    <span><i class="fas fa-comment"></i> ${post.comments}</span>
                                    <span><i class="fas fa-star"></i> ì €ì¥</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (tabName === 'mypage') {
                // ìŠ¤íƒ¬í”„ ê·¸ë¦¬ë“œ ìƒì„±
                let stampHTML = '';
                for(let i=1; i<=30; i++) {
                    const active = i <= userStamps ? 'active' : '';
                    stampHTML += `<div class="stamp-circle ${active}">${i}</div>`;
                }

                container.innerHTML = `
                    <div class="header-section">
                        <h2 class="header-title">My Page</h2>
                        <div style="background:var(--glass); padding:25px; border-radius:25px; display:flex; align-items:center; margin-top:20px; box-shadow:var(--shadow-glass); backdrop-filter:blur(10px);">
                            <div style="width:60px; height:60px; background:linear-gradient(135deg, #FFB6C1 0%, #FF91A4 100%); border-radius:50%; margin-right:20px; display:flex; align-items:center; justify-content:center; color:white; font-weight:700; font-size:24px; box-shadow:0 8px 20px rgba(255, 182, 193, 0.3);">
                                ${currentUser.name[0]}
                            </div>
                            <div style="flex:1;">
                                <h3 style="font-size:20px; font-weight:600; color:var(--text-main); margin-bottom:5px;">${currentUser.name}ë‹˜</h3>
                                <p style="font-size:13px; color:var(--text-sub); margin-bottom:3px;">${currentUser.id}</p>
                                <p style="font-size:12px; color:var(--primary); font-weight:500;">${currentUser.isAdmin ? 'ê´€ë¦¬ì' : 'êµ¬ë…ì'}</p>
                            </div>
                        </div>
                    </div>

                    <div style="padding: 0 20px;">
                        <div class="content-card">
                            <h4 style="font-weight:600; color:var(--primary); margin-bottom:15px;">ìíœ´ìŠ¤íƒ¬í”„ í˜„í™© (${userStamps}ê°œ)</h4>
                            <div class="stamp-grid">
                                ${stampHTML}
                            </div>
                            <div style="background:linear-gradient(135deg, rgba(255,182,193,0.1) 0%, rgba(227,242,253,0.1) 100%); padding:20px; border-radius:20px; margin-top:25px; font-size:13px; color:var(--text-main); line-height:1.6; border:1px solid rgba(255,182,193,0.2);">
                                *30ê°œë¥¼ ëª¨ì€ ìŠ¤íƒ¬í”„í™”ë©´ì„ ìº¡ì³í•´ì„œ êµ¬ë… ì¤‘ì¸ ì´ë©”ì¼ê³¼ í•¨ê»˜ ì¹´í†¡ì±„ë„ë¡œ ë³´ë‚´ì£¼ì„¸ìš”!<br>
                                ì–´ëŠë‚  íŠ¹ë³„í•œ ë ˆí„°ê°€ ë„ì°©í• ì§€ë„ ëª°ë¼ìš”!ğŸ
                            </div>
                        </div>

                        <div class="content-card" style="padding:0; margin-bottom:20px;">
                            ${['ë‚´ê°€ ì“´ ê¸€', 'ë‚˜ì˜ ëŒ“ê¸€', 'ì¢‹ì•„ìš”í•œ ê¸€', 'ë¶ë§ˆí¬í•œ ê¸€'].map(m => {
                                const icons = ['fas fa-pen', 'fas fa-comment-dots', 'fas fa-heart', 'fas fa-bookmark'];
                                const iconIndex = ['ë‚´ê°€ ì“´ ê¸€', 'ë‚˜ì˜ ëŒ“ê¸€', 'ì¢‹ì•„ìš”í•œ ê¸€', 'ë¶ë§ˆí¬í•œ ê¸€'].indexOf(m);
                                return `
                                    <div onclick="handleMyPageAction('${m}')" style="padding:20px; border-bottom:1px solid rgba(203,213,224,0.2); display:flex; justify-content:space-between; align-items:center; background:transparent;">
                                        <div style="display:flex; align-items:center; gap:12px;">
                                            <i class="${icons[iconIndex]}" style="color: var(--primary); font-size:16px;"></i>
                                            <span style="color:var(--text-main); font-weight:500;">${m}</span>
                                        </div>
                                        <i class="fas fa-chevron-right" style="color:var(--text-sub); font-size:12px;"></i>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        
                        <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ -->
                        <div class="content-card">
                            <h4 style="font-weight:600; color:var(--text-main); margin-bottom:15px;">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h4>
                            <input type="password" id="currentPassword" class="input-box" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸">
                            <input type="password" id="newPassword" class="input-box" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸" style="margin-top:10px;">
                            <input type="password" id="confirmPassword" class="input-box" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸" style="margin-top:10px;">
                            <button onclick="changePassword()" class="hero-btn" style="width:100%; margin-top:15px;">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
                            <div id="changePwSuccess" class="change-pw-success">ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
                        </div>
                        
                        <button onclick="handleLogout()" style="width:100%; padding:15px; color:#E53E3E; background:rgba(229,62,62,0.1); border:none; font-weight:600; border-radius:15px; margin-top:20px; transition:all 0.3s;">
                            ë¡œê·¸ì•„ì›ƒ
                        </button>
                    </div>
                `;
            }
        }

        // --- ë¡œì§ í•¸ë“¤ëŸ¬ ---
        function handleArchiveClick() {
            if (currentUser && currentUser.isAdmin) {
                openModal('letter');
            } else {
                renderTab('letter');
            }
        }

        function openModal(type) {
            if (!currentUser) {
                showToast('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
                return;
            }

            const modal = document.getElementById('writeModal');
            const title = document.getElementById('writeTitle');
            const moodSec = document.getElementById('moodSelector');
            const letterCat = document.getElementById('letterCategory');

            modal.style.display = 'flex';
            moodSec.style.display = 'none';
            letterCat.style.display = 'none';

            if (type === 'mood') {
                // ì˜¤ëŠ˜ ë¬´ë“œ ê¸°ë¡ ì—¬ë¶€ ì²´í¬
                const today = new Date().toDateString();
                moodCheckKey = `mood_${currentUser.id}_${today}`;
                const hasRecordedToday = localStorage.getItem(moodCheckKey);
                
                if (hasRecordedToday) {
                    showToast('ì˜¤ëŠ˜ì€ ì´ë¯¸ ë¬´ë“œë¥¼ ê¸°ë¡í–ˆì–´ìš”! ë‚´ì¼ ë‹¤ì‹œ ê¸°ë¡í•´ì£¼ì„¸ìš” ğŸ˜Š');
                    closeModal();
                    return;
                }

                title.innerText = 'ì˜¤ëŠ˜ì˜ ë¬´ë“œ ê¸°ë¡';
                moodSec.style.display = 'flex';
            } else if (type === 'letter') {
                if (!currentUser.isAdmin) {
                    showToast('ê´€ë¦¬ìë§Œ ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
                    return;
                }
                title.innerText = 'ë ˆí„° ë°œí–‰ (ê´€ë¦¬ì)';
                letterCat.style.display = 'block';
            } else {
                title.innerText = 'ê¸€ì“°ê¸°';
            }
        }

        function closeModal() {
            document.getElementById('writeModal').style.display = 'none';
            // ì´ˆê¸°í™”
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('letterCategory').value = 'ìíœ´ë ˆí„°';
            // ì´ëª¨ì§€ ì„ íƒ ì´ˆê¸°í™”
            document.querySelectorAll('.mood-emoji').forEach(emoji => {
                emoji.classList.remove('selected');
            });
        }

        function selectMood(mood, emoji) {
            // ë‹¤ë¥¸ ì´ëª¨ì§€ë“¤ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('.mood-emoji').forEach(e => {
                if (e.dataset.mood === mood) {
                    e.classList.add('selected');
                } else {
                    e.style.display = 'none';
                }
            });

            // ë¬´ë“œ ì“°ê¸° ëª¨ë“œ ì—´ê¸°
            selectedMoodData = {mood, emoji};
            document.getElementById('moodWriteMode').style.display = 'flex';
            document.getElementById('selectedMoodEmoji').textContent = emoji;
        }

        function closeMoodWriteMode() {
            document.getElementById('moodWriteMode').style.display = 'none';
            document.querySelectorAll('.mood-emoji').forEach(emoji => {
                emoji.style.display = 'block';
                emoji.classList.remove('selected');
            });
            selectedMoodData = null;
            document.getElementById('moodTitle').value = '';
            document.getElementById('moodContent').value = '';
        }

        function submitMood() {
            const title = document.getElementById('moodTitle').value;
            const content = document.getElementById('moodContent').value;
            
            if (!title || !content) {
                showToast('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            // ë¬´ë“œ ê¸°ë¡ ì €ì¥ ë¡œì§
            const today = new Date().toDateString();
            moodCheckKey = `mood_${currentUser.id}_${today}`;
            localStorage.setItem(moodCheckKey, 'true');

            // ìŠ¤íƒ¬í”„ ì ë¦½
            if (userStamps < 30) {
                userStamps++;
                showToast("ë¬´ë“œ ê¸°ë¡ ì™„ë£Œ! ìŠ¤íƒ¬í”„ê°€ ì ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤ âœ¨");
            } else {
                showToast("ë¬´ë“œ ê¸°ë¡ ì™„ë£Œ! ì´ë¯¸ 30ê°œë¥¼ ë‹¤ ëª¨ìœ¼ì…¨ë„¤ìš”! ğŸ‰");
            }

            closeMoodWriteMode();
            closeModal();
            renderTab('mood');
        }

        function submitPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const category = document.getElementById('letterCategory').value;
            
            if (!title || !content) {
                showToast('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            // ê²Œì‹œë¬¼ ì €ì¥ ë¡œì§ (ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì €ì¥)
            const newPost = {
                id: letterPosts.length + 1,
                category: category,
                title: `[${category}] ${title}`,
                content: content,
                author: currentUser.name,
                date: new Date().toISOString().split('T')[0]
            };
            letterPosts.unshift(newPost);

            showToast('ê²Œì‹œë¬¼ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeModal();
            renderTab('letter');
        }

        function handleLogout() {
            localStorage.removeItem('jahyu_user');
            currentUser = null;
            document.getElementById('adminWriteBtn').classList.add('hide');
            showToast('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤');
            // ë¡œê·¸ì¸ í˜ì´ì§€ ë¦¬ë¡œë“œ ëŒ€ì‹  ë¡œê·¸ì¸ ëª¨ë‹¬ í‘œì‹œ
            location.reload();
        }

        function showToast(msg) {
            const div = document.createElement('div');
            div.className = 'toast';
            div.innerText = msg;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 3000);
        }

        // --- í•„í„°ë§ ê¸°ëŠ¥ ---
        function changeCategory(category) {
            currentCategory = category;
            renderTab('letter');
        }

        function getFilteredPosts() {
            if (currentCategory === 'all') {
                return letterPosts;
            }
            return letterPosts.filter(post => post.category === currentCategory);
        }

        function changeEditorFilter(editor) {
            currentEditorFilter = editor;
            toggleEditorFilter();
            renderTab('editorTalk');
        }

        function getFilteredEditorTalkPosts() {
            if (currentEditorFilter === 'all') {
                return editorTalkPosts;
            }
            return editorTalkPosts.filter(post => post.author === currentEditorFilter);
        }

        // --- ìƒì„¸ í˜ì´ì§€ ê¸°ëŠ¥ ---
        function showPostDetail(postId) {
            const post = letterPosts.find(p => p.id === postId);
            if (!post) return;

            const detailOverlay = document.createElement('div');
            detailOverlay.className = 'modal-overlay';
            detailOverlay.style.display = 'flex';
            detailOverlay.innerHTML = `
                <div class="modal-card" style="max-width: 380px; max-height: 80vh; overflow-y: auto;">
                    <div style="position: sticky; top: 0; background: var(--glass); padding: 20px 0; margin-bottom: 20px; backdrop-filter: blur(10px);">
                        <button onclick="this.closest('.modal-overlay').remove()" style="position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-sub);">
                            <i class="fas fa-times"></i>
                        </button>
                        <h3 style="font-size: 20px; font-weight: 600; color: var(--text-main); margin-bottom: 10px;">${post.title}</h3>
                        <p style="font-size: 13px; color: var(--text-sub);">${post.author} Â· ${formatDate(post.date)}</p>
                    </div>
                    <div style="padding: 0 20px 20px;">
                        <p style="line-height: 1.8; color: var(--text-main); font-size: 15px;">${post.content}</p>
                        <div class="post-actions">
                            <button class="post-action-btn" onclick="toggleLike(${post.id}, 'letter')">
                                <i class="fas fa-heart"></i> ì¢‹ì•„ìš”
                            </button>
                            <button class="post-action-btn">
                                <i class="fas fa-comment"></i> ëŒ“ê¸€
                            </button>
                            <button class="post-action-btn">
                                <i class="fas fa-bookmark"></i> ì €ì¥
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(detailOverlay);
        }

        function showEditorTalkDetail(postId) {
            const post = editorTalkPosts.find(p => p.id === postId);
            if (!post) return;

            const detailOverlay = document.createElement('div');
            detailOverlay.className = 'modal-overlay';
            detailOverlay.style.display = 'flex';
            detailOverlay.innerHTML = `
                <div class="modal-card" style="max-width: 380px; max-height: 80vh; overflow-y: auto;">
                    <div style="position: sticky; top: 0; background: var(--glass); padding: 20px 0; margin-bottom: 20px; backdrop-filter: blur(10px);">
                        <button onclick="this.closest('.modal-overlay').remove()" style="position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-sub);">
                            <i class="fas fa-times"></i>
                        </button>
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #FFB6C1 0%, #FF91A4 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; margin-right: 12px; font-weight: 600;">
                                ${post.author[0]}
                            </div>
                            <div>
                                <h3 style="font-size: 16px; font-weight: 600; color: var(--text-main);">${post.author}</h3>
                                <p style="font-size: 12px; color: var(--text-sub);">${post.date}</p>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 0 20px 20px;">
                        <p style="line-height: 1.8; color: var(--text-main); font-size: 15px; margin-bottom: 20px;">${post.content}</p>
                        <div class="post-actions">
                            <button class="post-action-btn ${post.likesByUser ? 'active' : ''}" onclick="toggleLike(${post.id}, 'editorTalk'); this.classList.toggle('active'); this.querySelector('span').textContent = this.classList.contains('active') ? '${post.likes + 1}' : '${post.likes}';">
                                <i class="fas fa-heart"></i> <span>${post.likes}</span>
                            </button>
                            <button class="post-action-btn">
                                <i class="fas fa-comment"></i> ${post.comments}
                            </button>
                            <button class="post-action-btn" onclick="this.classList.toggle('active');">
                                <i class="fas fa-bookmark"></i> ì €ì¥
                            </button>
                        </div>
                        
                        <!-- ëŒ“ê¸€ ì…ë ¥ -->
                        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(203,213,224,0.2);">
                            <input type="text" class="input-box" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”..." style="width: 100%; margin-bottom: 10px;">
                            <button class="hero-btn" style
